!function(){function J(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function G(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function C(a){return null===a?NaN:+a}function z(a){return!isNaN(a)}function S(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0>a(b[f],c)?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0<a(b[f],
c)?e=f:d=f+1}return d}}}function la(a){return a.length}function ra(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function P(){this._=Object.create(null)}function W(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function sa(a){return"\x00"===(a+="")[0]?a.slice(1):a}function ca(a){return W(a)in this._}function ea(a){return(a=W(a))in this._&&delete this._[a]}function k(){var a=[],b;for(b in this._)a.push(sa(b));return a}function m(){var a=0,b;for(b in this._)++a;
return a}function g(){for(var a in this._)return!1;return!0}function p(){this._=Object.create(null)}function t(a){return a}function u(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function w(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=Qd.length;c<d;++c){var e=Qd[c]+b;if(e in a)return e}}function F(){}function U(){}function M(a){function b(){for(var b=c,d=-1,h=b.length,n;++d<h;)(n=b[d].on)&&n.apply(this,arguments);return a}var c=[],d=new P;b.on=
function(b,f){var h=d.get(b),n;if(2>arguments.length)return h&&h.on;h&&(h.on=null,c=c.slice(0,n=c.indexOf(h)).concat(c.slice(n+1)),d.remove(b));f&&c.push(d.set(b,{on:f}));return a};return b}function Na(){l.event.preventDefault()}function Fc(){for(var a=l.event,b;b=a.sourceEvent;)a=b;return a}function Gc(a){for(var b=new U,c=0,d=arguments.length;++c<d;)b[arguments[c]]=M(b);b.of=function(c,d){return function(h){try{var n=h.sourceEvent=l.event;h.target=a;l.event=h;b[h.type].apply(c,d)}finally{l.event=
n}}};return b}function wa(a){Eb(a,R);return a}function O(a){return"function"===typeof a?a:function(){return Hc(a,this)}}function Rd(a){return"function"===typeof a?a:function(){return Ic(a,this)}}function Sd(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function n(){var c=
b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=l.ns.qualify(a);return null==b?a.local?d:c:"function"===typeof b?a.local?n:h:a.local?f:e}function Td(a){return a.trim().replace(/\s+/g," ")}function Ud(a){return new RegExp("(?:^|\\s+)"+l.requote(a)+"(?:\\s+|$)","g")}function Vd(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=(a+"").trim().split(/^|\s+/).map(ug);
var e=a.length;return"function"===typeof b?d:c}function ug(a){var b=Ud(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",Td(e+" "+a))):c.setAttribute("class",Td(e.replace(b," ")))}}function Wd(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}
return null==b?d:"function"===typeof b?f:e}function Xd(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?e:d}function Yd(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c?b.createElementNS(c,a):b.createElement(a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"===typeof a?a:(a=l.ns.qualify(a)).local?c:b}function vg(){var a=
this.parentNode;a&&a.removeChild(this)}function Zd(a){return function(){return Fb(this,a)}}function wg(a){arguments.length||(a=G);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function Fa(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,h=e.length,n;f<h;f++)(n=e[f])&&b(n,f,c);return a}function $d(a){Eb(a,Ga);return a}function xg(a){var b,c;return function(d,e,f){d=a[f].update;var h=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<h;);return e}}function ae(a,b,c){function d(){var b=
this[h];b&&(this.removeEventListener(a,b,b.$),delete this[h])}function e(){var e=r(b,Oa(arguments));d.call(this);this.addEventListener(a,this[h]=e,e.$=c);e._=b}function f(){var b=new RegExp("^__on([^.]+)"+l.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var h="__on"+a,n=a.indexOf("."),r=ce;0<n&&(a=a.slice(0,n));var q=Jc.get(a);q&&(a=q,r=yg);return n?b?e:d:b?F:f}function ce(a,b){return function(c){var d=l.event;l.event=c;b[0]=this.__data__;
try{a.apply(this,b)}finally{l.event=d}}}function yg(a,b){var c=ce(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function Gb(a){var b=".dragsuppress-"+ ++zg,c="click"+b,d=l.select(J(a)).on("touchmove"+b,Na).on("dragstart"+b,Na).on("selectstart"+b,Na);null==Wa&&(Wa="onselectstart"in a?!1:w(a.style,"userSelect"));if(Wa){var e=(a&&(a.ownerDocument||a.document||a).documentElement).style,f=e[Wa];e[Wa]="none"}return function(a){d.on(b,null);
Wa&&(e[Wa]=f);if(a){var n=function(){d.on(c,null)};d.on(c,function(){Na();n()},!0);setTimeout(n,0)}}}function Kc(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Lc&&(c=J(a),c.scrollX||c.scrollY)){var c=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();Lc=!(e.f||e.e);c.remove()}Lc?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);
d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}d=a.getBoundingClientRect();return[b.clientX-d.left-a.clientLeft,b.clientY-d.top-a.clientTop]}function Ag(){return l.event.changedTouches[0].identifier}function Mc(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function de(a){return 1<a?0:-1>a?L:Math.acos(a)}function Pa(a){return 1<a?Z:-1>a?-Z:Math.asin(a)}function ee(a){return((a=Math.exp(a))+1/a)/2}function fe(a){return(a=Math.sin(a/2))*a}function Xa(){}function Ba(a,
b,c){return this instanceof Ba?void(this.h=+a,this.s=+b,this.l=+c):2>arguments.length?a instanceof Ba?new Ba(a.h,a.s,a.l):ge(""+a,he,Ba):new Ba(a,b,c)}function Nc(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return new ia(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function xa(a,b,c){return this instanceof
xa?void(this.h=+a,this.c=+b,this.l=+c):2>arguments.length?a instanceof xa?new xa(a.h,a.c,a.l):a instanceof ya?ie(a.l,a.a,a.b):ie((a=je((a=l.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new xa(a,b,c)}function Oc(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new ya(c,Math.cos(a*=I)*b,Math.sin(a)*b)}function ya(a,b,c){return this instanceof ya?void(this.l=+a,this.a=+b,this.b=+c):2>arguments.length?a instanceof ya?new ya(a.l,a.a,a.b):a instanceof xa?Oc(a.h,a.c,a.l):je((a=ia(a)).r,a.g,a.b):new ya(a,b,c)}function ke(a,
b,c){a=(a+16)/116;c=a-c/200;b=Pc(a+b/500)*le;a=Pc(a)*me;c=Pc(c)*ne;return new ia(Qc(3.2404542*b-1.5371385*a-.4985314*c),Qc(-.969266*b+1.8760108*a+.041556*c),Qc(.0556434*b-.2040259*a+1.0572252*c))}function ie(a,b,c){return 0<a?new xa(Math.atan2(c,b)*X,Math.sqrt(b*b+c*c),a):new xa(NaN,NaN,a)}function Pc(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Rc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Qc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ia(a,
b,c){return this instanceof ia?void(this.r=~~a,this.g=~~b,this.b=~~c):2>arguments.length?a instanceof ia?new ia(a.r,a.g,a.b):ge(""+a,ia,Nc):new ia(a,b,c)}function Hb(a){return new ia(a>>16,a>>8&255,a&255)+""}function fb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ge(a,b,c){var d=0,e=0,f=0,h,n;if(h=/([a-z]+)\((.*)\)/i.exec(a))switch(n=h[2].split(","),h[1]){case "hsl":return c(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100);case "rgb":return b(Sc(n[0]),
Sc(n[1]),Sc(n[2]))}if(c=Ib.get(a.toLowerCase()))return b(c.r,c.g,c.b);null==a||"#"!==a.charAt(0)||isNaN(c=parseInt(a.slice(1),16))||(4===a.length?(d=(c&3840)>>4,d|=d>>4,e=c&240,e|=e>>4,f=c&15,f|=f<<4):7===a.length&&(d=(c&16711680)>>16,e=(c&65280)>>8,f=c&255));return b(d,e,f)}function he(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,h=(e+d)/2;f?(d=.5>h?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=0<h&&1>h?0:a);return new Ba(a,d,h)}function je(a,
b,c){a=Tc(a);b=Tc(b);c=Tc(c);var d=Rc((.4124564*a+.3575761*b+.1804375*c)/le),e=Rc((.2126729*a+.7151522*b+.072175*c)/me);a=Rc((.0193339*a+.119192*b+.9503041*c)/ne);return ya(116*e-16,500*(d-e),200*(e-a))}function Tc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Sc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function V(a){return"function"===typeof a?a:function(){return a}}function Uc(a){return function(b,c,d){2===arguments.length&&"function"===
typeof c&&(d=c,c=null);return Jb(b,c,a,d)}}function Jb(a,b,c,d){function e(){var a=r.status,b,d;if(d=!a)d=(d=r.responseType)&&"text"!==d?r.response:r.responseText;if(d||200<=a&&300>a||304===a){try{b=c.call(f,r)}catch(e){h.error.call(f,e);return}h.load.call(f,b)}else h.error.call(f,r)}var f={},h=l.dispatch("beforesend","progress","load","error"),n={},r=new XMLHttpRequest,q=null;!this.XDomainRequest||"withCredentials"in r||!/^(http(s)?:)?\/\//.test(a)||(r=new XDomainRequest);"onload"in r?r.onload=r.onerror=
e:r.onreadystatechange=function(){3<r.readyState&&e()};r.onprogress=function(a){var b=l.event;l.event=a;try{h.progress.call(f,r)}finally{l.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return n[a];null==b?delete n[a]:n[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return q;q=a;return f};f.response=function(a){c=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,
[a].concat(Oa(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);r.open(c,a,!0);null==b||"accept"in n||(n.accept=b+",*/*");if(r.setRequestHeader)for(var g in n)r.setRequestHeader(g,n[g]);null!=b&&r.overrideMimeType&&r.overrideMimeType(b);null!=q&&(r.responseType=q);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});h.beforesend.call(f,r);r.send(null==d?null:d);return f};f.abort=function(){r.abort();return f};l.rebind(f,h,"on");return null==d?
f:f.get(Bg(d))}function Bg(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Vc(){var a=oe(),a=pe()-a;24<a?(isFinite(a)&&(clearTimeout(Kb),Kb=setTimeout(Vc,a)),Lb=0):(Lb=1,qe(Vc))}function oe(){var a=Date.now();for(Ha=Mb;Ha;)a>=Ha.t&&(Ha.f=Ha.c(a-Ha.t)),Ha=Ha.n;return a}function pe(){for(var a,b=Mb,c=Infinity;b;)b.f?b=a?a.n=b.n:Mb=b.n:(b.t<c&&(c=b.t),b=(a=b).n);Nb=a;return c}function Wc(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Cg(a){var b=a.decimal,c=a.thousands,
d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],v=0,x=d[0],K=0;0<e&&0<x;){K+x+1>b&&(x=Math.max(1,b-K));f.push(a.substring(e-=x,e+x));if((K+=x+1)>b)break;x=d[v=(v+1)%d.length]}return f.reverse().join(c)}:t;return function(a){a=re.exec(a);var c=a[1]||" ",d=a[2]||">",q=a[3]||"-",v=a[4]||"",x=a[5],K=+a[6],g=a[7],ja=a[8],E=a[9],k=1,y="",m="",A=!1,D=!0;ja&&(ja=+ja.substring(1));if(x||"0"===c&&"="===d)x=c="0",d="=";switch(E){case "n":g=!0;E="g";break;case "%":k=100;m="%";E="f";break;
case "p":k=100;m="%";E="r";break;case "b":case "o":case "x":case "X":"#"===v&&(y="0"+E.toLowerCase());case "c":D=!1;case "d":A=!0;ja=0;break;case "s":k=-1,E="r"}"$"===v&&(y=e[0],m=e[1]);"r"!=E||ja||(E="g");if(null!=ja)if("g"==E)ja=Math.max(1,Math.min(21,ja));else if("e"==E||"f"==E)ja=Math.max(0,Math.min(20,ja));var E=Dg.get(E)||Eg,p=x&&g;return function(a){var e=m;if(A&&a%1)return"";var h=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===q?"":q;0>k?(e=l.formatPrefix(a,ja),a=e.scale(a),e=e.symbol+m):a*=k;a=E(a,ja);
var v=a.lastIndexOf("."),t;0>v?(v=D?a.lastIndexOf("e"):-1,0>v?(t=a,a=""):(t=a.substring(0,v),a=a.substring(v))):(t=a.substring(0,v),a=b+a.substring(v+1));!x&&g&&(t=f(t,Infinity));var v=y.length+t.length+a.length+(p?0:h.length),u=v<K?Array(v=K-v+1).join(c):"";p&&(t=f(u+t,u.length?K-a.length:Infinity));h+=y;a=t+a;return("<"===d?h+a+u:">"===d?u+h+a:"^"===d?u.substring(0,v>>=1)+h+a+u.substring(v):h+(p?a:u+a))+e}}}function Eg(a){return a+""}function Ia(){this._=new Date(1<arguments.length?Date.UTC.apply(this,
arguments):arguments[0])}function Ya(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){b(c=a(new ga(c-1)),1);return c}function f(a,c){b(a=new ga(+a),c);return a}function h(a,d,f){a=e(a);var n=[];if(1<f)for(;a<d;)c(a)%f||n.push(new Date(+a)),b(a,1);else for(;a<d;)n.push(new Date(+a)),b(a,1);return n}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=h;var n=a.utc=Pb(a);n.floor=n;n.round=Pb(d);n.ceil=Pb(e);n.offset=Pb(f);n.range=function(a,b,c){try{ga=Ia;var d=new Ia;d._=a;return h(d,
b,c)}finally{ga=Date}};return a}function Pb(a){return function(b,c){try{ga=Ia;var d=new Ia;d._=b;return a(d,c)._}finally{ga=Date}}}function Fg(a){function b(a){function b(c){for(var e=[],f=-1,n=0,h,r;++f<d;)if(37===a.charCodeAt(f)){e.push(a.slice(n,f));null!=(h=se[n=a.charAt(++f)])&&(n=a.charAt(++f));if(r=D[n])n=r(c,null==h?"e"===n?" ":"0":h);e.push(n);n=f+1}e.push(a.slice(n,f));return e.join("")}var d=a.length;b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;
"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&ga!==Ia;var e=new (b?Ia:ga);"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return b?e._:e};b.toString=function(){return a};return b}function c(a,b,c,d){for(var e,f=0,n=b.length,h=c.length;f<n;){if(d>=h)return-1;e=b.charCodeAt(f++);if(37===e){if(e=b.charAt(f++),
e=p[e in se?b.charAt(f++):e],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var d=a.dateTime,e=a.date,f=a.time,h=a.periods,n=a.days,r=a.shortDays,q=a.months,v=a.shortMonths;b.utc=function(a){function c(a){try{ga=Ia;var b=new ga;b._=a;return d(b)}finally{ga=Date}}var d=b(a);c.parse=function(a){try{ga=Ia;var b=d.parse(a);return b&&b._}finally{ga=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=Gg;var x=l.map(),K=Qb(n),g=Rb(n),k=Qb(r),E=Rb(r),Q=Qb(q),y=Rb(q),m=Qb(v),
A=Rb(v);h.forEach(function(a,b){x.set(a.toLowerCase(),b)});var D={a:function(a){return r[a.getDay()]},A:function(a){return n[a.getDay()]},b:function(a){return v[a.getMonth()]},B:function(a){return q[a.getMonth()]},c:b(d),d:function(a,b){return ka(a.getDate(),b,2)},e:function(a,b){return ka(a.getDate(),b,2)},H:function(a,b){return ka(a.getHours(),b,2)},I:function(a,b){return ka(a.getHours()%12||12,b,2)},j:function(a,b){return ka(1+B.dayOfYear(a),b,3)},L:function(a,b){return ka(a.getMilliseconds(),
b,3)},m:function(a,b){return ka(a.getMonth()+1,b,2)},M:function(a,b){return ka(a.getMinutes(),b,2)},p:function(a){return h[+(12<=a.getHours())]},S:function(a,b){return ka(a.getSeconds(),b,2)},U:function(a,b){return ka(B.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return ka(B.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return ka(a.getFullYear()%100,b,2)},Y:function(a,b){return ka(a.getFullYear()%1E4,b,4)},Z:Hg,"%":function(){return"%"}},p={a:function(a,b,c){k.lastIndex=
0;return(b=k.exec(b.slice(c)))?(a.w=E.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c)))?(a.w=g.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){m.lastIndex=0;return(b=m.exec(b.slice(c)))?(a.m=A.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){Q.lastIndex=0;return(b=Q.exec(b.slice(c)))?(a.m=y.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,D.c.toString(),b,d)},d:te,e:te,H:ue,I:ue,j:Ig,L:Jg,m:Kg,M:Lg,
p:function(a,b,c){b=x.get(b.slice(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Mg,U:Ng,w:Og,W:Pg,x:function(a,b,d){return c(a,D.x.toString(),b,d)},X:function(a,b,d){return c(a,D.X.toString(),b,d)},y:Qg,Y:Rg,Z:Sg,"%":Tg};return b}function ka(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function Qb(a){return new RegExp("^(?:"+a.map(l.requote).join("|")+")","i")}function Rb(a){for(var b=new P,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);
return b}function Og(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function Ng(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c)))?(a.U=+b[0],c+b[0].length):-1}function Pg(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):-1}function Rg(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function Qg(a,b,c){ba.lastIndex=0;if(b=ba.exec(b.slice(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=
-1;return a}function Sg(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function Kg(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function te(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Ig(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function ue(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Lg(a,b,c){ba.lastIndex=
0;return(b=ba.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Mg(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Jg(a,b,c){ba.lastIndex=0;return(b=ba.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Hg(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=H(b)/60|0,b=H(b)%60;return a+ka(c,"0",2)+ka(b,"0",2)}function Tg(a,b,c){ve.lastIndex=0;return(a=ve.exec(b.slice(c,c+1)))?c+a[0].length:-1}function Gg(a){for(var b=a.length,c=-1;++c<
b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,f=a[c];!f[1](b);)f=a[++c];return f[0](b)}}function Xc(){}function we(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Sb(a,b){if(a&&xe.hasOwnProperty(a.type))xe[a.type](a,b)}function Yc(a,b,c){var d=-1;c=a.length-c;var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function ye(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Yc(a[c],b,1);b.polygonEnd()}function Ug(){function a(a,b){a*=I;b=b*I/2+L/4;var c=a-d,q=
0<=c?1:-1,v=q*c,c=Math.cos(b),x=Math.sin(b),K=f*x,g=e*c+K*Math.cos(v),q=K*q*Math.sin(v);Za.add(Math.atan2(q,g));d=a;e=c;f=x}var b,c,d,e,f;oa.point=function(h,n){oa.point=a;d=(b=h)*I;e=Math.cos(n=(c=n)*I/2+L/4);f=Math.sin(n)};oa.lineEnd=function(){a(b,c)}}function $a(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function Tb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function gb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Zc(a,
b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Wb(a){return[Math.atan2(a[1],a[0]),Pa(a[2])]}function Xb(a,b){return 1E-6>H(a[0]-b[0])&&1E-6>H(a[1]-b[1])}function $c(a,b){a*=I;var c=Math.cos(b*=I);rb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function rb(a,b,c){++sb;Ja+=(a-Ja)/sb;Ka+=(b-Ka)/sb;Ca+=(c-Ca)/sb}function ze(){function a(a,f){a*=I;var h=Math.cos(f*=I),n=h*Math.cos(a),
h=h*Math.sin(a),r=Math.sin(f),q=Math.atan2(Math.sqrt((q=c*r-d*h)*q+(q=d*n-b*r)*q+(q=b*h-c*n)*q),b*n+c*h+d*r);hb+=q;ta+=q*(b+(b=n));ua+=q*(c+(c=h));ma+=q*(d+(d=r));rb(b,c,d)}var b,c,d;za.point=function(e,f){e*=I;var h=Math.cos(f*=I);b=h*Math.cos(e);c=h*Math.sin(e);d=Math.sin(f);za.point=a;rb(b,c,d)}}function Ae(){za.point=$c}function Vg(){function a(a,b){a*=I;var c=Math.cos(b*=I),q=c*Math.cos(a),c=c*Math.sin(a),v=Math.sin(b),x=e*v-f*c,K=f*q-d*v,g=d*c-e*q,l=Math.sqrt(x*x+K*K+g*g),E=d*q+e*c+f*v,k=l&&
-de(E)/l,l=Math.atan2(l,E);Qa+=k*x;Ra+=k*K;Da+=k*g;hb+=l;ta+=l*(d+(d=q));ua+=l*(e+(e=c));ma+=l*(f+(f=v));rb(d,e,f)}var b,c,d,e,f;za.point=function(h,n){b=h;c=n;za.point=a;h*=I;var r=Math.cos(n*=I);d=r*Math.cos(h);e=r*Math.sin(h);f=Math.sin(n);rb(d,e,f)};za.lineEnd=function(){a(b,c);za.lineEnd=Ae;za.point=$c}}function Be(a,b){function c(c,e){return c=a(c,e),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,e){return c=b.invert(c,e),c&&a.invert(c[0],c[1])});return c}function ib(){return!0}function Ce(a,
b,c,d,e){var f=[],h=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Xb(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],c[1]);e.lineEnd()}else b=new Yb(c,a,null,!0),c=new Yb(c,null,b,!1),b.o=c,f.push(b),h.push(c),b=new Yb(d,a,null,!1),c=new Yb(d,null,b,!0),b.o=c,f.push(b),h.push(c)}});h.sort(b);De(f);De(h);if(f.length){a=0;b=c;for(c=h.length;a<c;++a)h[a].e=b=!b;b=f[0];for(var n,r;;){for(var q=b,v=!0;q.v;)if((q=q.n)===b)return;n=q.z;e.lineStart();do{q.v=q.o.v=!0;if(q.e){if(v)for(a=
0,c=n.length;a<c;++a)e.point((r=n[a])[0],r[1]);else d(q.x,q.n.x,1,e);q=q.n}else{if(v)for(n=q.p.z,a=n.length-1;0<=a;--a)e.point((r=n[a])[0],r[1]);else d(q.x,q.p.x,-1,e);q=q.p}q=q.o;n=q.z;v=!v}while(!q.v);e.lineEnd()}}}function De(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Yb(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function Ee(a,b,c,d){return function(e,f){function h(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,
c)}function n(a,b){var c=e(a,b);g.point(c[0],c[1])}function r(){E.point=n;g.lineStart()}function q(){E.point=h;g.lineEnd()}function v(a,b){p.push([a,b]);var c=e(a,b);N.point(c[0],c[1])}function x(){N.lineStart();p=[]}function K(){v(p[0][0],p[0][1]);N.lineEnd();var a=N.clean(),b=y.buffer(),c=b.length;p.pop();D.push(p);p=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;if(0<c){A||(f.polygonStart(),A=!0);for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);f.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),
m.push(b.filter(Wg))}var g=b(f),k=e.invert(d[0],d[1]),E={point:h,lineStart:r,lineEnd:q,polygonStart:function(){E.point=v;E.lineStart=x;E.lineEnd=K;m=[];D=[]},polygonEnd:function(){E.point=h;E.lineStart=r;E.lineEnd=q;m=l.merge(m);var a,b=k;a=D;var d=b[0],e=b[1],n=[Math.sin(d),-Math.cos(d),0],v=0,x=0;Za.reset();for(var K=0,g=a.length;K<g;++K){var y=a[K],be=y.length;if(be)for(var p=y[0],N=p[0],b=p[1]/2+L/4,t=Math.sin(b),u=Math.cos(b),Ob=1;;){Ob===be&&(Ob=0);var b=y[Ob],w=b[0],F=b[1]/2+L/4,B=Math.sin(F),
F=Math.cos(F),z=w-N,O=0<=z?1:-1,M=O*z,U=M>L,t=t*B;Za.add(Math.atan2(t*O*Math.sin(M),u*F+t*Math.cos(M)));v+=U?z+O*pa:z;U^N>=d^w>=d&&(p=gb($a(p),$a(b)),Vb(p),N=gb(n,p),Vb(N),N=(U^0<=z?-1:1)*Pa(N[2]),e>N||e===N&&(p[0]||p[1]))&&(x+=U^0<=z?1:-1);if(!Ob++)break;N=w;t=B;u=F;p=b}}a=(-1E-6>v||1E-6>v&&0>Za)^x&1;m.length?(A||(f.polygonStart(),A=!0),Ce(m,Xg,a,c,f)):a&&(A||(f.polygonStart(),A=!0),f.lineStart(),c(null,null,1,f),f.lineEnd());A&&(f.polygonEnd(),A=!1);m=D=null},sphere:function(){f.polygonStart();
f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},m,y=Fe(),N=b(y),A=!1,D,p;return E}}function Wg(a){return 1<a.length}function Fe(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,d){b.push([a,d])},lineEnd:F,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Xg(a,b){return(0>(a=a.x)[0]?a[1]-Z-1E-6:Z-a[1])-(0>(b=b.x)[0]?b[1]-Z-1E-6:Z-b[1])}function Yg(a){function b(a,b){return Math.cos(a)*Math.cos(b)>
e}function c(a,b,c){var d=$a(a),f=$a(b),n=[1,0,0],f=gb(d,f),h=Tb(f,f),d=f[0],g=h-d*d;if(!g)return!c&&a;h=e*h/g;g=-e*d/g;d=gb(n,f);n=Ub(n,h);f=Ub(f,g);Zc(n,f);f=Tb(n,d);h=Tb(d,d);g=f*f-h*(Tb(n,n)-1);if(!(0>g)){var l=Math.sqrt(g),g=Ub(d,(-f-l)/h);Zc(g,n);g=Wb(g);if(!c)return g;c=a[0];var k=b[0];a=a[1];b=b[1];var m;k<c&&(m=c,c=k,k=m);var A=k-c,p=1E-6>H(A-L);!p&&b<a&&(m=a,a=b,b=m);if(p||1E-6>A?p?0<a+b^g[1]<(1E-6>H(g[0]-c)?a:b):a<=g[1]&&g[1]<=b:A>L^(c<=g[0]&&g[0]<=k))return b=Ub(d,(-f+l)/h),Zc(b,n),[g,
Wb(b)]}}function d(b,c){var d=f?a:L-a,e=0;b<-d?e|=1:b>d&&(e|=2);c<-d?e|=4:c>d&&(e|=8);return e}var e=Math.cos(a),f=0<e,h=1E-6<H(e),n=ad(a,6*I);return Ee(b,function(a){var e,n,x,K,g;return{lineStart:function(){K=x=!1;g=1},point:function(l,k){var m=[l,k],y,p=b(l,k),A=f?p?0:d(l,k):p?d(l+(0>l?L:-L),k):0;!e&&(K=x=p)&&a.lineStart();p!==x&&(y=c(e,m),Xb(e,y)||Xb(m,y))&&(m[0]+=1E-6,m[1]+=1E-6,p=b(m[0],m[1]));if(p!==x)g=0,p?(a.lineStart(),y=c(m,e),a.point(y[0],y[1])):(y=c(e,m),a.point(y[0],y[1]),a.lineEnd()),
e=y;else if(h&&e&&f^p){var D;A&n||!(D=c(m,e,!0))||(g=0,f?(a.lineStart(),a.point(D[0][0],D[0][1]),a.point(D[1][0],D[1][1]),a.lineEnd()):(a.point(D[1][0],D[1][1]),a.lineEnd(),a.lineStart(),a.point(D[0][0],D[0][1])))}!p||e&&Xb(e,m)||a.point(m[0],m[1]);e=m;x=p;n=A},lineEnd:function(){x&&a.lineEnd();e=null},clean:function(){return g|(K&&x)<<1}}},n,f?[0,-a]:[-L,a-L])}function Ge(a,b,c,d){return function(e){var f=e.a,h=e.b,n=f.x,f=f.y,r=0,q=1,v=h.x-n,h=h.y-f,x;x=a-n;if(v||!(0<x)){x/=v;if(0>v){if(x<r)return;
x<q&&(q=x)}else if(0<v){if(x>q)return;x>r&&(r=x)}x=c-n;if(v||!(0>x)){x/=v;if(0>v){if(x>q)return;x>r&&(r=x)}else if(0<v){if(x<r)return;x<q&&(q=x)}x=b-f;if(h||!(0<x)){x/=h;if(0>h){if(x<r)return;x<q&&(q=x)}else if(0<h){if(x>q)return;x>r&&(r=x)}x=d-f;if(h||!(0>x)){x/=h;if(0>h){if(x>q)return;x>r&&(r=x)}else if(0<h){if(x<r)return;x<q&&(q=x)}0<r&&(e.a={x:n+r*v,y:f+r*h});1>q&&(e.b={x:n+q*v,y:f+q*h});return e}}}}}}function He(a,b,c,d){function e(d,e){return 1E-6>H(d[0]-a)?0<e?0:3:1E-6>H(d[0]-c)?0<e?2:1:1E-6>
H(d[1]-b)?0<e?1:0:0<e?3:2}function f(a,b){return h(a.x,b.x)}function h(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(n){function r(f,n,r,q){var v=0,x=0;if(null==f||(v=e(f,r))!==(x=e(n,r))||0>h(f,n)^0<r){do q.point(0===v||3===v?a:c,1<v?d:b);while((v=(v+r+4)%4)!==x)}else q.point(n[0],n[1])}function q(e,f){a<=e&&e<=c&&b<=f&&f<=d&&n.point(e,f)}function v(e,f){e=Math.max(-1E9,Math.min(1E9,e));f=Math.max(-1E9,Math.min(1E9,f));var h=
a<=e&&e<=c&&b<=f&&f<=d;m&&Q.push([e,f]);if(fa)p=e,A=f,D=h,fa=!1,h&&(n.lineStart(),n.point(e,f));else if(h&&u)n.point(e,f);else{var r={a:{x:t,y:T},b:{x:e,y:f}};g(r)?(u||(n.lineStart(),n.point(r.a.x,r.a.y)),n.point(r.b.x,r.b.y),h||n.lineEnd(),aa=!1):h&&(n.lineStart(),n.point(e,f),aa=!1)}t=e;T=f;u=h}var x=n,K=Fe(),g=Ge(a,b,c,d),k,m,Q,y={point:q,lineStart:function(){y.point=v;m&&m.push(Q=[]);fa=!0;u=!1;t=T=NaN},lineEnd:function(){k&&(v(p,A),D&&u&&K.rejoin(),k.push(K.buffer()));y.point=q;u&&n.lineEnd()},
polygonStart:function(){n=K;k=[];m=[];aa=!0},polygonEnd:function(){n=x;k=l.merge(k);var b;b=[a,d];for(var c=0,e=m.length,h=b[1],q=0;q<e;++q)for(var v=1,K=m[q],g=K.length,y=K[0],A;v<g;++v)A=K[v],y[1]<=h?A[1]>h&&0<Mc(y,A,b)&&++c:A[1]<=h&&0>Mc(y,A,b)&&--c,y=A;b=0!==c;c=aa&&b;e=k.length;if(c||e)n.polygonStart(),c&&(n.lineStart(),r(null,null,1,n),n.lineEnd()),e&&Ce(k,f,b,r,n),n.polygonEnd();k=m=Q=null}},p,A,D,t,T,u,fa,aa;return y}}function bd(a){var b=0,c=L/3,d=cd(a);a=d(b,c);a.parallels=function(a){return arguments.length?
d(b=a[0]*L/180,c=a[1]*L/180):[b/L*180,c/L*180]};return a}function Ie(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),h-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),h=Math.sqrt(f)/e;c.invert=function(a,b){var c=h-b;return[Math.atan2(a,c)/e,Pa((f-(a*a+c*c)*e*e)/(2*e))]};return c}function Zg(){function a(a,b){Zb+=e*a-d*b;d=a;e=b}var b,c,d,e;Sa.point=function(f,h){Sa.point=a;b=d=f;c=e=h};Sa.lineEnd=function(){a(b,c)}}function $g(){function a(a,b){h.push("M",
a,",",b,f)}function b(a,b){h.push("M",a,",",b);n.point=c}function c(a,b){h.push("L",a,",",b)}function d(){n.point=a}function e(){h.push("Z")}var f=Je(4.5),h=[],n={point:a,lineStart:function(){n.point=b},lineEnd:d,polygonStart:function(){n.lineEnd=e},polygonEnd:function(){n.lineEnd=d;n.point=a},pointRadius:function(a){f=Je(a);return n},result:function(){if(h.length){var a=h.join("");h=[];return a}}};return n}function Je(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}
function ab(a,b){Ja+=a;Ka+=b;++Ca}function Ke(){function a(a,e){var f=a-b,h=e-c,f=Math.sqrt(f*f+h*h);ta+=f*(b+a)/2;ua+=f*(c+e)/2;ma+=f;ab(b=a,c=e)}var b,c;Aa.point=function(d,e){Aa.point=a;ab(b=d,c=e)}}function Le(){Aa.point=ab}function ah(){function a(a,b){var c=a-d,r=b-e,c=Math.sqrt(c*c+r*r);ta+=c*(d+a)/2;ua+=c*(e+b)/2;ma+=c;c=e*a-d*b;Qa+=c*(d+a);Ra+=c*(e+b);Da+=3*c;ab(d=a,e=b)}var b,c,d,e;Aa.point=function(f,h){Aa.point=a;ab(b=d=f,c=e=h)};Aa.lineEnd=function(){a(b,c)}}function bh(a){function b(b,
c){a.moveTo(b+h,c);a.arc(b,c,h,0,pa)}function c(b,c){a.moveTo(b,c);n.point=d}function d(b,c){a.lineTo(b,c)}function e(){n.point=b}function f(){a.closePath()}var h=4.5,n={point:b,lineStart:function(){n.point=c},lineEnd:e,polygonStart:function(){n.lineEnd=f},polygonEnd:function(){n.lineEnd=e;n.point=b},pointRadius:function(a){h=a;return n},result:F};return n}function Me(a){function b(a){return(n?d:c)(a)}function c(b){return Ne(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,
e){d=a(d,e);b.point(d[0],d[1])}function d(){u=NaN;na.point=f;b.lineStart()}function f(c,d){var h=$a([c,d]),q=a(c,d);e(u,fa,T,aa,w,F,u=q[0],fa=q[1],T=c,aa=h[0],w=h[1],F=h[2],n,b);b.point(u,fa)}function h(){na.point=c;b.lineEnd()}function g(){d();na.point=l;na.lineEnd=k}function l(a,b){f(m=a,b);y=u;p=fa;A=aa;D=w;t=F;na.point=f}function k(){e(u,fa,T,aa,w,F,y,p,m,A,D,t,n,b);na.lineEnd=h;h()}var m,y,p,A,D,t,T,u,fa,aa,w,F,na={point:c,lineStart:d,lineEnd:h,polygonStart:function(){b.polygonStart();na.lineStart=
g},polygonEnd:function(){b.polygonEnd();na.lineStart=d}};return na}function e(b,c,d,n,K,g,l,k,m,y,p,A,D,t){var T=l-b,u=k-c,fa=T*T+u*u;if(fa>4*f&&D--){var aa=n+y,w=K+p,F=g+A,na=Math.sqrt(aa*aa+w*w+F*F),B=Math.asin(F/=na),z=1E-6>H(H(F)-1)||1E-6>H(d-m)?(d+m)/2:Math.atan2(w,aa),O=a(z,B),B=O[0],O=O[1],M=B-b,U=O-c,L=u*M-T*U;if(L*L/fa>f||.3<H((T*M+u*U)/fa-.5)||n*y+K*p+g*A<h)e(b,c,d,n,K,g,B,O,z,aa/=na,w/=na,F,D,t),t.point(B,O),e(B,O,z,aa,w,F,l,k,m,y,p,A,D,t)}}var f=.5,h=Math.cos(30*I),n=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);
n=0<(f=a*a)&&16;return b};return b}function ch(a){var b=Me(function(b,d){return a([b*X,d*X])});return function(a){return Oe(b(a))}}function Pe(a){this.stream=a}function Ne(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ta(a){return cd(function(){return a})()}function cd(a){function b(a){a=n(a[0]*I,a[1]*I);return[a[0]*q+y,N-a[1]*q]}function c(a){return(a=
n.invert((a[0]-y)/q,(N-a[1])/q))&&[a[0]*X,a[1]*X]}function d(){n=Be(h=dd(k,m,p),f);var a=f(K,g);y=v-a[0]*q;N=x+a[1]*q;return e()}function e(){Y&&(Y.valid=!1,Y=null);return b}var f,h,n,r=Me(function(a,b){a=f(a,b);return[a[0]*q+y,N-a[1]*q]}),q=150,v=480,x=250,K=0,g=0,k=0,m=0,p=0,y,N,A=Qe,D=t,u=null,T=null,Y;b.stream=function(a){Y&&(Y.valid=!1);Y=Oe(A(h,r(D(a))));Y.valid=!0;return Y};b.clipAngle=function(a){if(!arguments.length)return u;A=null==a?(u=a,Qe):Yg((u=+a)*I);return e()};b.clipExtent=function(a){if(!arguments.length)return T;
D=(T=a)?He(a[0][0],a[0][1],a[1][0],a[1][1]):t;return e()};b.scale=function(a){if(!arguments.length)return q;q=+a;return d()};b.translate=function(a){if(!arguments.length)return[v,x];v=+a[0];x=+a[1];return d()};b.center=function(a){if(!arguments.length)return[K*X,g*X];K=a[0]%360*I;g=a[1]%360*I;return d()};b.rotate=function(a){if(!arguments.length)return[k*X,m*X,p*X];k=a[0]%360*I;m=a[1]%360*I;p=2<a.length?a[2]%360*I:0;return d()};l.rebind(b,r,"precision");return function(){f=a.apply(this,arguments);
b.invert=f.invert&&c;return d()}}function Oe(a){return Ne(a,function(b,c){a.point(b*I,c*I)})}function tb(a,b){return[a,b]}function Re(a,b){return[a>L?a-pa:a<-L?a+pa:a,b]}function dd(a,b,c){return a?b||c?Be(Se(a),Te(b,c)):Se(a):b||c?Te(b,c):Re}function Ue(a){return function(b,c){return b+=a,[b>L?b-pa:b<-L?b+pa:b,c]}}function Se(a){var b=Ue(a);b.invert=Ue(-a);return b}function Te(a,b){function c(a,b){var c=Math.cos(b),v=Math.cos(a)*c,c=Math.sin(a)*c,x=Math.sin(b),K=x*d+v*e;return[Math.atan2(c*f-K*h,
v*d-x*e),Pa(K*f+c*h)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),h=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),v=Math.cos(a)*c,c=Math.sin(a)*c,x=Math.sin(b),K=x*f-c*h;return[Math.atan2(c*f+x*h,v*d+K*e),Pa(K*d-v*e)]};return c}function ad(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,h,n){var r=h*b;if(null!=e){if(e=Ve(c,e),f=Ve(c,f),0<h?e<f:e>f)e+=h*pa}else e=a+h*pa,f=a-.5*r;for(var q;0<h?e>f:e<f;e-=r)n.point((q=Wb([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],q[1])}}function Ve(a,b){var c=
$a(b);c[0]-=a;Vb(c);var d=de(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function We(a,b,c){var d=l.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Xe(a,b,c){var d=l.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function ed(a){return a.source}function fd(a){return a.target}function dh(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),h=Math.cos(d),n=Math.sin(d),r=e*Math.cos(a),q=e*Math.sin(a),v=h*Math.cos(c),
x=h*Math.sin(c),K=2*Math.asin(Math.sqrt(fe(d-b)+e*h*fe(c-a))),g=1/Math.sin(K);c=K?function(a){var b=Math.sin(a*=K)*g,c=Math.sin(K-a)*g;a=c*r+b*v;var d=c*q+b*x,b=c*f+b*n;return[Math.atan2(d,a)*X,Math.atan2(b,Math.sqrt(a*a+d*d))*X]}:function(){return[a*X,b*X]};c.distance=K;return c}function ub(a,b){function c(b,c){var f=Math.cos(b),h=Math.cos(c),f=a(f*h);return[f*h*Math.sin(b),f*Math.sin(c)]}c.invert=function(a,c){var f=Math.sqrt(a*a+c*c),h=b(f),n=Math.sin(h),h=Math.cos(h);return[Math.atan2(a*n,f*h),
Math.asin(f&&c*n/f)]};return c}function Ye(a,b){function c(a,b){0<f?b<-Z+1E-6&&(b=-Z+1E-6):b>Z-1E-6&&(b=Z-1E-6);var c=f/Math.pow(Math.tan(L/4+b/2),e);return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(L/4+b/2)/Math.tan(L/4+a/2)),f=d*Math.pow(Math.tan(L/4+a/2),e)/e;if(!e)return $b;c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-Z]};return c}function Ze(a,
b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(1E-6>H(e))return tb;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function $b(a,b){return[a,Math.log(Math.tan(L/4+b/2))]}function $e(a){var b=Ta(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=
d.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var n=e.apply(b,arguments);if(n===b){if(f=null==a){var r=L*c(),q=d();e([[q[0]-r,q[1]-r],[q[0]+r,q[1]+r]])}}else f&&(n=null);return n};return b.clipExtent(null)}function gd(a,b){return[Math.log(Math.tan(L/4+b/2)),-a]}function jb(a){return a[0]}function vb(a){return a[1]}function af(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=Mc(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function eh(a,
b){return a[0]-b[0]||a[1]-b[1]}function hd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function id(a,b,c,d){var e=a[0],f=c[0],h=b[0]-e,n=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(n*(a-c)-d*(e-f))/(d*h-n*b);return[e+f*h,a+f*b]}function bf(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function fh(){ac(this);this.edge=this.site=this.circle=null}function cf(a){var b=df.pop()||new fh;b.site=a;return b}function jd(a){kb(a);lb.remove(a);df.push(a);ac(a)}function ef(a,b){var c=
a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var h=a.P;if(!h)return-Infinity;var c=h.site,h=c.x,c=c.y,n=c-b;if(!n)return h;var r=h-d,q=1/f-1/n,v=r/n;return q?(-v+Math.sqrt(v*v-2*q*(r*r/(-2*n)-c+n/2+e-f/2)))/q+d:(d+h)/2}function ff(a){this.site=a;this.edges=[]}function gf(a,b){return b.angle-a.angle}function gh(){ac(this);this.x=this.y=this.arc=this.site=this.cy=null}function mb(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,h=d.x-c,n=d.y-f,d=e.x-c,e=e.y-f,r=2*(h*e-
n*d);if(!(-1E-12<=r)){var q=h*h+n*n,v=d*d+e*e,n=(e*q-n*v)/r,h=(h*v-d*q)/r,e=h+f,f=hf.pop()||new gh;f.arc=a;f.site=b;f.x=n+c;f.y=e+Math.sqrt(n*n+h*h);f.cy=e;a.circle=f;a=null;for(b=wb._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}wb.insert(a,f);a||(kd=f)}}}}function kb(a){var b=a.circle;b&&(b.P||(kd=b.N),wb.remove(b),hf.push(b),ac(b),a.circle=null)}function hh(a,b){var c=a.b;if(c)return!0;var d=a.a,c=b[0][0],e=b[1][0],f=b[0][1],h=b[1][1],n=a.l,
r=a.r,q=n.x,n=n.y,v=r.x,r=r.y,x=(q+v)/2,g;if(r===n){if(x<c||x>=e)return;if(q>v){if(!d)d={x:x,y:f};else if(d.y>=h)return;c={x:x,y:h}}else{if(!d)d={x:x,y:h};else if(d.y<f)return;c={x:x,y:f}}}else if(g=(q-v)/(r-n),x=(n+r)/2-g*x,-1>g||1<g)if(q>v){if(!d)d={x:(f-x)/g,y:f};else if(d.y>=h)return;c={x:(h-x)/g,y:h}}else{if(!d)d={x:(h-x)/g,y:h};else if(d.y<f)return;c={x:(f-x)/g,y:f}}else if(n<r){if(!d)d={x:c,y:g*c+x};else if(d.x>=e)return;c={x:e,y:g*e+x}}else{if(!d)d={x:e,y:g*e+x};else if(d.x<c)return;c={x:c,
y:g*c+x}}a.a=d;a.b=c;return!0}function jf(a,b){this.l=a;this.r=b;this.a=this.b=null}function xb(a,b,c,d){var e=new jf(a,b);nb.push(e);c&&bc(e,a,b,c);d&&bc(e,b,a,d);bb[a.i].edges.push(new cc(e,a,b));bb[b.i].edges.push(new cc(e,b,a));return e}function ih(a,b,c){a=new jf(a,null);a.a=b;a.b=c;nb.push(a);return a}function bc(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function cc(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-
d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ld(){this._=null}function ac(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function yb(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function zb(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function kf(a){for(;a.L;)a=a.L;return a}function md(a,b){var c=a.sort(jh).pop(),d,e,f;nb=[];bb=Array(a.length);lb=new ld;for(wb=new ld;;)if(f=kd,c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==
d||c.y!==e){bb[c.i]=new ff(c);d=c;for(var h=d.x,n=d.y,r=f=e=void 0,q=void 0,v=lb._;v;)if(r=ef(v,n)-h,1E-6<r)v=v.L;else{var x=v,q=n,g=x.N;g?q=ef(g,q):(x=x.site,q=x.y===q?x.x:Infinity);q=h-q;if(1E-6<q){if(!v.R){e=v;break}v=v.R}else{-1E-6<r?(e=v.P,f=v):-1E-6<q?(e=v,f=v.N):e=f=v;break}}h=cf(d);lb.insert(e,h);if(e||f)if(e===f)kb(e),f=cf(e.site),lb.insert(h,f),h.edge=f.edge=xb(e.site,h.site),mb(e),mb(f);else if(f){kb(e);kb(f);var n=e.site,v=n.x,q=n.y,x=d.x-v,g=d.y-q,r=f.site,l=r.x-v,k=r.y-q,m=2*(x*k-g*
l),p=x*x+g*g,y=l*l+k*k,v={x:(k*p-g*y)/m+v,y:(x*y-l*p)/m+q};bc(f.edge,n,r,v);h.edge=xb(n,d,null,v);f.edge=xb(d,r,null,v);mb(e);mb(f)}else h.edge=xb(e.site,h.site);d=c.x;e=c.y}c=a.pop()}else if(f){r=f.arc;f=r.circle;n=f.x;v=f.cy;f={x:n,y:v};x=r.P;q=r.N;h=[r];jd(r);for(r=x;r.circle&&1E-6>H(n-r.circle.x)&&1E-6>H(v-r.circle.cy);)x=r.P,h.unshift(r),jd(r),r=x;h.unshift(r);kb(r);for(x=q;x.circle&&1E-6>H(n-x.circle.x)&&1E-6>H(v-x.circle.cy);)q=x.N,h.push(x),jd(x),x=q;h.push(x);kb(x);n=h.length;v=void 0;for(v=
1;v<n;++v)x=h[v],r=h[v-1],bc(x.edge,r.site,x.site,f);r=h[0];x=h[n-1];x.edge=xb(r.site,x.site,null,f);mb(r);mb(x)}else break;if(b){c=nb;d=Ge(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(f=c[e],!hh(f,b)||!d(f)||1E-6>H(f.a.x-f.b.x)&&1E-6>H(f.a.y-f.b.y))f.a=f.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];f=b[1][1];v=bb;for(q=v.length;q--;)if((x=v[q])&&x.prepare())for(l=x.edges,k=l.length,g=0;g<k;)if(m=l[g].end(),n=m.x,r=m.y,p=l[++g%k].start(),h=p.x,p=p.y,1E-6<H(n-h)||1E-6<H(r-p))l.splice(g,
0,new cc(ih(x.site,m,1E-6>H(n-c)&&1E-6<f-r?{x:c,y:1E-6>H(h-c)?p:f}:1E-6>H(r-f)&&1E-6<d-n?{x:1E-6>H(p-f)?h:d,y:f}:1E-6>H(n-d)&&1E-6<r-e?{x:d,y:1E-6>H(h-d)?p:e}:1E-6>H(r-e)&&1E-6<n-c?{x:1E-6>H(p-e)?h:c,y:e}:null),x.site,null)),++k}c={cells:bb,edges:nb};lb=wb=nb=bb=null;return c}function jh(a,b){return b.y-a.y||b.x-a.x}function kh(a){return a.x}function lh(a){return a.y}function lf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ab(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var h=.5*(c+e),n=.5*(d+f);
b=b.nodes;b[0]&&Ab(a,b[0],c,d,h,n);b[1]&&Ab(a,b[1],h,d,e,n);b[2]&&Ab(a,b[2],c,n,h,f);b[3]&&Ab(a,b[3],h,n,e,f)}}function mh(a,b,c,d,e,f,h){var n=Infinity,r;(function v(a,g,l,k,m){if(!(g>f||l>h||k<d||m<e)){if(p=a.point){var p,y=b-a.x,t=c-a.y,y=y*y+t*t;y<n&&(y=Math.sqrt(n=y),d=b-y,e=c-y,f=b+y,h=c+y,r=p)}p=a.nodes;for(var y=.5*(g+k),t=.5*(l+m),A=(c>=t)<<1|b>=y,D=A+4;A<D;++A)if(a=p[A&3])switch(A&3){case 0:v(a,g,l,y,t);break;case 1:v(a,y,l,k,t);break;case 2:v(a,g,t,y,m);break;case 3:v(a,y,t,k,m)}}})(a,
d,e,f,h);return r}function nd(a,b){a=l.rgb(a);b=l.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,h=b.g-d,n=b.b-e;return function(a){return"#"+fb(Math.round(c+f*a))+fb(Math.round(d+h*a))+fb(Math.round(e+n*a))}}function mf(a,b){var c={},d={},e;for(e in a)e in b?c[e]=cb(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function La(a,b){a=+a;b=+b;return function(c){return a*(1-c)+b*c}}function nf(a,b){var c=od.lastIndex=pd.lastIndex=0,d,e,f,h=-1,n=[],r=[];
a+="";for(b+="";(d=od.exec(a))&&(e=pd.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),n[h]?n[h]+=f:n[++h]=f),(d=d[0])===(e=e[0])?n[h]?n[h]+=e:n[++h]=e:(n[++h]=null,r.push({i:h,x:La(d,e)})),c=pd.lastIndex;c<b.length&&(f=b.slice(c),n[h]?n[h]+=f:n[++h]=f);return 2>n.length?r[0]?(b=r[0].x,function(a){return b(a)+""}):function(){return b}:(b=r.length,function(a){for(var c=0,d;c<b;++c)n[(d=r[c]).i]=d.x(a);return n.join("")})}function cb(a,b){for(var c=l.interpolators.length,d;0<=--c&&!(d=l.interpolators[c](a,
b)););return d}function dc(a,b){var c=[],d=[],e=a.length,f=b.length,h=Math.min(a.length,b.length),n;for(n=0;n<h;++n)c.push(cb(a[n],b[n]));for(;n<e;++n)d[n]=a[n];for(;n<f;++n)d[n]=b[n];return function(a){for(n=0;n<h;++n)d[n]=c[n](a);return d}}function nh(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function of(a){return function(b){return 1-a(1-b)}}function pf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function oh(a){return a*a}function ph(a){return a*a*a}function qh(a){if(0>=a)return 0;
if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function rh(a){return 1-Math.cos(a*Z)}function sh(a){return Math.pow(2,10*(a-1))}function th(a){return 1-Math.sqrt(1-a*a)}function uh(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function qf(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function rf(a){var b=[a.a,a.b],c=[a.c,a.d],d=sf(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=
f*b[1];f=sf(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*X;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*X:0}function sf(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function tf(a,b){var c=[],d=[],e,f=l.transform(a),h=l.transform(b),n=f.translate,r=h.translate,q=f.rotate,v=h.rotate,g=f.skew,K=h.skew,f=f.scale,h=h.scale;n[0]!=r[0]||n[1]!=r[1]?(c.push("translate(",null,",",null,
")"),d.push({i:1,x:La(n[0],r[0])},{i:3,x:La(n[1],r[1])})):r[0]||r[1]?c.push("translate("+r+")"):c.push("");q!=v?(180<q-v?v+=360:180<v-q&&(q+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:La(q,v)})):v&&c.push(c.pop()+"rotate("+v+")");g!=K?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:La(g,K)}):K&&c.push(c.pop()+"skewX("+K+")");f[0]!=h[0]||f[1]!=h[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:La(f[0],h[0])},{i:e-2,x:La(f[1],h[1])})):1==h[0]&&1==h[1]||c.push(c.pop()+"scale("+
h+")");e=d.length;return function(a){for(var b=-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function vh(a,b){b=(b-=a=+a)||1/b;return function(c){return(c-a)/b}}function wh(a,b){b=(b-=a=+a)||1/b;return function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function xh(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=uf(b);for(var d=uf(d),e=c.pop(),f=d.pop(),h=null;e===f;)h=e,e=c.pop(),f=d.pop();c=h}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;
return d}function uf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function yh(a){a.fixed|=2}function zh(a){a.fixed&=-7}function Ah(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Bh(a){a.fixed&=-5}function vf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,h=f.length,n=-1,r;++n<h;)r=f[n],null!=r&&(vf(r,b,c),a.charge+=r.charge,d+=r.charge*r.cx,e+=r.charge*r.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=
a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Bb(a,b){l.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Ch;return a}function Cb(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)c.push(e[d])}function Ea(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(h=a.children)&&(f=h.length))for(var e=-1,f,h;++e<f;)c.push(h[e]);for(;null!=(a=d.pop());)b(a)}function Dh(a){return a.children}function Eh(a){return a.value}
function Fh(a,b){return b.value-a.value}function Ch(a){return l.merge(a.map(function(a){return(a.children||[]).map(function(c){return{source:a,target:c}})}))}function Gh(a){return a.x}function Hh(a){return a.y}function Ih(a,b,c){a.y0=b;a.y=c}function qd(a){return l.range(a.length)}function rd(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Jh(a){for(var b=1,c=0,d=a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function Kh(a){return a.reduce(Lh,0)}function Lh(a,
b){return a+b[1]}function Mh(a,b){return wf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function wf(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Nh(a){return[l.min(a),l.max(a)]}function Oh(a,b){return a.value-b.value}function sd(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function xf(a,b){a._pack_next=b;b._pack_prev=a}function yf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function zf(a){function b(a){d=
Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);h=Math.max(a.y+a.r,h)}if((c=a.children)&&(k=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,h=-Infinity,n,r,q,v,g,l,k;c.forEach(Ph);n=c[0];n.x=-n.r;n.y=0;b(n);if(1<k&&(r=c[1],r.x=r.r,r.y=0,b(r),2<k))for(q=c[2],Af(n,r,q),b(q),sd(n,q),n._pack_prev=q,sd(q,r),r=n._pack_next,v=3;v<k;v++){Af(n,r,q=c[v]);var m=0,p=1,Q=1;for(g=r._pack_next;g!==r;g=g._pack_next,p++)if(yf(g,q)){m=1;break}if(1==m)for(l=n._pack_prev;l!==g._pack_prev&&!yf(l,q);l=
l._pack_prev,Q++);m?(p<Q||p==Q&&r.r<n.r?xf(n,r=g):xf(n=l,r),v--):(sd(n,q),r=q,b(q))}n=(d+e)/2;r=(f+h)/2;for(v=g=0;v<k;v++)q=c[v],q.x-=n,q.y-=r,g=Math.max(g,q.r+Math.sqrt(q.x*q.x+q.y*q.y));a.r=g;c.forEach(Qh)}}function Ph(a){a._pack_next=a._pack_prev=a}function Qh(a){delete a._pack_next;delete a._pack_prev}function Bf(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var f=e.length;++a<f;)Bf(e[a],b,c,d)}}function Af(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var h=
b.r+c.r,n=e*e+f*f,h=h*h,d=d*d;b=.5+(d-h)/(2*n);h=Math.sqrt(Math.max(0,2*h*(d+n)-(d-=n)*d-h*h))/(2*n);c.x=a.x+b*e+h*f;c.y=a.y+b*f-h*e}else c.x=a.x+d,c.y=a.y}function Cf(a,b){return a.parent==b.parent?1:2}function td(a){var b=a.children;return b.length?b[0]:a.t}function ud(a){var b=a.children,c;return(c=b.length)?b[c-1]:a.t}function Rh(a){return 1+l.max(a,function(a){return a.y})}function Sh(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function Df(a){var b=a.children;return b&&b.length?
Df(b[0]):a}function Ef(a){var b=a.children,c;return b&&(c=b.length)?Ef(b[c-1]):a}function vd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ff(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function ob(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function ec(a){return a.rangeExtent?a.rangeExtent():ob(a.range())}function Th(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function fc(a,
b){var c=0,d=a.length-1,e=a[c],f=a[d],h;f<e&&(h=c,c=d,d=h,h=e,e=f,f=h);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function Gf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Uh}function Vh(a,b,c,d){var e=[],f=[],h=0,n=Math.min(a.length,b.length)-1;a[n]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++h<=n;)e.push(c(a[h-1],a[h])),f.push(d(b[h-1],b[h]));return function(b){var c=l.bisect(a,b,1,n)-1;return f[c](e[c](b))}}function Hf(a,b,c,d){function e(){var e=
2<Math.min(a.length,b.length)?Vh:Th,q=d?wh:vh;h=e(a,b,q,c);n=e(b,a,q,cb);return f}function f(a){return h(a)}var h,n;f.invert=function(a){return n(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(qf)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=
function(b){return l.range.apply(l,Ua(a,b))};f.tickFormat=function(b,c){return wd(a,b,c)};f.nice=function(b){fc(a,Gf(Ua(a,b)[2]));return e()};f.copy=function(){return Hf(a,b,c,d)};return e()}function xd(a,b){return l.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ua(a,b){null==b&&(b=10);var c=ob(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+.5*e;c[2]=e;return c}function wd(a,
b,c){a=Ua(a,b);if(c){b=re.exec(c);b.shift();if("s"===b[8]){var d=l.formatPrefix(Math.max(H(a[0]),H(a[1])));b[7]||(b[7]="."+gc(d.scale(a[2])));b[8]="f";c=l.format(b.join(""));return function(a){return c(d.scale(a))+d.symbol}}b[7]||(b[7]="."+Wh(b[8],a));c=b.join("")}else c=",."+gc(a[2])+"f";return l.format(c)}function gc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Wh(a,b){var c=gc(b[2]);return a in Xh?Math.abs(c-gc(Math.max(H(b[0]),H(b[1]))))+ +("e"!==a):c-2*("%"===a)}function If(a,b,c,
d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function h(b){return a(e(b))}h.invert=function(b){return f(a.invert(b))};h.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return h};h.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return h};h.nice=function(){var b=fc(d.map(e),c?Math:Yh);a.domain(b);d=b.map(f);return h};h.ticks=function(){var a=ob(d),
h=[],q=a[0],a=a[1],v=Math.floor(e(q)),g=Math.ceil(e(a)),l=b%1?2:b;if(isFinite(g-v)){if(c){for(;v<g;v++)for(var k=1;k<l;k++)h.push(f(v)*k);h.push(f(v))}else for(h.push(f(v));v++<g;)for(k=l-1;0<k;k--)h.push(f(v)*k);for(v=0;h[v]<q;v++);for(g=h.length;h[g-1]>a;g--);h=h.slice(v,g)}return h};h.tickFormat=function(a,b){if(!arguments.length)return Jf;2>arguments.length?b=Jf:"function"!==typeof b&&(b=l.format(b));var d=Math.max(.1,a/h.ticks().length),v=c?(g=1E-12,Math.ceil):(g=-1E-12,Math.floor),g;return function(a){return a/
f(v(e(a)+g))<=d?b(a):""}};h.copy=function(){return If(a.copy(),b,c,d)};return xd(h,a)}function Kf(a,b,c){function d(b){return a(e(b))}var e=hc(b),f=hc(1/b);d.invert=function(b){return f(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return l.range.apply(l,Ua(c,a))};d.tickFormat=function(a,b){return wd(c,a,b)};d.nice=function(a){return d.domain(fc(c,Gf(Ua(c,a)[2])))};d.exponent=function(h){if(!arguments.length)return b;
e=hc(b=h);f=hc(1/b);a.domain(c.map(e));return d};d.copy=function(){return Kf(a.copy(),b,c)};return xd(d,a)}function hc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Lf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return l.range(a.length).map(function(a){return b+c*a})}var e,f,h;c.domain=function(d){if(!arguments.length)return a;a=[];e=new P;for(var f=-1,h=d.length,v;++f<h;)e.has(v=d[f])||e.set(v,a.push(v));
return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return f;f=a;h=0;b={t:"range",a:arguments};return c};c.rangePoints=function(e,r){2>arguments.length&&(r=0);var q=e[0],v=e[1],v=2>a.length?(q=(q+v)/2,0):(v-q)/(a.length-1+r);f=d(q+v*r/2,v);h=0;b={t:"rangePoints",a:arguments};return c};c.rangeRoundPoints=function(e,r){2>arguments.length&&(r=0);var q=e[0],v=e[1],g=2>a.length?(q=v=Math.round((q+v)/2),0):(v-q)/(a.length-1+r)|0;f=d(q+Math.round(g*r/2+(v-q-(a.length-1+r)*g)/2),g);h=0;b=
{t:"rangeRoundPoints",a:arguments};return c};c.rangeBands=function(e,r,q){2>arguments.length&&(r=0);3>arguments.length&&(q=r);var v=e[1]<e[0],g=e[v-0],l=(e[1-v]-g)/(a.length-r+2*q);f=d(g+l*q,l);v&&f.reverse();h=l*(1-r);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,r,q){2>arguments.length&&(r=0);3>arguments.length&&(q=r);var v=e[1]<e[0],g=e[v-0],l=e[1-v],k=Math.floor((l-g)/(a.length-r+2*q));f=d(g+Math.round((l-g-(a.length-r)*k)/2),k);v&&f.reverse();h=Math.round(k*(1-r));b={t:"rangeRoundBands",
a:arguments};return c};c.rangeBand=function(){return h};c.rangeExtent=function(){return ob(b.a[0])};c.copy=function(){return Lf(a,b)};return c.domain(a)}function Mf(a,b){function c(){var c=0,h=b.length;for(e=[];++c<h;)e[c-1]=l.quantile(a,c/h);return d}function d(a){if(!isNaN(a=+a))return b[l.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;a=b.map(C).filter(z).sort(G);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return e};
d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return Mf(a,b)};return c()}function Nf(a,b,c){function d(b){return c[Math.max(0,Math.min(h,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);h=c.length-1;return d}var f,h;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);
b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return Nf(a,b,c)};return e()}function Of(a,b){function c(c){if(c<=c)return b[l.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return Of(a,b)};return c}function Pf(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};
b.ticks=function(b){return l.range.apply(l,Ua(a,b))};b.tickFormat=function(b,d){return wd(a,b,d)};b.copy=function(){return Pf(a)};return b}function Zh(){return 0}function $h(a){return a.innerRadius}function ai(a){return a.outerRadius}function Qf(a){return a.startAngle}function Rf(a){return a.endAngle}function bi(a){return a&&a.padAngle}function ic(a,b,c,d){return 0<(a-c)*b-(b-d)*a?0:1}function jc(a,b,c,d,e){var f=a[0]-b[0],h=a[1]-b[1];e=(e?d:-d)/Math.sqrt(f*f+h*h);var h=e*h,f=-e*f,n=a[0]+h,r=a[1]+
f,q=b[0]+h,v=b[1]+f;a=(n+q)/2;b=(r+v)/2;e=q-n;var g=v-r,l=e*e+g*g;d=c-d;var v=n*v-q*r,k=(0>g?-1:1)*Math.sqrt(d*d*l-v*v),n=(v*g-e*k)/l,r=(-v*e-g*k)/l,q=(v*g+e*k)/l;e=(-v*e+g*k)/l;g=n-a;l=r-b;a=q-a;b=e-b;g*g+l*l>a*a+b*b&&(n=q,r=e);return[[n-h,r-f],[n*c/d,r*c/d]]}function Sf(a){function b(b){function h(){v.push("M",f(a(g),n))}for(var v=[],g=[],l=-1,k=b.length,m,p=V(c),Q=V(d);++l<k;)e.call(this,m=b[l],l)?g.push([+p.call(this,m,l),+Q.call(this,m,l)]):g.length&&(h(),g=[]);g.length&&h();return v.length?
v.join(""):null}var c=jb,d=vb,e=ib,f=qa,h=f.key,n=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?f=a:(f=yd.get(a)||qa).key;return b};b.tension=function(a){if(!arguments.length)return n;n=a;return b};return b}function qa(a){return a.join("L")}function zd(a){for(var b=0,c=a.length,
d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Ad(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function kc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return qa(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],h=b[0],n=h,r=1;c&&(d+="Q"+(f[0]-2*h[0]/3)+","+(f[1]-2*h[1]/3)+","+f[0]+","+f[1],e=a[1],r=2);if(1<b.length)for(n=b[1],f=a[r],r++,d+="C"+(e[0]+h[0])+","+(e[1]+h[1])+","+
(f[0]-n[0])+","+(f[1]-n[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,r++)f=a[r],n=b[e],d+="S"+(f[0]-n[0])+","+(f[1]-n[1])+","+f[0]+","+f[1];c&&(c=a[r],d+="Q"+(f[0]+2*n[0]/3)+","+(f[1]+2*n[1]/3)+","+c[0]+","+c[1]);return d}function Bd(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],h=a[1],n=1,r=a.length;++n<r;)e=f,f=h,h=a[n],c.push([d*(h[0]-e[0]),d*(h[1]-e[1])]);return c}function Tf(a){if(3>a.length)return qa(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],h=[e,e,e,(d=a[1])[0]],n=[f,f,f,d[1]],e=[e,",",f,"L",va(Va,h),
",",va(Va,n)];for(a.push(a[c-1]);++b<=c;)d=a[b],h.shift(),h.push(d[0]),n.shift(),n.push(d[1]),Cd(e,h,n);a.pop();e.push("L",d);return e.join("")}function va(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Cd(a,b,c){a.push("C",va(Uf,b),",",va(Uf,c),",",va(Vf,b),",",va(Vf,c),",",va(Va,b),",",va(Va,c))}function Dd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Wf(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]-Z,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function Xf(a){function b(b){function r(){l.push("M",
n(a(m),g),v,q(a(k.reverse()),g),"Z")}for(var l=[],k=[],m=[],p=-1,t=b.length,A,D=V(c),u=V(e),T=c===d?function(){return w}:V(d),Y=e===f?function(){return aa}:V(f),w,aa;++p<t;)h.call(this,A=b[p],p)?(k.push([w=+D.call(this,A,p),aa=+u.call(this,A,p)]),m.push([+T.call(this,A,p),+Y.call(this,A,p)])):k.length&&(r(),k=[],m=[]);k.length&&r();return l.length?l.join(""):null}var c=jb,d=jb,e=0,f=vb,h=ib,n=qa,r=n.key,q=n,v="L",g=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;
c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};b.defined=function(a){if(!arguments.length)return h;h=a;return b};b.interpolate=function(a){if(!arguments.length)return r;r="function"===typeof a?n=a:(n=yd.get(a)||qa).key;q=n.reverse||n;v=n.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return g;
g=a;return b};return b}function ci(a){return a.radius}function Yf(a){return[a.x,a.y]}function di(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]-Z;return[c*Math.cos(b),c*Math.sin(b)]}}function ei(){return 64}function fi(){return"circle"}function Zf(a){a=Math.sqrt(a/L);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function $f(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,
this.__data__,c.index))}}function Db(a,b,c){Eb(a,da);a.namespace=b;a.id=c;return a}function Ed(a,b,c,d){var e=a.id,f=a.namespace;return Fa(a,"function"===typeof c?function(a,n,r){a[f][e].tween.set(b,d(c.call(a,a.__data__,n,r)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function gi(a){null==a&&(a="");return function(){this.textContent=a}}function Fd(a){return null==a?"__transition__":"__transition_"+a+"__"}function lc(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),h=f[d];if(!h){var n=e.time,
h=f[d]={tween:new P,time:n,delay:e.delay,duration:e.duration,ease:e.ease,index:b};e=null;++f.count;l.timer(function(e){function q(c){if(f.active>d)return g();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(a,a.__data__,e.index));f.active=d;h.event&&h.event.start.call(a,a.__data__,b);h.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&Q.push(d)});p=h.ease;m=h.duration;l.timer(function(){E.c=v(c||1)?ib:v;return 1},0,n)}function v(c){if(f.active!==d)return 1;
c/=m;for(var e=p(c),n=Q.length;0<n;)Q[--n].call(a,e);if(1<=c)return h.event&&h.event.end.call(a,a.__data__,b),g()}function g(){--f.count?delete f[d]:delete a[c];return 1}var k=h.delay,m,p,E=Ha,Q=[];E.t=k+n;if(k<=e)return q(e-k);E.c=q},0,n)}}function hi(a,b,c){a.attr("transform",function(a){var e=b(a);return"translate("+(isFinite(e)?e:c(a))+",0)"})}function ii(a,b,c){a.attr("transform",function(a){var e=b(a);return"translate(0,"+(isFinite(e)?e:c(a))+")"})}function Gd(a){return a.toISOString()}function Hd(a,
b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,e=l.bisect(mc,d);return e==mc.length?[b.year,Ua(a.map(function(a){return a/31536E6}),c)[2]]:e?b[d/mc[e-1]<mc[e]/d?e-1:e]:[ji,Ua(a,c)[2]]}d.invert=function(b){return db(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(db);a.domain(b);return d};d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,db(+d+1),b).length}var r=d.domain(),q=ob(r);if(q=null==a?e(q,10):"number"===typeof a&&e(q,a))a=q[0],
b=q[1];return d.domain(fc(r,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=db(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=db(+b+1);return b}}:a))};d.ticks=function(a,b){var c=ob(d.domain()),r=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];r&&(a=r[0],b=r[1]);return a.range(c[0],db(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return Hd(a.copy(),b,c)};return xd(d,a)}function db(a){return new Date(a)}function ki(a){return JSON.parse(a.responseText)}
function li(a){var b=ha.createRange();b.selectNode(ha.body);return b.createContextualFragment(a.responseText)}var l={version:"3.5.5"},ag=[].slice,Oa=function(a){return ag.call(a)},ha=this.document;if(ha)try{Oa(ha.documentElement.childNodes)[0].nodeType}catch(Ji){Oa=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}Date.now||(Date.now=function(){return+new Date});if(ha)try{ha.createElement("DIV").style.setProperty("opacity",0,"")}catch(Ki){var nc=this.Element.prototype,mi=nc.setAttribute,
ni=nc.setAttributeNS,bg=this.CSSStyleDeclaration.prototype,oi=bg.setProperty;nc.setAttribute=function(a,b){mi.call(this,a,b+"")};nc.setAttributeNS=function(a,b,c){ni.call(this,a,b,c+"")};bg.setProperty=function(a,b,c){oi.call(this,a,b+"",c)}}l.ascending=G;l.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};l.min=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,
a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};l.max=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};l.extent=function(a,b){var c=-1,d=a.length,e,f,h;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=h=f;break}for(;++c<d;)null!=
(f=a[c])&&(e>f&&(e=f),h<f&&(h=f))}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=h=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),h<f&&(h=f))}return[e,h]};l.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)z(e=+a[f])&&(c+=e);else for(;++f<d;)z(e=+b.call(a,a[f],f))&&(c+=e);return c};l.mean=function(a,b){var c=0,d=a.length,e,f=-1,h=d;if(1===arguments.length)for(;++f<d;)z(e=C(a[f]))?c+=e:--h;else for(;++f<d;)z(e=C(b.call(a,a[f],f)))?c+=e:--h;if(h)return c/
h};l.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};l.median=function(a,b){var c=[],d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)z(e=C(a[f]))&&c.push(e);else for(;++f<d;)z(e=C(b.call(a,a[f],f)))&&c.push(e);if(c.length)return l.quantile(c.sort(G),.5)};l.variance=function(a,b){var c=a.length,d=0,e,f,h=0,n=-1,r=0;if(1===arguments.length)for(;++n<c;)z(e=C(a[n]))&&(f=e-d,d+=f/++r,h+=f*(e-d));else for(;++n<c;)z(e=C(b.call(a,a[n],n)))&&(f=e-
d,d+=f/++r,h+=f*(e-d));if(1<r)return h/(r-1)};l.deviation=function(){var a=l.variance.apply(this,arguments);return a?Math.sqrt(a):a};var cg=S(G);l.bisectLeft=cg.left;l.bisect=l.bisectRight=cg.right;l.bisector=function(a){return S(1===a.length?function(b,c){return G(a(b),c)}:a)};l.shuffle=function(a,b,c){3>(d=arguments.length)&&(c=a.length,2>d&&(b=0));for(var d=c-b,e,f;d;)f=Math.random()*d--|0,e=a[d+b],a[d+b]=a[f+b],a[f+b]=e;return a};l.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=
a[b[c]];return d};l.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};l.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=l.min(arguments,la),c=Array(b);++a<b;)for(var d=-1,e,f=c[a]=Array(e);++d<e;)f[d]=arguments[d][a];return c};l.transpose=function(a){return l.zip.apply(l,a)};l.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};l.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};l.entries=function(a){var b=[],c;
for(c in a)b.push({key:c,value:a[c]});return b};l.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,f;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(f=a[b],c=f.length;0<=--c;)e[--d]=f[c];return e};var H=Math.abs;l.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[],e;e=H(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,h;a*=e;b*=e;c*=e;if(0>c)for(;(h=a+c*++f)>b;)d.push(h/e);else for(;(h=a+c*++f)<b;)d.push(h/e);return d};
l.map=function(a,b){var c=new P;if(a instanceof P)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d=-1,e=a.length,f;if(1===arguments.length)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b.call(a,f=a[d],d),f)}else for(d in a)c.set(d,a[d]);return c};ra(P,{has:ca,get:function(a){return this._[W(a)]},set:function(a,b){return this._[W(a)]=b},remove:ea,keys:k,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:sa(b),
value:this._[b]});return a},size:m,empty:g,forEach:function(a){for(var b in this._)a.call(this,sa(b),this._[b])}});l.nest=function(){function a(b,e,q){if(q>=d.length)return h?h.call(c,e):f?e.sort(f):e;for(var g=-1,l=e.length,k=d[q++],m,p,E=new P,Q;++g<l;)(Q=E.get(m=k(p=e[g])))?Q.push(p):E.set(m,[p]);b?(p=b(),e=function(c,d){p.set(c,a(b,d,q))}):(p={},e=function(c,d){p[c]=a(b,d,q)});E.forEach(e);return p}function b(a,c){if(c>=d.length)return a;var f=[],h=e[c++];a.forEach(function(a,d){f.push({key:a,
values:b(d,c)})});return h?f.sort(function(a,b){return h(a.key,b.key)}):f}var c={},d=[],e=[],f,h;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(l.map,c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};c.rollup=function(a){h=a;return c};return c};l.set=function(a){var b=new p;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};ra(p,{has:ca,add:function(a){this._[W(a+="")]=!0;return a},remove:ea,
values:k,size:m,empty:g,forEach:function(a){for(var b in this._)a.call(this,sa(b))}});l.behavior={};l.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=u(a,b,b[e]);return a};var Qd="webkit ms moz Moz o O".split(" ");l.dispatch=function(){for(var a=new U,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=M(a);return a};U.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.slice(c+1),a=a.slice(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===
arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};l.event=null;l.requote=function(a){return a.replace(pi,"\\$&")};var pi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eb={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Hc=function(a,b){return b.querySelector(a)},Ic=function(a,b){return b.querySelectorAll(a)},Fb=function(a,b){var c=a.matches||a[w(a,"matchesSelector")];Fb=function(a,b){return c.call(a,b)};return Fb(a,b)};"function"===
typeof Sizzle&&(Hc=function(a,b){return Sizzle(a,b)[0]||null},Ic=Sizzle,Fb=Sizzle.matchesSelector);l.selection=function(){return l.select(ha.documentElement)};var R=l.selection.prototype=[];R.select=function(a){var b=[],c,d,e,f;a=O(a);for(var h=-1,n=this.length;++h<n;){b.push(c=[]);c.parentNode=(e=this[h]).parentNode;for(var r=-1,q=e.length;++r<q;)(f=e[r])?(c.push(d=a.call(f,f.__data__,r,h)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return wa(b)};R.selectAll=function(a){var b=[],c,
d;a=Rd(a);for(var e=-1,f=this.length;++e<f;)for(var h=this[e],n=-1,r=h.length;++n<r;)if(d=h[n])b.push(c=Oa(a.call(d,d.__data__,n,e))),c.parentNode=d;return wa(b)};var Id={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};l.ns={prefix:Id,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.slice(0,b),a=a.slice(b+1));return Id.hasOwnProperty(c)?{space:Id[c],local:a}:
a}};R.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=l.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(Sd(b,a[b]));return this}return this.each(Sd(a,b))};R.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!Ud(a[e]).test(b))return!1;
return!0}for(b in a)this.each(Vd(b,a[b]));return this}return this.each(Vd(a,b))};R.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(Wd(c,a[c],b));return this}if(2>d)return d=this.node(),J(d).getComputedStyle(d,null).getPropertyValue(a);c=""}return this.each(Wd(a,b,c))};R.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(Xd(b,a[b]));return this}return this.each(Xd(a,b))};R.text=
function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};R.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};R.append=function(a){a=Yd(a);
return this.select(function(){return this.appendChild(a.apply(this,arguments))})};R.insert=function(a,b){a=Yd(a);b=O(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};R.remove=function(){return this.each(vg)};R.data=function(a,b){function c(a,c){var d,e=a.length,f=c.length,h=Math.min(e,f),g=Array(f),l=Array(f),k=Array(e),m,p;if(b){var h=new P,t=Array(e),u;for(d=-1;++d<e;)h.has(u=b.call(m=a[d],m.__data__,d))?k[d]=m:h.set(u,m),t[d]=u;
for(d=-1;++d<f;)(m=h.get(u=b.call(c,p=c[d],d)))?!0!==m&&(g[d]=m,m.__data__=p):l[d]={__data__:p},h.set(u,!0);for(d=-1;++d<e;)!0!==h.get(t[d])&&(k[d]=a[d])}else{for(d=-1;++d<h;)m=a[d],p=c[d],m?(m.__data__=p,g[d]=m):l[d]={__data__:p};for(;d<f;++d)l[d]={__data__:c[d]};for(;d<e;++d)k[d]=a[d]}l.update=g;l.parentNode=g.parentNode=k.parentNode=a.parentNode;n.push(l);r.push(g);q.push(k)}var d=-1,e=this.length,f,h;if(!arguments.length){for(a=Array(e=(f=this[0]).length);++d<e;)if(h=f[d])a[d]=h.__data__;return a}var n=
$d([]),r=wa([]),q=wa([]);if("function"===typeof a)for(;++d<e;)c(f=this[d],a.call(f,f.parentNode.__data__,d));else for(;++d<e;)c(f=this[d],a);r.enter=function(){return n};r.exit=function(){return q};return r};R.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};R.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=Zd(a));for(var f=0,h=this.length;f<h;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var n=0,r=d.length;n<r;n++)(e=d[n])&&
a.call(e,e.__data__,n,f)&&c.push(e)}return wa(b)};R.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};R.sort=function(a){a=wg.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};R.each=function(a){return Fa(this,function(b,c,d){a.call(b,b.__data__,c,d)})};R.call=function(a){var b=Oa(arguments);a.apply(b[0]=this,b);return this};R.empty=
function(){return!this.node()};R.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};R.size=function(){var a=0;Fa(this,function(){++a});return a};var Ga=[];l.selection.enter=$d;l.selection.enter.prototype=Ga;Ga.append=R.append;Ga.empty=R.empty;Ga.node=R.node;Ga.call=R.call;Ga.size=R.size;Ga.select=function(a){for(var b=[],c,d,e,f,h,n=-1,r=this.length;++n<r;){e=(f=this[n]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var q=
-1,g=f.length;++q<g;)(h=f[q])?(c.push(e[q]=d=a.call(f.parentNode,h.__data__,q,n)),d.__data__=h.__data__):c.push(null)}return wa(b)};Ga.insert=function(a,b){2>arguments.length&&(b=xg(this));return R.insert.call(this,a,b)};l.select=function(a){var b;"string"===typeof a?(b=[Hc(a,ha)],b.parentNode=ha.documentElement):(b=[a],b.parentNode=a&&(a.ownerDocument||a.document||a).documentElement);return wa([b])};l.selectAll=function(a){"string"===typeof a?(a=Oa(Ic(a,ha)),a.parentNode=ha.documentElement):a.parentNode=
null;return wa([a])};R.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(ae(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(ae(a,b,c))};var Jc=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});ha&&Jc.forEach(function(a){"on"+a in ha&&Jc.remove(a)});var Wa,zg=0;l.mouse=function(a){return Kc(a,Fc())};var Lc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;l.touch=function(a,b,c){3>arguments.length&&
(c=b,b=Fc().changedTouches);if(b)for(var d=0,e=b.length,f;d<e;++d)if((f=b[d]).identifier===c)return Kc(a,f)};l.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){var k=l.event.target,m=this.parentNode,p=c.of(this,arguments),t=0,E=a(),Q=".drag"+(null==E?"":"-"+E),y,u=l.select(e(k)).on(f+Q,function(){var a=b(m,E),c,d;a&&(c=a[0]-D[0],d=a[1]-D[1],t=t|c|d,D=a,p({type:"drag",x:a[0]+y[0],y:a[1]+y[1],dx:c,dy:d}))}).on(g+Q,function(){b(m,
E)&&(u.on(f+Q,null).on(g+Q,null),A(t&&l.event.target===k),p({type:"dragend"}))}),A=Gb(k),D=b(m,E);d?(y=d.apply(this,arguments),y=[y.x-D[0],y.y-D[1]]):y=[0,0];p({type:"dragstart"})}}var c=Gc(a,"drag","dragstart","dragend"),d=null,e=b(F,l.mouse,J,"mousemove","mouseup"),f=b(Ag,l.touch,t,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return l.rebind(a,c,"on")};l.touches=function(a,b){2>arguments.length&&(b=Fc().touches);return b?Oa(b).map(function(b){var d=Kc(a,
b);d.identifier=b.identifier;return d}):[]};var L=Math.PI,pa=2*L,qi=pa-1E-6,Z=L/2,I=L/180,X=180/L,oc=Math.SQRT2;l.interpolateZoom=function(a,b){function c(a){var b=a*p;if(m){a=ee(k);var c,h=oc*b+k;c=((h=Math.exp(2*h))-1)/(h+1);c*=a;var q=k,h=((q=Math.exp(q))-1/q)/2;c=f/(2*g)*(c-h);return[d+c*n,e+c*r,f*a/ee(oc*b+k)]}return[d+a*n,e+a*r,f*Math.exp(oc*b)]}var d=a[0],e=a[1],f=a[2],h=b[2],n=b[0]-d,r=b[1]-e,q=n*n+r*r,g=Math.sqrt(q),l=(h*h-f*f+4*q)/(4*f*g),q=(h*h-f*f-4*q)/(4*h*g),k=Math.log(Math.sqrt(l*l+
1)-l),m=Math.log(Math.sqrt(q*q+1)-q)-k,p=(m||Math.log(h/f))/oc;c.duration=1E3*p;return c};l.behavior.zoom=function(){function a(a){a.on("mousedown.zoom",q).on(Jd+".zoom",k).on("dblclick.zoom",m).on("touchstart.zoom",g)}function b(a){return[(a[0]-p.x)/p.k,(a[1]-p.y)/p.k]}function c(a){p.k=Math.max(u[0],Math.min(u[1],a))}function d(a,b){b=[b[0]*p.k+p.x,b[1]*p.k+p.y];p.x+=a[0]-b[0];p.y+=a[1]-b[1]}function e(b,e,f,h){b.__chart__={x:p.x,y:p.y,k:p.k};c(Math.pow(2,h));d(E=e,f);b=l.select(b);0<A&&(b=b.transition().duration(A));
b.call(a.event)}function f(){aa&&aa.domain(fa.range().map(function(a){return(a-p.x)/p.k}).map(fa.invert));B&&B.domain(F.range().map(function(a){return(a-p.y)/p.k}).map(F.invert))}function h(a){D++||a({type:"zoomstart"})}function n(a){f();a({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function r(a){--D||a({type:"zoomend"});E=null}function q(){var a=this,c=l.event.target,e=Y.of(a,arguments),f=0,q=l.select(J(a)).on("mousemove.zoom",function(){f=1;d(l.mouse(a),g);n(e)}).on("mouseup.zoom",function(){q.on("mousemove.zoom",
null).on("mouseup.zoom",null);v(f&&l.event.target===c);r(e)}),g=b(l.mouse(a)),v=Gb(a);pc.call(a);h(e)}function g(){function a(){var c=l.touches(x);t=p.k;c.forEach(function(a){a.identifier in A&&(A[a.identifier]=b(a))});return c}function f(){var b=l.event.target;l.select(b).on(Q,k).on(u,m);D.push(b);for(var b=l.event.changedTouches,c=0,d=b.length;c<d;++c)A[b[c].identifier]=null;c=a();d=Date.now();1===c.length?(500>d-T&&(b=c[0],e(x,b,A[b.identifier],Math.floor(Math.log(p.k)/Math.LN2)+1),Na()),T=d):
1<c.length&&(b=c[0],d=c[1],c=b[0]-d[0],b=b[1]-d[1],y=c*c+b*b)}function k(){var a=l.touches(x),b,e,f,h;pc.call(x);for(var q=0,r=a.length;q<r;++q,h=null)if(f=a[q],h=A[f.identifier]){if(e)break;b=f;e=h}if(h){var g=(g=f[0]-b[0])*g+(g=f[1]-b[1])*g,a=y&&Math.sqrt(g/y);b=[(b[0]+f[0])/2,(b[1]+f[1])/2];e=[(e[0]+h[0])/2,(e[1]+h[1])/2];c(a*t)}T=null;d(b,e);n(K)}function m(){if(l.event.touches.length){for(var b=l.event.changedTouches,c=0,d=b.length;c<d;++c)delete A[b[c].identifier];for(var e in A)return void a()}l.selectAll(D).on(E,
null);ja.on("mousedown.zoom",q).on("touchstart.zoom",g);N();r(K)}var x=this,K=Y.of(x,arguments),A={},y=0,t,E=".zoom-"+l.event.changedTouches[0].identifier,Q="touchmove"+E,u="touchend"+E,D=[],ja=l.select(x),N=Gb(x);f();h(K);ja.on("mousedown.zoom",null).on("touchstart.zoom",f)}function k(){var a=Y.of(this,arguments);w?clearTimeout(w):(t=b(E=Q||l.mouse(this)),pc.call(this),h(a));w=setTimeout(function(){w=null;r(a)},50);Na();c(Math.pow(2,.002*qc())*p.k);d(E,t);n(a)}function m(){var a=l.mouse(this),c=
Math.log(p.k)/Math.LN2;e(this,a,b(a),l.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p={x:0,y:0,k:1},t,E,Q,y=[960,500],u=dg,A=250,D=0,w,T,Y=Gc(a,"zoomstart","zoom","zoomend"),fa,aa,F,B;Jd||(Jd="onwheel"in ha?(qc=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(qc=function(){return l.event.wheelDelta},"mousewheel"):(qc=function(){return-l.event.detail},"MozMousePixelScroll"));a.event=function(a){a.each(function(){var a=Y.of(this,arguments),b=p;eb?l.select(this).transition().each("start.zoom",
function(){p=this.__chart__||{x:0,y:0,k:1};h(a)}).tween("zoom:zoom",function(){var c=y[0],d=y[1],e=E?E[0]:c/2,f=E?E[1]:d/2,h=l.interpolateZoom([(e-p.x)/p.k,(f-p.y)/p.k,c/p.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){b=h(b);var d=c/b[2];this.__chart__=p={x:e-b[0]*d,y:f-b[1]*d,k:d};n(a)}}).each("interrupt.zoom",function(){r(a)}).each("end.zoom",function(){r(a)}):(this.__chart__=p,h(a),n(a),r(a))})};a.translate=function(b){if(!arguments.length)return[p.x,p.y];p={x:+b[0],y:+b[1],k:p.k};f();
return a};a.scale=function(b){if(!arguments.length)return p.k;p={x:p.x,y:p.y,k:+b};f();return a};a.scaleExtent=function(b){if(!arguments.length)return u;u=null==b?dg:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return Q;Q=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return y;y=b&&[+b[0],+b[1]];return a};a.duration=function(b){if(!arguments.length)return A;A=+b;return a};a.x=function(b){if(!arguments.length)return aa;aa=b;fa=b.copy();p={x:0,y:0,k:1};return a};
a.y=function(b){if(!arguments.length)return B;B=b;F=b.copy();p={x:0,y:0,k:1};return a};return l.rebind(a,Y,"on")};var dg=[0,Infinity],qc,Jd;l.color=Xa;Xa.prototype.toString=function(){return this.rgb()+""};l.hsl=Ba;var Kd=Ba.prototype=new Xa;Kd.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ba(this.h,this.s,this.l/a)};Kd.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ba(this.h,this.s,a*this.l)};Kd.rgb=function(){return Nc(this.h,this.s,this.l)};l.hcl=xa;var Ld=
xa.prototype=new Xa;Ld.brighter=function(a){return new xa(this.h,this.c,Math.min(100,this.l+rc*(arguments.length?a:1)))};Ld.darker=function(a){return new xa(this.h,this.c,Math.max(0,this.l-rc*(arguments.length?a:1)))};Ld.rgb=function(){return Oc(this.h,this.c,this.l).rgb()};l.lab=ya;var rc=18,le=.95047,me=1,ne=1.08883,Md=ya.prototype=new Xa;Md.brighter=function(a){return new ya(Math.min(100,this.l+rc*(arguments.length?a:1)),this.a,this.b)};Md.darker=function(a){return new ya(Math.max(0,this.l-rc*
(arguments.length?a:1)),this.a,this.b)};Md.rgb=function(){return ke(this.l,this.a,this.b)};l.rgb=ia;var sc=ia.prototype=new Xa;sc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return new ia(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new ia(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))};sc.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new ia(a*this.r,a*this.g,a*this.b)};sc.hsl=function(){return he(this.r,
this.g,this.b)};sc.toString=function(){return"#"+fb(this.r)+fb(this.g)+fb(this.b)};var Ib=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ib.forEach(function(a,b){Ib.set(a,new ia(b>>16,b>>8&255,b&255))});l.functor=V;l.xhr=Uc(t);l.dsv=function(a,b){function c(a,c,f){3>arguments.length&&(f=c,c=null);var h=Jb(a,b,null==c?d:e(c),f);h.row=function(a){return arguments.length?h.response(null==(c=
a)?d:e(a)):c};return h}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(h).join(a)}function h(a){return n.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var n=new RegExp('["'+a+"\n]"),r=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),
c)}:e})};c.parseRows=function(a,b){function c(){if(n>=h)return e;if(k)return k=!1,d;var b=n;if(34===a.charCodeAt(b)){for(var f=b;f++<h;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}n=f+2;var g=a.charCodeAt(f+1);13===g?(k=!0,10===a.charCodeAt(f+2)&&++n):10===g&&(k=!0);return a.slice(b+1,f).replace(/""/g,'"')}for(;n<h;){g=a.charCodeAt(n++);f=1;if(10===g)k=!0;else if(13===g)k=!0,10===a.charCodeAt(n)&&(++n,++f);else if(g!==r)continue;return a.slice(b,n-f)}return a.slice(b)}for(var d={},
e={},f=[],h=a.length,n=0,g=0,l,k;(l=c())!==e;){for(var m=[];l!==d&&l!==e;)m.push(l),l=c();b&&null==(m=b(m,g++))||f.push(m)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new p,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(h).join(a)].concat(b.map(function(b){return e.map(function(a){return h(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};return c};l.csv=l.dsv(",","text/csv");l.tsv=l.dsv("\t",
"text/tab-separated-values");var Mb,Nb,Lb,Kb,Ha,qe=this[w(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};l.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};Nb?Nb.n=d:Mb=d;Nb=d;Lb||(Kb=clearTimeout(Kb),Lb=1,qe(Vc))};l.timer.flush=function(){oe();pe()};l.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ri="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*H(8-b));
return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});l.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=l.round(a,Wc(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3))));return ri[8+c/3]};var re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Dg=l.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},
X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=l.round(a,Wc(a,b))).toFixed(Math.max(0,Math.min(20,Wc(a*(1+1E-15),b))))}}),B=l.time={},ga=Date;Ia.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ma.setUTCDate.apply(this._,arguments)},setDay:function(){Ma.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ma.setUTCFullYear.apply(this._,
arguments)},setHours:function(){Ma.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ma.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ma.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ma.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ma.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ma.setTime.apply(this._,arguments)}};var Ma=Date.prototype;B.year=Ya(function(a){a=B.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+
b)},function(a){return a.getFullYear()});B.years=B.year.range;B.years.utc=B.year.utc.range;B.day=Ya(function(a){var b=new ga(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});B.days=B.day.range;B.days.utc=B.day.utc.range;B.dayOfYear=function(a){var b=B.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,
b){b=7-b;var c=B[a]=Ya(function(a){(a=B.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});B[a+"s"]=c.range;B[a+"s"].utc=c.utc.range;B[a+"OfYear"]=function(a){var c=B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(c+b)%7)/7)}});B.week=B.sunday;B.weeks=B.sunday.range;B.weeks.utc=B.sunday.utc.range;B.weekOfYear=B.sundayOfYear;var se={"-":"",_:" ",
0:"0"},ba=/^\s*\d+/,ve=/^%/;l.locale=function(a){return{numberFormat:Cg(a),timeFormat:Fg(a)}};var eg=l.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
l.format=eg.numberFormat;l.geo={};Xc.prototype={s:0,t:0,add:function(a){we(a,this.t,tc);we(tc.s,this.s,this);this.s?this.t+=tc.t:this.s=tc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var tc=new Xc;l.geo.stream=function(a,b){if(a&&fg.hasOwnProperty(a.type))fg[a.type](a,b);else Sb(a,b)};var fg={Feature:function(a,b){Sb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Sb(c[d].geometry,b)}},xe={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Yc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Yc(c[d],b,0)},Polygon:function(a,b){ye(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ye(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Sb(c[d],
b)}};l.geo.area=function(a){pb=0;l.geo.stream(a,oa);return pb};var pb,Za=new Xc,oa={sphere:function(){pb+=4*L},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Za.reset();oa.lineStart=Ug},polygonEnd:function(){var a=2*Za;pb+=0>a?4*L+a:a;oa.lineStart=oa.lineEnd=oa.point=F}};l.geo.bounds=function(){function a(a,b){A.push(D=[g=a,m=a]);b<k&&(k=b);b>p&&(p=b)}function b(b,c){var d=$a([b*I,c*I]);if(y){var e=gb(y,d),e=gb([e[1],-e[0],0],e);Vb(e);var e=Wb(e),f=b-t,h=0<f?1:-1,r=e[0]*X*h,f=180<H(f);f^(h*
t<r&&r<h*b)?(e=e[1]*X,e>p&&(p=e)):(r=(r+360)%360-180,f^(h*t<r&&r<h*b))?(e=-e[1]*X,e<k&&(k=e)):(c<k&&(k=c),c>p&&(p=c));f?b<t?n(g,b)>n(g,m)&&(m=b):n(b,m)>n(g,m)&&(g=b):m>=g?(b<g&&(g=b),b>m&&(m=b)):b>t?n(g,b)>n(g,m)&&(m=b):n(b,m)>n(g,m)&&(g=b)}else a(b,c);y=d;t=b}function c(){w.point=b}function d(){D[0]=g;D[1]=m;w.point=a;y=null}function e(a,c){if(y){var d=a-t;N+=180<H(d)?d+(0<d?360:-360):d}else E=a,u=c;oa.point(a,c);b(a,c)}function f(){oa.lineStart()}function h(){e(E,u);oa.lineEnd();1E-6<H(N)&&(g=-(m=
180));D[0]=g;D[1]=m;y=null}function n(a,b){return 0>(b-=a)?b+360:b}function r(a,b){return a[0]-b[0]}function q(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var g,k,m,p,t,E,u,y,N,A,D,w={point:a,lineStart:c,lineEnd:d,polygonStart:function(){w.point=e;w.lineStart=f;w.lineEnd=h;N=0;oa.polygonStart()},polygonEnd:function(){oa.polygonEnd();w.point=a;w.lineStart=c;w.lineEnd=d;0>Za?(g=-(m=180),k=-(p=90)):1E-6<N?p=90:-1E-6>N&&(k=-90);D[0]=g;D[1]=m}};return function(a){p=m=-(g=k=Infinity);A=[];l.geo.stream(a,
w);if(a=A.length){A.sort(r);for(var b=1,c=A[0],d,e=[c];b<a;++b)d=A[b],q(d[0],c)||q(d[1],c)?(n(c[0],d[1])>n(c[0],c[1])&&(c[1]=d[1]),n(d[0],c[1])>n(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,h;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(h=n(c[1],d[0]))>f&&(f=h,g=d[0],m=c[1])}A=D=null;return Infinity===g||Infinity===k?[[NaN,NaN],[NaN,NaN]]:[[g,k],[m,p]]}}();l.geo.centroid=function(a){sb=hb=Ja=Ka=Ca=ta=ua=ma=Qa=Ra=Da=0;l.geo.stream(a,za);a=Qa;var b=Ra,c=Da,d=a*a+b*b+c*c;return 1E-12>d&&
(a=ta,b=ua,c=ma,1E-6>hb&&(a=Ja,b=Ka,c=Ca),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*X,Pa(c/Math.sqrt(d))*X]};var sb,hb,Ja,Ka,Ca,ta,ua,ma,Qa,Ra,Da,za={sphere:F,point:$c,lineStart:ze,lineEnd:Ae,polygonStart:function(){za.lineStart=Vg},polygonEnd:function(){za.lineStart=ze}},Qe=Ee(ib,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(f,h){var n=0<f?L:-L,r=H(f-b);if(1E-6>H(r-L))a.point(b,c=0<(c+h)/2?Z:-Z),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(n,
c),a.point(f,c),e=0;else if(d!==n&&r>=L){1E-6>H(b-d)&&(b-=1E-6*d);1E-6>H(f-n)&&(f-=1E-6*n);var r=b,g=c,v=f,l,k,m=Math.sin(r-v);c=1E-6<H(m)?Math.atan((Math.sin(g)*(k=Math.cos(h))*Math.sin(v)-Math.sin(h)*(l=Math.cos(g))*Math.sin(r))/(l*k*m)):(g+h)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(n,c);e=0}a.point(b=f,c=h);d=n},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=Z,d.point(-L,c),d.point(0,c),d.point(L,c),d.point(L,0),d.point(L,-c),d.point(0,
-c),d.point(-L,-c),d.point(-L,0),d.point(-L,c)):1E-6<H(a[0]-b[0])?(a=a[0]<b[0]?L:-L,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-L,-L/2]);l.geo.clipExtent=function(){var a,b,c,d,e,f,h={stream:function(a){e&&(e.valid=!1);e=f(a);e.valid=!0;return e},extent:function(n){if(!arguments.length)return[[a,b],[c,d]];f=He(a=+n[0][0],b=+n[0][1],c=+n[1][0],d=+n[1][1]);e&&(e.valid=!1,e=null);return h}};return h.extent([[0,0],[960,500]])};(l.geo.conicEqualArea=function(){return bd(Ie)}).raw=
Ie;l.geo.albers=function(){return l.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};l.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];e=null;(h(b,a),e)||(n(b,a),e)||r(b,a);return e}var b=l.geo.albers(),c=l.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=l.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},h,n,r;a.invert=function(a){var e=b.scale(),f=b.translate(),
h=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(.12<=e&&.234>e&&-.425<=h&&-.214>h?c:.166<=e&&.234>e&&-.214<=h&&-.115>h?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),f=c.stream(a),h=d.stream(a);return{point:function(a,b){e.point(a,b);f.point(a,b);h.point(a,b)},sphere:function(){e.sphere();f.sphere();h.sphere()},lineStart:function(){e.lineStart();f.lineStart();h.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();h.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();h.polygonStart()},
polygonEnd:function(){e.polygonEnd();f.polygonEnd();h.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var g=b.scale(),l=+e[0],k=+e[1];h=b.translate(e).clipExtent([[l-.455*g,k-.238*g],[l+.455*g,k+.238*g]]).stream(f).point;
n=c.translate([l-.307*g,k+.201*g]).clipExtent([[l-.425*g+1E-6,k+.12*g+1E-6],[l-.214*g-1E-6,k+.234*g-1E-6]]).stream(f).point;r=d.translate([l-.205*g,k+.212*g]).clipExtent([[l-.214*g+1E-6,k+.166*g+1E-6],[l-.115*g-1E-6,k+.234*g-1E-6]]).stream(f).point;return a};return a.scale(1070)};var uc,Zb,Sa={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Zb=0;Sa.lineStart=Zg},polygonEnd:function(){Sa.lineStart=Sa.lineEnd=Sa.point=F;uc+=H(Zb/2)}},vc,wc,xc,yc,si={point:function(a,b){a<vc&&(vc=a);a>xc&&(xc=
a);b<wc&&(wc=b);b>yc&&(yc=b)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F},Aa={point:ab,lineStart:Ke,lineEnd:Le,polygonStart:function(){Aa.lineStart=ah},polygonEnd:function(){Aa.point=ab;Aa.lineStart=Ke;Aa.lineEnd=Le}};l.geo.path=function(){function a(a){a&&("function"===typeof c&&h.pointRadius(+c.apply(this,arguments)),n&&n.valid||(n=f(h)),l.geo.stream(a,n));return h.result()}function b(){n=null;return a}var c=4.5,d,e,f,h,n;a.area=function(a){uc=0;l.geo.stream(a,f(Sa));return uc};a.centroid=
function(a){Ja=Ka=Ca=ta=ua=ma=Qa=Ra=Da=0;l.geo.stream(a,f(Aa));return Da?[Qa/Da,Ra/Da]:ma?[ta/ma,ua/ma]:Ca?[Ja/Ca,Ka/Ca]:[NaN,NaN]};a.bounds=function(a){xc=yc=-(vc=wc=Infinity);l.geo.stream(a,f(si));return[[vc,wc],[xc,yc]]};a.projection=function(a){if(!arguments.length)return d;f=(d=a)?a.stream||ch(a):t;return b()};a.context=function(a){if(!arguments.length)return e;h=null==(e=a)?new $g:new bh(a);"function"!==typeof c&&h.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:(h.pointRadius(+b),+b);return a};return a.projection(l.geo.albersUsa()).context(null)};l.geo.transform=function(a){return{stream:function(b){b=new Pe(b);for(var c in a)b[c]=a[c];return b}}};Pe.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
l.geo.projection=Ta;l.geo.projectionMutator=cd;(l.geo.equirectangular=function(){return Ta(tb)}).raw=tb.invert=tb;l.geo.rotation=function(a){function b(b){b=a(b[0]*I,b[1]*I);return b[0]*=X,b[1]*=X,b}a=dd(a[0]%360*I,a[1]*I,2<a.length?a[2]*I:0);b.invert=function(b){b=a.invert(b[0]*I,b[1]*I);return b[0]*=X,b[1]*=X,b};return b};Re.invert=tb;l.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,c=dd(-a[0]*I,-a[1]*I,0).invert,d=[];e(null,null,1,{point:function(a,b){d.push(a=
c(a,b));a[0]*=X;a[1]*=X}});return{type:"Polygon",coordinates:[d]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=ad((c=+b)*I,d*I);return a};a.precision=function(b){if(!arguments.length)return d;e=ad(c*I,(d=+b)*I);return a};return a.angle(90)};l.geo.distance=function(a,b){var c=(b[0]-a[0])*I,d=a[1]*I,e=b[1]*I,f=Math.sin(c),c=Math.cos(c),h=Math.sin(d),d=Math.cos(d),n=Math.sin(e),e=Math.cos(e),g;return Math.atan2(Math.sqrt((g=
e*f)*g+(g=d*n-h*e*c)*g),h*n+d*e*c)};l.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return l.range(Math.ceil(f/p)*p,e,p).map(Q).concat(l.range(Math.ceil(q/t)*t,g,t).map(y)).concat(l.range(Math.ceil(d/k)*k,c,k).filter(function(a){return 1E-6<H(a%p)}).map(u)).concat(l.range(Math.ceil(n/m)*m,h,m).filter(function(a){return 1E-6<H(a%t)}).map(E))}var c,d,e,f,h,n,g,q,k=10,m=k,p=90,t=360,u,E,Q,y,N=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[Q(f).concat(y(g).slice(1),Q(e).reverse().slice(1),y(q).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,q],[e,g]];f=+b[0][0];e=+b[1][0];q=+b[0][1];g=+b[1][1];f>e&&(b=f,f=e,e=b);q>g&&(b=q,q=g,g=b);return a.precision(N)};a.minorExtent=function(b){if(!arguments.length)return[[d,n],[c,h]];d=+b[0][0];c=+b[1][0];
n=+b[0][1];h=+b[1][1];d>c&&(b=d,d=c,c=b);n>h&&(b=n,n=h,h=b);return a.precision(N)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[p,t];p=+b[0];t=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[k,m];k=+b[0];m=+b[1];return a};a.precision=function(b){if(!arguments.length)return N;N=+b;u=We(n,h,90);E=Xe(d,c,N);Q=We(q,g,90);y=Xe(f,e,N);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};l.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=ed,c,d=fd,e;a.distance=function(){return l.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};l.geo.interpolate=function(a,b){return dh(a[0]*I,a[1]*I,b[0]*I,b[1]*I)};l.geo.length=function(a){zc=0;l.geo.stream(a,qb);return zc};var zc,qb={sphere:F,point:F,lineStart:function(){function a(a,f){var h=Math.sin(f*=I),n=Math.cos(f),g=H((a*=I)-b),q=Math.cos(g);zc+=Math.atan2(Math.sqrt((g=n*Math.sin(g))*g+(g=d*h-c*n*q)*g),c*h+d*n*q);b=a;c=h;d=n}var b,c,d;qb.point=function(e,f){b=e*I;c=Math.sin(f*=I);d=Math.cos(f);qb.point=a};qb.lineEnd=function(){qb.point=qb.lineEnd=F}},lineEnd:F,polygonStart:F,
polygonEnd:F},gg=ub(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(l.geo.azimuthalEqualArea=function(){return Ta(gg)}).raw=gg;var hg=ub(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},t);(l.geo.azimuthalEquidistant=function(){return Ta(hg)}).raw=hg;(l.geo.conicConformal=function(){return bd(Ye)}).raw=Ye;(l.geo.conicEquidistant=function(){return bd(Ze)}).raw=Ze;var ig=ub(function(a){return 1/a},Math.atan);(l.geo.gnomonic=function(){return Ta(ig)}).raw=ig;$b.invert=
function(a,b){return[a,2*Math.atan(Math.exp(b))-Z]};(l.geo.mercator=function(){return $e($b)}).raw=$b;var jg=ub(function(){return 1},Math.asin);(l.geo.orthographic=function(){return Ta(jg)}).raw=jg;var kg=ub(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(l.geo.stereographic=function(){return Ta(kg)}).raw=kg;gd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Z]};(l.geo.transverseMercator=function(){var a=$e(gd),b=a.center,c=a.rotate;a.center=function(a){return a?b([-a[1],
a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90])}).raw=gd;l.geom={};l.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=V(c),h=V(d),n,g=a.length,q=[],l=[];for(n=0;n<g;n++)q.push([+b.call(this,a[n],n),+h.call(this,a[n],n),n]);q.sort(eh);for(n=0;n<g;n++)l.push([q[n][0],-q[n][1]]);var b=af(q),l=af(l),h=l[0]===b[0],g=l[l.length-1]===b[b.length-1],k=[];for(n=b.length-1;0<=n;--n)k.push(a[q[b[n]][2]]);
for(n=+h;n<l.length-g;++n)k.push(a[q[l[n]][2]]);return k}var c=jb,d=vb;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};l.geom.polygon=function(a){Eb(a,Ac);return a};var Ac=l.geom.polygon.prototype=[];Ac.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};Ac.centroid=function(a){var b=-1,c=this.length,d=0,e=0,f,h=this[c-1],n;for(arguments.length||
(a=-1/(6*this.area()));++b<c;)f=h,h=this[b],n=f[0]*h[1]-h[0]*f[1],d+=(f[0]+h[0])*n,e+=(f[1]+h[1])*n;return[d*a,e*a]};Ac.clip=function(a){for(var b,c=bf(a),d=-1,e=this.length-bf(this),f,h,n=this[e-1],g,q,l;++d<e;){b=a.slice();a.length=0;g=this[d];q=b[(h=b.length-c)-1];for(f=-1;++f<h;)l=b[f],hd(l,n,g)?(hd(q,n,g)||a.push(id(q,l,n,g)),a.push(l)):hd(q,n,g)&&a.push(id(q,l,n,g)),q=l;c&&a.push(a[0]);n=g}return a};var nb,bb,lb,df=[],kd,wb,hf=[];ff.prototype.prepare=function(){for(var a=this.edges,b=a.length,
c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(gf);return a.length};cc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ld.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=kf(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===
d.L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(yb(this,c),a=c,c=a.U),c.C=!1,d.C=!0,zb(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(zb(this,c),a=c,c=a.U),c.C=!1,d.C=!0,yb(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,f;e=c?d?kf(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;c&&d?(f=e.C,e.C=a.C,e.L=c,c.U=e,e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)):(f=a.C,a=e);a&&(a.U=b);if(!f)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,yb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,zb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;yb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,zb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,yb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;zb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};l.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=n[0][0],e=n[0][1],f=n[1][0],h=n[1][1];
md(c(a),n).cells.forEach(function(c,n){var g=c.edges,l=c.site;(b[n]=g.length?g.map(function(a){a=a.start();return[a.x,a.y]}):l.x>=d&&l.x<=f&&l.y>=e&&l.y<=h?[[d,h],[f,h],[f,e],[d,e]]:[]).point=a[n]});return b}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(f(a,b)/1E-6),y:1E-6*Math.round(h(a,b)/1E-6),i:b}})}var d=jb,e=vb,f=d,h=e,n=Bc;if(a)return b(a);b.links=function(a){return md(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};
b.triangles=function(a){var b=[];md(c(a)).cells.forEach(function(c,d){for(var e=c.site,f=c.edges.sort(gf),h=-1,n=f.length,g,l=f[n-1].edge,l=l.l===e?l.r:l.l;++h<n;)g=l,l=f[h].edge,l=l.l===e?l.r:l.l,d<g.i&&d<l.i&&0>(e.x-l.x)*(g.y-e.y)-(e.x-g.x)*(l.y-e.y)&&b.push([a[d],a[g.i],a[l.i]])});return b};b.x=function(a){return arguments.length?(f=V(d=a),b):d};b.y=function(a){return arguments.length?(h=V(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return n===Bc?null:n;n=null==a?Bc:a;return b};b.size=
function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):n===Bc?null:n&&n[1]};return b};var Bc=[[-1E6,-1E6],[1E6,1E6]];l.geom.delaunay=function(a){return l.geom.voronoi().triangles(a)};l.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,h,n,g){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var q=a.x,r=a.y;if(null!=q){if(!(.01>H(q-c)+H(r-d))){var k=a.point;a.x=a.y=a.point=null;l(a,k,q,r,e,h,n,g)}l(a,b,c,d,e,h,n,g)}else a.x=c,a.y=d,a.point=b}else l(a,b,c,d,e,h,n,g)}function l(a,b,c,d,e,
h,n,g){var q=.5*(e+n),r=.5*(h+g),k=c>=q,m=d>=r,p=m<<1|k;a.leaf=!1;a=a.nodes[p]||(a.nodes[p]=lf());k?e=q:n=q;m?h=r:g=r;f(a,b,c,d,e,h,n,g)}var k,m=V(h),p=V(n),t,u,y,w,A,D,F,T;if(null!=b)A=b,D=c,F=d,T=e;else if(F=T=-(A=D=Infinity),t=[],u=[],w=a.length,g)for(y=0;y<w;++y)k=a[y],k.x<A&&(A=k.x),k.y<D&&(D=k.y),k.x>F&&(F=k.x),k.y>T&&(T=k.y),t.push(k.x),u.push(k.y);else for(y=0;y<w;++y){var Y=+m(k=a[y],y);k=+p(k,y);Y<A&&(A=Y);k<D&&(D=k);Y>F&&(F=Y);k>T&&(T=k);t.push(Y);u.push(k)}Y=F-A;k=T-D;Y>k?T=D+Y:F=A+k;
var B=lf();B.add=function(a){f(B,a,+m(a,++y),+p(a,y),A,D,F,T)};B.visit=function(a){Ab(a,B,A,D,F,T)};B.find=function(a){return mh(B,a[0],a[1],A,D,F,T)};y=-1;if(null==b){for(;++y<w;)f(B,a[y],t[y],u[y],A,D,F,T);--y}else a.forEach(B.add);t=u=a=k=null;return B}var h=jb,n=vb,g;if(g=arguments.length)return h=kh,n=lh,3===g&&(e=c,d=b,c=b=0),f(a);f.x=function(a){return arguments.length?(h=a,f):h};f.y=function(a){return arguments.length?(n=a,f):n};f.extent=function(a){if(!arguments.length)return null==b?null:
[[b,c],[d,e]];null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return f};return f};l.interpolateRgb=nd;l.interpolateObject=mf;l.interpolateNumber=La;l.interpolateString=nf;var od=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pd=new RegExp(od.source,"g");l.interpolate=cb;l.interpolators=[function(a,b){var c=typeof b;return("string"===c?Ib.has(b)||/^(#|rgb\(|hsl\()/.test(b)?
nd:nf:b instanceof Xa?nd:Array.isArray(b)?dc:"object"===c&&isNaN(b)?mf:La)(a,b)}];l.interpolateArray=dc;var lg=function(){return t},ti=l.map({linear:lg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return oh},cubic:function(){return ph},sin:function(){return rh},exp:function(){return sh},circle:function(){return th},elastic:function(a,b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/pa*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,-10*d)*
Math.sin((d-c)*pa/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return uh}}),ui=l.map({"in":t,out:of,"in-out":pf,"out-in":function(a){return pf(of(a))}});l.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in",c=ti.get(c)||lg,b=ui.get(b)||t;return nh(b(c.apply(null,ag.call(arguments,1))))};l.interpolateHcl=function(a,b){a=l.hcl(a);b=l.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,h=b.c-d,n=b.l-e;isNaN(h)&&(h=0,d=isNaN(d)?b.c:
d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return Oc(c+f*a,d+h*a,e+n*a)+""}};l.interpolateHsl=function(a,b){a=l.hsl(a);b=l.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,h=b.s-d,n=b.l-e;isNaN(h)&&(h=0,d=isNaN(d)?b.s:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return Nc(c+f*a,d+h*a,e+n*a)+""}};l.interpolateLab=function(a,b){a=l.lab(a);b=l.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,h=b.a-d,n=b.b-e;return function(a){return ke(c+f*a,d+
h*a,e+n*a)+""}};l.interpolateRound=qf;l.transform=function(a){var b=ha.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new rf(d?d.matrix:vi)})(a)};rf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vi={a:1,b:0,c:0,d:1,e:0,f:0};l.interpolateTransform=tf;l.layout={};l.layout.bundle=function(){return function(a){for(var b=
[],c=-1,d=a.length;++c<d;)b.push(xh(a[c]));return b}};l.layout.chord=function(){function a(){var a={},c=[],m=l.range(h),p=[],t,u,y,w,A;d=[];e=[];t=0;for(w=-1;++w<h;){u=0;for(A=-1;++A<h;)u+=f[w][A];c.push(u);p.push(l.range(h));t+=u}g&&m.sort(function(a,b){return g(c[a],c[b])});q&&p.forEach(function(a,b){a.sort(function(a,c){return q(f[b][a],f[b][c])})});t=(pa-n*h)/t;u=0;for(w=-1;++w<h;){y=u;for(A=-1;++A<h;){var D=m[w],F=p[D][A],T=f[D][F],B=u,z=u+=T*t;a[D+"-"+F]={index:D,subindex:F,startAngle:B,endAngle:z,
value:T}}e[D]={index:D,startAngle:y,endAngle:u,value:(u-y)/t};u+=n}for(w=-1;++w<h;)for(A=w-1;++A<h;)m=a[w+"-"+A],p=a[A+"-"+w],(m.value||p.value)&&d.push(m.value<p.value?{source:p,target:m}:{source:m,target:p});k&&b()}function b(){d.sort(function(a,b){return k((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,h,n=0,g,q,k;c.matrix=function(a){if(!arguments.length)return f;h=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return n;n=a;
d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return g;g=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return q;q=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return k;k=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};l.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){d=b.cx-a.x;var f=b.cy-a.y;c=e-c;e=d*d+f*f;if(c*c/u<e)return e<m&&(c=b.charge/e,a.px-=
d*c,a.py-=f*c),!0;b.point&&e&&e<m&&(c=b.pointCharge/e,a.px-=d*c,a.py-=f*c)}return!b.charge}}function b(a){a.px=l.event.x;a.py=l.event.y;c.resume()}var c={},d=l.dispatch("start","tick","end"),e=[1,1],f,h,n=.9,g=wi,q=xi,k=-30,m=yi,p=.1,u=.64,w=[],E=[],Q,y,N;c.tick=function(){if(.005>(h*=.99))return d.end({type:"end",alpha:h=0}),!0;var b=w.length,c=E.length,f,g,q,r,m,x,t;for(f=0;f<c;++f)if(g=E[f],q=g.source,r=g.target,x=r.x-q.x,t=r.y-q.y,m=x*x+t*t)m=h*y[f]*((m=Math.sqrt(m))-Q[f])/m,x*=m,t*=m,r.x-=x*
(m=q.weight/(r.weight+q.weight)),r.y-=t*m,q.x+=x*(m=1-m),q.y+=t*m;if(m=h*p)if(x=e[0]/2,t=e[1]/2,f=-1,m)for(;++f<b;)g=w[f],g.x+=(x-g.x)*m,g.y+=(t-g.y)*m;if(k)for(vf(c=l.geom.quadtree(w),h,N),f=-1;++f<b;)(g=w[f]).fixed||c.visit(a(g));for(f=-1;++f<b;)g=w[f],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*n,g.y-=(g.py-(g.py=g.y))*n);d.tick({type:"tick",alpha:h})};c.nodes=function(a){if(!arguments.length)return w;w=a;return c};c.links=function(a){if(!arguments.length)return E;E=a;return c};c.size=
function(a){if(!arguments.length)return e;e=a;return c};c.linkDistance=function(a){if(!arguments.length)return g;g="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return n;n=+a;return c};c.charge=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(m);
m=a*a;return c};c.gravity=function(a){if(!arguments.length)return p;p=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(u);u=a*a;return c};c.alpha=function(a){if(!arguments.length)return h;a=+a;h?h=0<a?a:0:0<a&&(d.start({type:"start",alpha:h=a}),l.timer(c.tick));return c};c.start=function(){function a(c,e){if(!l){l=Array(d);for(n=0;n<d;++n)l[n]=[];for(n=0;n<f;++n){var h=E[n];l[h.source.index].push(h.target);l[h.target.index].push(h.source)}}for(var h=l[b],n=-1,g=h.length,q;++n<
g;)if(!isNaN(q=h[n][c]))return q;return Math.random()*e}var b,d=w.length,f=E.length,h=e[0],n=e[1],l,m;for(b=0;b<d;++b)(m=w[b]).index=b,m.weight=0;for(b=0;b<f;++b)m=E[b],"number"==typeof m.source&&(m.source=w[m.source]),"number"==typeof m.target&&(m.target=w[m.target]),++m.source.weight,++m.target.weight;for(b=0;b<d;++b)m=w[b],isNaN(m.x)&&(m.x=a("x",h)),isNaN(m.y)&&(m.y=a("y",n)),isNaN(m.px)&&(m.px=m.x),isNaN(m.py)&&(m.py=m.y);Q=[];if("function"===typeof g)for(b=0;b<f;++b)Q[b]=+g.call(this,E[b],b);
else for(b=0;b<f;++b)Q[b]=g;y=[];if("function"===typeof q)for(b=0;b<f;++b)y[b]=+q.call(this,E[b],b);else for(b=0;b<f;++b)y[b]=q;N=[];if("function"===typeof k)for(b=0;b<d;++b)N[b]=+k.call(this,w[b],b);else for(b=0;b<d;++b)N[b]=k;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||(f=l.behavior.drag().origin(t).on("dragstart.force",yh).on("drag.force",b).on("dragend.force",zh));if(!arguments.length)return f;this.on("mouseover.force",Ah).on("mouseout.force",
Bh).call(f)};return l.rebind(c,d,"on")};var wi=20,xi=1,yi=Infinity;l.layout.hierarchy=function(){function a(e){var f=[e],h=[],n;for(e.depth=0;null!=(n=f.pop());)if(h.push(n),(q=c.call(a,n,n.depth))&&(g=q.length)){for(var g,q,l;0<=--g;)f.push(l=q[g]),l.parent=n,l.depth=n.depth+1;d&&(n.value=0);n.children=q}else d&&(n.value=+d.call(a,n,n.depth)||0),delete n.children;Ea(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b);d&&(e=a.parent)&&(e.value+=a.value)});return h}var b=Fh,c=Dh,d=Eh;a.sort=function(c){if(!arguments.length)return b;
b=c;return a};a.children=function(b){if(!arguments.length)return c;c=b;return a};a.value=function(b){if(!arguments.length)return d;d=b;return a};a.revalue=function(b){d&&(Cb(b,function(a){a.children&&(a.value=0)}),Ea(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0);if(c=b.parent)c.value+=b.value}));return b};return a};l.layout.partition=function(){function a(b,c,d,e){var g=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(g&&(k=g.length)){var l=-1,k,m;for(d=b.value?d/b.value:0;++l<
k;)a(m=g[l],c,b=m.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(c,h){var n=d.call(this,c,h);a(n[0],0,e[0],e[1]/b(n[0]));return n}var d=l.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};return Bb(c,d)};l.layout.pie=function(){function a(h){var n=h.length,g=h.map(function(c,d){return+b.call(a,c,d)}),q=+("function"===typeof d?d.apply(this,arguments):d),k=("function"===
typeof e?e.apply(this,arguments):e)-q,m=Math.min(Math.abs(k)/n,+("function"===typeof f?f.apply(this,arguments):f)),p=m*(0>k?-1:1),t=(k-n*p)/l.sum(g),n=l.range(n),u=[],E;null!=c&&n.sort(c===mg?function(a,b){return g[b]-g[a]}:function(a,b){return c(h[a],h[b])});n.forEach(function(a){u[a]={data:h[a],value:E=g[a],startAngle:q,endAngle:q+=E*t+p,padAngle:m}});return u}var b=Number,c=mg,d=0,e=pa,f=0;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;
c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};a.padAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var mg={};l.layout.stack=function(){function a(n,g){if(!(t=n.length))return n;var q=n.map(function(c,d){return b.call(a,c,d)}),k=q.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),h.call(a,b,c)]})}),m=c.call(a,k,g),q=l.permute(q,m),k=l.permute(k,m),m=d.call(a,
k,g),p=q[0].length,t,u,E,w;for(E=0;E<p;++E)for(e.call(a,q[0][E],w=m[E],k[0][E][1]),u=1;u<t;++u)e.call(a,q[u][E],w+=k[u-1][E][1],k[u][E][1]);return n}var b=t,c=qd,d=rd,e=Ih,f=Gh,h=Hh;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:zi.get(b)||qd;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:Ai.get(b)||rd;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};
a.y=function(b){if(!arguments.length)return h;h=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var zi=l.map({"inside-out":function(a){var b=a.length,c,d=a.map(Jh),e=a.map(Kh),f=l.range(b).sort(function(a,b){return d[a]-d[b]}),h=0,n=0,g=[],q=[];for(a=0;a<b;++a)c=f[a],h<n?(h+=e[c],g.push(c)):(n+=e[c],q.push(c));return q.reverse().concat(g)},reverse:function(a){return l.range(a.length).reverse()},"default":qd}),Ai=l.map({silhouette:function(a){var b=a.length,c=a[0].length,
d=[],e=0,f,h,g,l=[];for(h=0;h<c;++h){for(g=f=0;f<b;f++)g+=a[f][h][1];g>e&&(e=g);d.push(g)}for(h=0;h<c;++h)l[h]=(e-d[h])/2;return l},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,h,g,l,q,k,m,p,t=[];t[0]=m=p=0;for(f=1;f<d;++f){for(g=e=0;e<b;++e)g+=a[e][f][1];l=e=0;for(k=c[f][0]-c[f-1][0];e<b;++e){h=0;for(q=(a[e][f][1]-a[e][f-1][1])/(2*k);h<e;++h)q+=(a[h][f][1]-a[h][f-1][1])/k;l+=q*a[e][f][1]}t[f]=m-=g?l/g*k:0;m<p&&(p=m)}for(f=0;f<d;++f)t[f]-=p;return t},expand:function(a){var b=a.length,c=
a[0].length,d=1/b,e,f,h,g=[];for(f=0;f<c;++f){for(h=e=0;e<b;e++)h+=a[e][f][1];if(h)for(e=0;e<b;e++)a[e][f][1]/=h;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)g[f]=0;return g},zero:rd});l.layout.histogram=function(){function a(a,h){var g=[],k=a.map(c,this),q=d.call(this,k,h),m=e.call(this,q,k,h),p;h=-1;for(var t=k.length,u=m.length-1,w=b?1:1/t;++h<u;)p=g[h]=[],p.dx=m[h+1]-(p.x=m[h]),p.y=0;if(0<u)for(h=-1;++h<t;)p=k[h],p>=q[0]&&p<=q[1]&&(p=g[l.bisect(m,p,1,u)-1],p.y+=w,p.push(a[h]));return g}var b=
!0,c=Number,d=Nh,e=Mh;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=V(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return wf(a,b)}:V(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};l.layout.pack=function(){function a(a,h){var g=b.call(this,a,h),l=g[0],k=d[0],m=d[1],p=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};l.x=
l.y=0;Ea(l,function(a){a.r=+p(a.value)});Ea(l,zf);if(c){var t=c*(e?1:Math.max(2*l.r/k,2*l.r/m))/2;Ea(l,function(a){a.r+=t});Ea(l,zf);Ea(l,function(a){a.r-=t})}Bf(l,k/2,m/2,e?1:1/Math.max(2*l.r/k,2*l.r/m));return g}var b=l.layout.hierarchy().sort(Oh),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Bb(a,
b)};l.layout.tree=function(){function a(a,l){var m=f.call(this,a,l),p=m[0],t=b(p);Ea(t,c);t.parent.m=-t.z;Cb(t,d);if(k)Cb(p,e);else{var u=p,E=p,w=p;Cb(p,function(a){a.x<u.x&&(u=a);a.x>E.x&&(E=a);a.depth>w.depth&&(w=a)});var y=h(u,E)/2-u.x,N=g[0]/(E.x+h(E,u)/2+y),A=g[1]/(w.depth||1);Cb(p,function(a){a.x=(a.x+y)*N;a.y=a.depth*A})}return m}function b(a){a={A:null,children:[a]};for(var b=[a],c;null!=(c=b.pop());)for(var d=c.children,e,f=0,h=d.length;f<h;++f)b.push((d[f]=e={_:d[f],parent:c,children:(e=
d[f].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:f}).a=e);return a.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){for(var e=0,f=0,g=a.children,n=g.length,l;0<=--n;)l=g[n],l.z+=e,l.m+=e,e+=l.s+(f+=l.c);b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-b):a.z=b}else d&&(a.z=d.z+h(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){f=e=a;g=e.parent.children[0];n=e.m;l=f.m;for(var k=d.m,m=g.m,r;d=ud(d),e=td(e),d&&e;){g=td(g);f=ud(f);
f.a=a;r=d.z+k-e.z-n+h(d._,e._);if(0<r){var p=d.a.parent===a.parent?d.a:c,t=a,u=r,w=u/(t.i-p.i);t.c-=w;t.s+=u;p.c+=w;t.z+=u;t.m+=u;n+=r;l+=r}k+=d.m;n+=e.m;m+=g.m;l+=f.m}d&&!ud(f)&&(f.t=d,f.m+=k-l);e&&!td(g)&&(g.t=e,g.m+=n-m,c=a)}b.A=c}function d(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function e(a){a.x*=g[0];a.y=a.depth*g[1]}var f=l.layout.hierarchy().sort(null).value(null),h=Cf,g=[1,1],k=null;a.separation=function(b){if(!arguments.length)return h;h=b;return a};a.size=function(b){if(!arguments.length)return k?
null:g;k=null==(g=b)?e:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?g:null;k=null==(g=b)?null:e;return a};return Bb(a,f)};l.layout.cluster=function(){function a(a,h){var g=b.call(this,a,h),l=g[0],k,m=0;Ea(l,function(a){var b=a.children;b&&b.length?(a.x=Sh(b),a.y=Rh(b)):(a.x=k?m+=c(a,k):0,a.y=0,k=a)});var p=Df(l),t=Ef(l),u=p.x-c(p,t)/2,w=t.x+c(t,p)/2;Ea(l,e?function(a){a.x=(a.x-l.x)*d[0];a.y=(l.y-a.y)*d[1]}:function(a){a.x=(a.x-u)/(w-u)*d[0];a.y=(1-(l.y?a.y/l.y:1))*d[1]});return g}
var b=l.layout.hierarchy().sort(null).value(null),c=Cf,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Bb(a,b)};l.layout.treemap=function(){function a(a,b){for(var c=-1,d=a.length,e,f;++c<d;)f=(e=a[c]).value*(0>b?0:b),e.area=isNaN(f)||0>=f?0:f}function b(c){var e=c.children;if(e&&e.length){var f=
m(c),h=[],g=e.slice(),n=Infinity,l,k="slice"===u?f.dx:"dice"===u?f.dy:"slice-dice"===u?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(g,f.dx*f.dy/c.value);for(h.area=0;0<(c=g.length);){h.push(c=g[c-1]);h.area+=c.area;if(!(c="squarify"!==u)){l=k;c=h.area;for(var p=void 0,r=0,v=Infinity,t=-1,x=h.length;++t<x;)if(p=h[t].area)p<v&&(v=p),p>r&&(r=p);c*=c;l*=l;c=(l=c?Math.max(l*r*w/c,c/(l*v*w)):Infinity)<=n}c?(g.pop(),n=l):(h.area-=h.pop().area,d(h,k,f,!1),k=Math.min(f.dx,f.dy),h.length=h.area=0,n=Infinity)}h.length&&
(d(h,k,f,!0),h.length=h.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=m(b),h=e.slice(),g=[];a(h,f.dx*f.dy/b.value);for(g.area=0;b=h.pop();)g.push(b),g.area+=b.area,null!=b.z&&(d(g,b.z?f.dx:f.dy,f,!h.length),g.length=g.area=0);e.forEach(c)}}function d(a,b,c,d){var e=-1,f=a.length,g=c.x,n=c.y,l=b?h(a.area/b):0,k;if(b==c.dx){if(d||l>c.dy)l=c.dy;for(;++e<f;)k=a[e],k.x=g,k.y=n,k.dy=l,g+=k.dx=Math.min(c.x+c.dx-g,l?h(k.area/l):0);k.z=!0;k.dx+=c.x+c.dx-g;c.y+=l;c.dy-=l}else{if(d||
l>c.dx)l=c.dx;for(;++e<f;)k=a[e],k.x=g,k.y=n,k.dx=l,n+=k.dy=Math.min(c.y+c.dy-n,l?h(k.area/l):0);k.z=!1;k.dy+=c.y+c.dy-n;c.x+=l;c.dx-=l}}function e(d){d=t||f(d);var e=d[0];e.x=0;e.y=0;e.dx=g[0];e.dy=g[1];t&&f.revalue(e);a([e],e.dx*e.dy/e.value);(t?c:b)(e);p&&(t=d);return d}var f=l.layout.hierarchy(),h=Math.round,g=[1,1],k=null,m=vd,p=!1,t,u="squarify",w=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return g;g=a;return e};e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);
return null==d?vd(c):Ff(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return Ff(b,a)}if(!arguments.length)return k;var d;m=null==(k=a)?vd:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};e.round=function(a){if(!arguments.length)return h!=Number;h=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return p;p=a;t=null;return e};e.ratio=function(a){if(!arguments.length)return w;w=a;return e};e.mode=function(a){if(!arguments.length)return u;u=a+"";return e};
return Bb(e,f)};l.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,e;do c=2*Math.random()-1,e=2*Math.random()-1,e=c*c+e*e;while(!e||1<e);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=l.random.normal.apply(l,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=l.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};
l.scale={};var Uh={floor:t,ceil:t};l.scale.linear=function(){return Hf([0,1],[0,1],cb,!1)};var Xh={s:1,g:1,p:1,r:1,e:1};l.scale.log=function(){return If(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Jf=l.format(".0e"),Yh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};l.scale.pow=function(){return Kf(l.scale.linear(),1,[0,1])};l.scale.sqrt=function(){return l.scale.pow().exponent(.5)};l.scale.ordinal=function(){return Lf([],{t:"range",a:[[]]})};l.scale.category10=
function(){return l.scale.ordinal().range(Bi)};l.scale.category20=function(){return l.scale.ordinal().range(Ci)};l.scale.category20b=function(){return l.scale.ordinal().range(Di)};l.scale.category20c=function(){return l.scale.ordinal().range(Ei)};var Bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Hb),Ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Hb),Di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Hb),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Hb);l.scale.quantile=function(){return Mf([],[])};l.scale.quantize=function(){return Nf(0,1,[0,1])};l.scale.threshold=
function(){return Of([.5],[0,1])};l.scale.identity=function(){return Pf([0,1])};l.svg={};l.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),k=Math.max(0,+d.apply(this,arguments)),m=h.apply(this,arguments)-Z,p=g.apply(this,arguments)-Z,t=Math.abs(p-m),u=m>p?0:1;k<a&&(w=k,k=a,a=w);if(t>=qi)return b(k,u)+(a?b(a,1-u):"")+"Z";var w,F,y,N,A=w=0,D,B,z,O,M,t=[];if(N=(+l.apply(this,arguments)||0)/2)y=f===Cc?Math.sqrt(a*a+k*k):+f.apply(this,arguments),u||(A*=-1),k&&(A=Pa(y/k*Math.sin(N))),
a&&(w=Pa(y/a*Math.sin(N)));k?(y=k*Math.cos(m+A),N=k*Math.sin(m+A),D=k*Math.cos(p-A),B=k*Math.sin(p-A),F=Math.abs(p-m-2*A)<=L?0:1,A&&ic(y,N,D,B)===u^F&&(D=(m+p)/2,y=k*Math.cos(D),N=k*Math.sin(D),D=B=null)):y=N=0;if(a){A=a*Math.cos(p-w);z=a*Math.sin(p-w);O=a*Math.cos(m+w);M=a*Math.sin(m+w);var U=Math.abs(m-p+2*w)<=L?0:1;w&&ic(A,z,O,M)===1-u^U&&(O=(m+p)/2,A=a*Math.cos(O),z=a*Math.sin(O),O=M=null)}else A=z=0;if(.001<(w=Math.min(Math.abs(k-a)/2,+e.apply(this,arguments)))){F=a<k^u?0:1;var U=null==O?[A,
z]:null==D?[y,N]:id([y,N],[O,M],[D,B],[A,z]),m=y-U[0],p=N-U[1],I=D-U[0],H=B-U[1],m=1/Math.sin(Math.acos((m*I+p*H)/(Math.sqrt(m*m+p*p)*Math.sqrt(I*I+H*H)))/2),U=Math.sqrt(U[0]*U[0]+U[1]*U[1]);null!=D?(p=Math.min(w,(k-U)/(m+1)),I=jc(null==O?[A,z]:[O,M],[y,N],k,p,u),H=jc([D,B],[A,z],k,p,u),w===p?t.push("M",I[0],"A",p,",",p," 0 0,",F," ",I[1],"A",k,",",k," 0 ",1-u^ic(I[1][0],I[1][1],H[1][0],H[1][1]),",",u," ",H[1],"A",p,",",p," 0 0,",F," ",H[0]):t.push("M",I[0],"A",p,",",p," 0 1,",F," ",H[0])):t.push("M",
y,",",N);null!=O?(k=Math.min(w,(a-U)/(m-1)),O=jc([y,N],[O,M],a,-k,u),D=jc([A,z],null==D?[y,N]:[D,B],a,-k,u),w===k?t.push("L",D[0],"A",k,",",k," 0 0,",F," ",D[1],"A",a,",",a," 0 ",u^ic(D[1][0],D[1][1],O[1][0],O[1][1]),",",1-u," ",O[1],"A",k,",",k," 0 0,",F," ",O[0]):t.push("L",D[0],"A",k,",",k," 0 0,",F," ",O[0])):t.push("L",A,",",z)}else t.push("M",y,",",N),null!=D&&t.push("A",k,",",k," 0 ",F,",",u," ",D,",",B),t.push("L",A,",",z),null!=O&&t.push("A",a,",",a," 0 ",U,",",1-u," ",O,",",M);t.push("Z");
return t.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=$h,d=ai,e=Zh,f=Cc,h=Qf,g=Rf,l=bi;a.innerRadius=function(b){if(!arguments.length)return c;c=V(b);return a};a.outerRadius=function(b){if(!arguments.length)return d;d=V(b);return a};a.cornerRadius=function(b){if(!arguments.length)return e;e=V(b);return a};a.padRadius=function(b){if(!arguments.length)return f;f=b==Cc?Cc:V(b);return a};a.startAngle=function(b){if(!arguments.length)return h;
h=V(b);return a};a.endAngle=function(b){if(!arguments.length)return g;g=V(b);return a};a.padAngle=function(b){if(!arguments.length)return l;l=V(b);return a};a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+h.apply(this,arguments)+ +g.apply(this,arguments))/2-Z;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var Cc="auto";l.svg.line=function(){return Sf(t)};var yd=l.map({linear:qa,"linear-closed":function(a){return qa(a)+"Z"},step:function(a){for(var b=0,c=a.length,
d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":zd,"step-after":Ad,basis:Tf,"basis-open":function(a){if(4>a.length)return qa(a);for(var b=[],c=-1,d=a.length,e,f=[0],h=[0];3>++c;)e=a[c],f.push(e[0]),h.push(e[1]);b.push(va(Va,f)+","+va(Va,h));for(--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),h.shift(),h.push(e[1]),Cd(b,f,h);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,h=[],g=[];4>++c;)f=a[c%
d],h.push(f[0]),g.push(f[1]);b=[va(Va,h),",",va(Va,g)];for(--c;++c<e;)f=a[c%d],h.shift(),h.push(f[0]),g.shift(),g.push(f[1]),Cd(b,h,g);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,h=a[c][1]-e,g=-1,k,l;++g<=c;)k=a[g],l=g/c,k[0]=b*k[0]+(1-b)*(d+l*f),k[1]=b*k[1]+(1-b)*(e+l*h);return Tf(a)},cardinal:function(a,b){return 3>a.length?qa(a):a[0]+kc(a,Bd(a,b))},"cardinal-open":function(a,b){return 4>a.length?qa(a):a[1]+kc(a.slice(1,-1),Bd(a,b))},"cardinal-closed":function(a,
b){return 3>a.length?qa(a):a[0]+kc((a.push(a[0]),a),Bd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=qa(a);else{var b=a[0],c=[],d,e,f,h;d=0;e=a.length-1;var g=[];f=a[1];for(h=g[0]=Dd(a[0],f);++d<e;)g[d]=(h+(h=Dd(f,f=a[d+1])))/2;g[d]=h;for(var k=-1,l=a.length-1;++k<l;)d=Dd(a[k],a[k+1]),1E-6>H(d)?g[k]=g[k+1]=0:(e=g[k]/d,f=g[k+1]/d,h=e*e+f*f,9<h&&(h=3*d/Math.sqrt(h),g[k]=h*e,g[k+1]=h*f));for(k=-1;++k<=l;)h=(a[Math.min(l,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+g[k]*g[k])),c.push([h||
0,g[k]*h||0]);a=b+kc(a,c)}return a}});yd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Uf=[0,2/3,1/3,0],Vf=[0,1/3,2/3,0],Va=[0,1/6,2/3,1/6];l.svg.line.radial=function(){var a=Sf(Wf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};zd.reverse=Ad;Ad.reverse=zd;l.svg.area=function(){return Xf(t)};l.svg.area.radial=function(){var a=Xf(Wf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;
a.endAngle=a.y1;delete a.y1;return a};l.svg.chord=function(){function a(a,f){var h=b(this,d,a,f),g=b(this,e,a,f);return"M"+h.p0+c(h.r,h.p1,h.a1-h.a0)+(h.a0==g.a0&&h.a1==g.a1?"Q 0,0 "+h.p0:"Q 0,0 "+g.p0+c(g.r,g.p1,g.a1-g.a0)+("Q 0,0 "+h.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d);b=f.call(a,e,d);c=h.call(a,e,d)-Z;a=g.call(a,e,d)-Z;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function c(a,b,c){return"A"+a+","+a+" 0 "+ +(c>L)+",1 "+b}var d=ed,e=fd,f=ci,
h=Qf,g=Rf;a.radius=function(b){if(!arguments.length)return f;f=V(b);return a};a.source=function(b){if(!arguments.length)return d;d=V(b);return a};a.target=function(b){if(!arguments.length)return e;e=V(b);return a};a.startAngle=function(b){if(!arguments.length)return h;h=V(b);return a};a.endAngle=function(b){if(!arguments.length)return g;g=V(b);return a};return a};l.svg.diagonal=function(){function a(a,f){var h=b.call(this,a,f),g=c.call(this,a,f),k=(h.y+g.y)/2,h=[h,{x:h.x,y:k},{x:g.x,y:k},g],h=h.map(d);
return"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var b=ed,c=fd,d=Yf;a.source=function(c){if(!arguments.length)return b;b=V(c);return a};a.target=function(b){if(!arguments.length)return c;c=V(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};l.svg.diagonal.radial=function(){var a=l.svg.diagonal(),b=Yf,c=a.projection;a.projection=function(a){return arguments.length?c(di(b=a)):b};return a};l.svg.symbol=function(){function a(a,e){return(ng.get(b.call(this,a,e))||Zf)(c.call(this,
a,e))}var b=fi,c=ei;a.type=function(c){if(!arguments.length)return b;b=V(c);return a};a.size=function(b){if(!arguments.length)return c;c=V(b);return a};return a};var ng=l.map({circle:Zf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*og));var b=a*og;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+
","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Dc);var b=a*Dc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Dc);var b=a*Dc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});l.svg.symbolTypes=ng.keys();var Dc=Math.sqrt(3),og=Math.tan(30*I);R.transition=function(a){var b=eb||++pg;a=Fd(a);for(var c=[],d,e,f=Ec||{time:Date.now(),ease:qh,delay:0,duration:250},h=-1,g=this.length;++h<g;){c.push(d=[]);for(var k=this[h],l=-1,m=k.length;++l<m;)(e=
k[l])&&lc(e,l,a,b,f),d.push(e)}return Db(c,a,b)};R.interrupt=function(a){return this.each(null==a?pc:$f(Fd(a)))};var pc=$f(Fd()),da=[],pg=0,eb,Ec;da.call=R.call;da.empty=R.empty;da.node=R.node;da.size=R.size;l.transition=function(a,b){return a&&a.transition?eb?a.transition(b):a:l.selection().transition(a)};l.transition.prototype=da;da.select=function(a){var b=this.id,c=this.namespace,d=[],e,f,h;a=O(a);for(var g=-1,k=this.length;++g<k;){d.push(e=[]);for(var l=this[g],m=-1,p=l.length;++m<p;)(h=l[m])&&
(f=a.call(h,h.__data__,m,g))?("__data__"in h&&(f.__data__=h.__data__),lc(f,m,c,b,h[c][b]),e.push(f)):e.push(null)}return Db(d,c,b)};da.selectAll=function(a){var b=this.id,c=this.namespace,d=[],e,f,h,g;a=Rd(a);for(var k=-1,l=this.length;++k<l;)for(var m=this[k],p=-1,t=m.length;++p<t;)if(e=m[p]){g=e[c][b];f=a.call(e,e.__data__,p,k);d.push(e=[]);for(var u=-1,w=f.length;++u<w;)(h=f[u])&&lc(h,u,c,b,g),e.push(h)}return Db(d,c,b)};da.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=Zd(a));for(var f=
0,h=this.length;f<h;f++){b.push(c=[]);d=this[f];for(var g=0,k=d.length;g<k;g++)(e=d[g])&&a.call(e,e.__data__,g,f)&&c.push(e)}return Db(b,this.namespace,this.id)};da.tween=function(a,b){var c=this.id,d=this.namespace;return 2>arguments.length?this.node()[d][c].tween.get(a):Fa(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})};da.attr=function(a,b){function c(){this.removeAttribute(g)}function d(){this.removeAttributeNS(g.space,g.local)}function e(a){return null==
a?c:(a+="",function(){var b=this.getAttribute(g),c;return b!==a&&(c=h(b,a),function(a){this.setAttribute(g,c(a))})})}function f(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(g.space,g.local),c;return b!==a&&(c=h(b,a),function(a){this.setAttributeNS(g.space,g.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var h="transform"==a?tf:cb,g=l.ns.qualify(a);return Ed(this,"attr."+a,b,g.local?f:e)};da.attrTween=function(a,b){function c(a,c){var d=b.call(this,
a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=l.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};da.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Ed(this,"style."+a,b,function(b){return null==
b?d:(b+="",function(){var d=J(this).getComputedStyle(this,null).getPropertyValue(a),e;return d!==b&&(e=cb(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};da.styleTween=function(a,b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,e){var f=b.call(this,d,e,J(this).getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};da.text=function(a){return Ed(this,"text",a,gi)};da.remove=function(){var a=this.namespace;return this.each("end.transition",
function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};da.ease=function(a){var b=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][b].ease;"function"!==typeof a&&(a=l.ease.apply(l,arguments));return Fa(this,function(d){d[c][b].ease=a})};da.delay=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].delay:Fa(this,"function"===typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))};
da.duration=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].duration:Fa(this,"function"===typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))};da.each=function(a,b){var c=this.id,d=this.namespace;if(2>arguments.length){var e=Ec,f=eb;try{eb=c,Fa(this,function(b,e,f){Ec=b[d][c];a.call(b,b.__data__,e,f)})}finally{Ec=e,eb=f}}else Fa(this,function(e){e=e[d][c];(e.event||(e.event=l.dispatch("start",
"end","interrupt"))).on(a,b)});return this};da.transition=function(){for(var a=this.id,b=++pg,c=this.namespace,d=[],e,f,g,k,l=0,m=this.length;l<m;l++){d.push(e=[]);f=this[l];for(var p=0,t=f.length;p<t;p++){if(g=f[p])k=g[c][a],lc(g,p,c,b,{time:k.time,ease:k.ease,delay:k.delay+k.duration,duration:k.duration});e.push(g)}}return Db(d,c,b)};l.svg.axis=function(){function a(a){a.each(function(){var a=l.select(this),p=this.__chart__||b,q=this.__chart__=b.copy(),u=null==k?q.ticks?q.ticks.apply(q,g):q.domain():
k,w=null==m?q.tickFormat?q.tickFormat.apply(q,g):t:m,E=a.selectAll(".tick").data(u,q),u=E.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),F=l.transition(E.exit()).style("opacity",1E-6).remove(),y=l.transition(E.order()).style("opacity",1),B=Math.max(d,0)+f,A=ec(q),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),l.transition(a));u.append("line");u.append("text");var D=u.select("line"),O=y.select("line"),E=E.select("text").text(w),z=u.select("text"),
U=y.select("text"),M="top"===c||"left"===c?-1:1,I,H,L,G;"bottom"===c||"top"===c?(w=hi,I="x",L="y",H="x2",G="y2",E.attr("dy",0>M?"0em":".71em").style("text-anchor","middle"),a.attr("d","M"+A[0]+","+M*e+"V0H"+A[1]+"V"+M*e)):(w=ii,I="y",L="x",H="y2",G="x2",E.attr("dy",".32em").style("text-anchor",0>M?"end":"start"),a.attr("d","M"+M*e+","+A[0]+"H0V"+A[1]+"H"+M*e));D.attr(G,M*d);z.attr(L,M*B);O.attr(H,0).attr(G,M*d);U.attr(I,0).attr(L,M*B);if(q.rangeBand)var C=q,W=C.rangeBand()/2,p=q=function(a){return C(a)+
W};else p.rangeBand?p=q:F.call(w,q,p);u.call(w,p,q);y.call(w,q,q)})}var b=l.scale.linear(),c=qg,d=6,e=6,f=3,g=[10],k=null,m;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in Fi?b+"":qg;return a};a.ticks=function(){if(!arguments.length)return g;g=arguments;return a};a.tickValues=function(b){if(!arguments.length)return k;k=b;return a};a.tickFormat=function(b){if(!arguments.length)return m;m=b;return a};a.tickSize=function(b){var c=
arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var qg="bottom",Fi={top:1,right:1,bottom:1,left:1};l.svg.brush=function(){function a(f){f.each(function(){var f=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),m=f.selectAll(".background").data([0]);m.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var p=f.selectAll(".resize").data(O,t);p.exit().remove();p.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Gi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");p.style("display",a.empty()?"none":null);f=l.transition(f);m=l.transition(m);g&&(p=ec(g),m.attr("x",p[0]).attr("width",p[1]-p[0]),c(f));k&&(p=ec(k),m.attr("y",p[0]).attr("height",p[1]-p[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+m[+/e$/.test(a)]+","+p[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",
m[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",m[1]-m[0])}function d(a){a.select(".extent").attr("y",p[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function e(){function e(){var a=l.mouse(O),f=!1;W&&(a[0]+=W[0],a[1]+=W[1]);H||(l.event.altKey?(G||(G=[(m[0]+m[1])/2,(p[0]+p[1])/2]),C[0]=m[+(a[0]<G[0])],C[1]=p[+(a[1]<G[1])]):G=null);U&&t(a,g,0)&&(c(z),f=!0);I&&t(a,k,1)&&(d(z),f=!0);f&&(b(z),D({type:"brush",mode:H?"move":"resize"}))}function t(a,b,c){var d=ec(b);b=d[0];
var e=d[1],d=C[c],f=c?p:m,g=f[1]-f[0];H&&(b-=d,e-=g+d);a=(c?B:F)?Math.max(b,Math.min(e,a[c])):a[c];H?b=(a+=d)+g:(G&&(d=Math.max(b,Math.min(e,2*G[c]-a))),d<a?(b=a,a=d):b=d);if(f[0]!=a||f[1]!=b)return c?w=null:u=null,f[0]=a,f[1]=b,!0}function y(){e();z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);l.select("body").style("cursor",null);R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);L();D({type:"brushend"})}var O=this,A=l.select(l.event.target),D=f.of(O,arguments),z=l.select(O),M=A.datum(),U=!/^(n|s)$/.test(M)&&g,I=!/^(e|w)$/.test(M)&&k,H=A.classed("extent"),L=Gb(O),G,C=l.mouse(O),W,R=l.select(J(O)).on("keydown.brush",function(){32==l.event.keyCode&&(H||(G=null,C[0]-=m[1],C[1]-=p[1],H=2),Na())}).on("keyup.brush",function(){32==l.event.keyCode&&2==H&&(C[0]+=m[1],C[1]+=p[1],H=0,Na())});if(l.event.changedTouches)R.on("touchmove.brush",e).on("touchend.brush",
y);else R.on("mousemove.brush",e).on("mouseup.brush",y);z.interrupt().selectAll("*").interrupt();if(H)C[0]=m[0]-C[0],C[1]=p[0]-C[1];else if(M){var V=+/w$/.test(M),M=+/^n/.test(M);W=[m[1-V]-C[0],p[1-M]-C[1]];C[0]=m[V];C[1]=p[M]}else l.event.altKey&&(G=C.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null);l.select("body").style("cursor",A.style("cursor"));D({type:"brushstart"});e()}var f=Gc(a,"brushstart","brush","brushend"),g=null,k=null,m=[0,0],p=[0,0],u,w,F=!0,B=
!0,O=Nd[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:m,y:p,i:u,j:w},c=this.__chart__||b;this.__chart__=b;eb?l.select(this).transition().each("start.brush",function(){u=c.i;w=c.j;m=c.x;p=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=dc(m,b.x),d=dc(p,b.y);u=w=null;return function(e){m=b.x=c(e);p=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=b.i;w=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return g;g=b;O=Nd[!g<<1|!k];return a};a.y=function(b){if(!arguments.length)return k;k=b;O=Nd[!g<<1|!k];return a};a.clamp=function(b){if(!arguments.length)return g&&k?[F,B]:g?F:k?B:null;g&&k?(F=!!b[0],B=!!b[1]):g?F=!!b:k&&(B=!!b);return a};a.extent=function(b){var c,d,e,f,l;if(!arguments.length)return g&&(u?(c=u[0],d=u[1]):(c=m[0],d=m[1],g.invert&&(c=g.invert(c),d=g.invert(d)),d<c&&(l=c,c=d,d=l))),k&&(w?(e=
w[0],f=w[1]):(e=p[0],f=p[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(l=e,e=f,f=l))),g&&k?[[c,e],[d,f]]:g?[c,d]:k&&[e,f];g&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),u=[c,d],g.invert&&(c=g(c),d=g(d)),d<c&&(l=c,c=d,d=l),c!=m[0]||d!=m[1])&&(m=[c,d]);k&&(e=b[0],f=b[1],g&&(e=e[1],f=f[1]),w=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(l=e,e=f,f=l),e!=p[0]||f!=p[1])&&(p=[e,f]);return a};a.clear=function(){a.empty()||(m=[0,0],p=[0,0],u=w=null);return a};a.empty=function(){return!!g&&m[0]==m[1]||!!k&&p[0]==p[1]};return l.rebind(a,
f,"on")};var Gi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Od=B.format=eg.timeFormat,rg=Od.utc,sg=rg("%Y-%m-%dT%H:%M:%S.%LZ");Od.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Gd:sg;Gd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Gd.toString=sg.toString;B.second=Ya(function(a){return new ga(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});B.seconds=B.second.range;B.seconds.utc=B.second.utc.range;B.minute=Ya(function(a){return new ga(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});B.minutes=B.minute.range;B.minutes.utc=B.minute.utc.range;B.hour=Ya(function(a){var b=a.getTimezoneOffset()/60;return new ga(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},
function(a){return a.getHours()});B.hours=B.hour.range;B.hours.utc=B.hour.utc.range;B.month=Ya(function(a){a=B.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});B.months=B.month.range;B.months.utc=B.month.utc.range;var mc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Pd=[[B.second,1],[B.second,5],[B.second,15],[B.second,30],[B.minute,1],[B.minute,5],[B.minute,15],[B.minute,30],[B.hour,1],
[B.hour,3],[B.hour,6],[B.hour,12],[B.day,1],[B.day,2],[B.week,1],[B.month,1],[B.month,3],[B.year,1]],Hi=Od.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",ib]]),ji={range:function(a,b,c){return l.range(Math.ceil(a/c)*
c,+b,c).map(db)},floor:t,ceil:t};Pd.year=B.year;B.scale=function(){return Hd(l.scale.linear(),Pd,Hi)};var tg=Pd.map(function(a){return[a[0].utc,a[1]]}),Ii=rg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",ib]]);tg.year=B.year.utc;B.scale.utc=function(){return Hd(l.scale.linear(),tg,Ii)};l.text=Uc(function(a){return a.responseText});l.json=function(a,b){return Jb(a,"application/json",ki,b)};l.html=function(a,b){return Jb(a,"text/html",li,b)};l.xml=Uc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(l):"object"===typeof module&&module.exports&&(module.exports=l);this.d3=l}();
(function(){function J(G,C,z){function S(J){J=G(J);var S=J<z,P=d3.extent(G.range()),W=P[0],P=P[1],sa=S?z-W:P-z;0==sa&&(sa=P-W);return(S?-1:1)*sa*(C+1)/(C+sa/Math.abs(J-z))+z}S.distortion=function(z){if(!arguments.length)return C;C=+z;return S};S.focus=function(C){if(!arguments.length)return z;z=+C;return S};S.copy=function(){return J(G.copy(),C,z)};S.nice=G.nice;S.ticks=G.ticks;S.tickFormat=G.tickFormat;return d3.rebind(S,G,"domain","range")}d3.fisheye={scale:function(G){return J(G(),3,0)},circular:function(){function G(C){var G=
C.x-P[0],J=C.y-P[1],S=Math.sqrt(G*G+J*J);if(!S||S>=z)return{x:C.x,y:C.y,z:S>=z?1:10};C=la*(1-Math.exp(-S*ra))/S*.75+.25;return{x:P[0]+G*C,y:P[1]+J*C,z:Math.min(C,10)}}function C(){la=Math.exp(J);la=la/(la-1)*z;ra=J/z;return G}var z=200,J=2,la,ra,P=[0,0];G.radius=function(G){if(!arguments.length)return z;z=+G;return C()};G.distortion=function(z){if(!arguments.length)return J;J=+z;return C()};G.focus=function(z){if(!arguments.length)return P;P=z;return G};return C()}}})();
(function(){var J=d3.svg.symbol(),G=d3.svg.line();d3.superformula=function(){function z(z,J){var ca,ea=C[S.call(this,z,J)];for(ca in P)ea[ca]=P[ca].call(this,z,J);ca=ra.call(this,z,J);for(var k=Math.sqrt(la.call(this,z,J)),m=-1,g=2*Math.PI/ca,p,t=0,u=[];++m<ca;)p=ea.m*(m*g-Math.PI)/4,p=Math.pow(Math.abs(Math.pow(Math.abs(Math.cos(p)/ea.a),ea.n2)+Math.pow(Math.abs(Math.sin(p)/ea.b),ea.n3)),-1/ea.n1),p>t&&(t=p),u.push(p);t=k*Math.SQRT1_2/t;for(m=-1;++m<ca;)ea=(p=u[m]*t)*Math.cos(m*g),p*=Math.sin(m*
g),u[m]=[1E-6>Math.abs(ea)?0:ea,1E-6>Math.abs(p)?0:p];return G(u)+"Z"}var S=J.type(),la=J.size(),ra=la,P={};z.type=function(C){if(!arguments.length)return S;S=d3.functor(C);return z};z.param=function(C,G){if(2>arguments.length)return P[C];P[C]=d3.functor(G);return z};z.size=function(C){if(!arguments.length)return la;la=d3.functor(C);return z};z.segments=function(C){if(!arguments.length)return ra;ra=d3.functor(C);return z};return z};var C={asterisk:{m:12,n1:.3,n2:0,n3:10,a:1,b:1},bean:{m:2,n1:1,n2:4,
n3:8,a:1,b:1},butterfly:{m:3,n1:1,n2:6,n3:2,a:.6,b:1},circle:{m:4,n1:2,n2:2,n3:2,a:1,b:1},clover:{m:6,n1:.3,n2:0,n3:10,a:1,b:1},cloverFour:{m:8,n1:10,n2:-1,n3:-8,a:1,b:1},cross:{m:7.925,n1:1.662,n2:1.025,n3:3.65,a:-4.225,b:-.9625},diamond:{m:4,n1:1,n2:1,n3:1,a:1,b:1},drop:{m:1,n1:.5,n2:.5,n3:.5,a:1,b:1},ellipse:{m:4,n1:2,n2:2,n3:2,a:9,b:6},gear:{m:19,n1:100,n2:50,n3:50,a:1,b:1},heart:{m:1,n1:.8,n2:1,n3:-8,a:1,b:.18},heptagon:{m:7,n1:1E3,n2:400,n3:400,a:1,b:1},hexagon:{m:6,n1:1E3,n2:400,n3:400,a:1,
b:1},malteseCross:{m:8,n1:.9,n2:.1,n3:100,a:1,b:1},pentagon:{m:5,n1:1E3,n2:600,n3:600,a:1,b:1},rectangle:{m:4,n1:100,n2:100,n3:100,a:2,b:1},roundedStar:{m:5,n1:2,n2:7,n3:7,a:1,b:1},square:{m:4,n1:100,n2:100,n3:100,a:1,b:1},star:{m:5,n1:30,n2:100,n3:100,a:1,b:1},triangle:{m:3,n1:100,n2:200,n3:200,a:1,b:1}};d3.superformulaTypes=d3.keys(C)})();
var NLGraph=function(J,G,C,z){function S(k,m,g){if(k)return k[0][0]<=m&&m<k[1][0]&&k[0][1]<=g&&g<k[1][1]}function la(k){var m=[0],g=[-1,1];if(1==k)return m;if(2==k)return g;if(0==k%2){for(m=1;m<k/2;++m)g.push.apply(g,[-1*(m+1),-1*-(m+1)]);return g}for(g=1;g<Math.ceil(k/2);++g)m.push.apply(m,[-1*g,-1*-g]);return m}function ra(k,m,g){var p=[];k=0!=g%2?k-Math.floor(g/2)*m:-(k+(g/2-1)*m);for(var t=0;t<g;++t)p.push(k+t*m);return p}function P(k,m,g){for(var p=m+k,t=[],u=0;u<g;++u)t.push(0==u%2?-(u/2*m+
Math.abs(k)):Math.floor(u/2)*m+p);return t}function W(k,m){return d3.superformula().type(k).size(m)()}function sa(k,m,g){for(var p=k.datum(),t=0;t<m.length;++t)for(var u=m[t].toString().split(/\s+/).reverse(),w,F=[],z=0,M=k.append("text").attr("multline","attr_"+t+"-"+z++).append("textPath").attr("text-anchor","middle").attr("startOffset","50%").attr("xlink:href","#link_"+p.key).text(null);w=u.pop();)F.push(w),M.text(F.join(" ")),M.node().getComputedTextLength()>g&&(F.pop(),M.text(F.join(" ")),F=
[w],M=k.append("text").attr("multline","attr_"+t+"-"+z++).attr("text-anchor","middle").append("textPath").attr("startOffset","50%").attr("xlink:href","#link_"+p.key).text(w))}function ca(k,m,g,p,t){var u=Math.PI/180*t;t=Math.cos(u);u=Math.sin(u);return[t*(g-k)-u*(p-m)+k,u*(g-k)+t*(p-m)+m]}this.defaults_={width:1E3,height:800,force:{charge:-240,linkStrength:1,friction:.9,linkDistance:100,gravity:.05,theta:.1,coolingAlpha:0,collisionAlpha:.9,collisionRadius:0,tickPerFrame:10,staticLayout:!1},initialScale:1,
brushingStatus:!1,zoomLens:!1,autofit:!1,lineTensionDistance:25,lineConvergingOffset:5,lineDispearDistance:72,lineCurve:"liner",zoomScaleExtent:[.2,10]};this.container_=J;this.opts_={};z=z||{};this.opts_.width=z.width||this.defaults_.width;this.opts_.height=z.height||this.defaults_.height;this.opts_.color=d3.scale.category20();this.opts_.colors=z.colors||{};this.opts_.initialScale=z.initialScale||this.defaults_.initialScale;this.opts_.zoomScaleExtent=z.zoomScaleExtent||this.defaults_.zoomScaleExtent;
this.opts_.zoomLens=z.zoomLens||this.defaults_.zoomLens;this.opts_.autofit=z.autofit||this.defaults_.autofit;this.opts_.lineTensionDistance=z.lineTensionDistance||this.defaults_.lineTensionDistance;this.opts_.lineConvergingOffset=z.lineConvergingOffset||this.defaults_.lineConvergingOffset;this.opts_.lineCurve=z.edgeCurve||this.defaults_.lineCurve;this.opts_.lineDispearDistance=z.lineDispearDistance||this.defaults_.lineDispearDistance;this.opts_.force={};this.opts_.force.linkStrength=z.forceLinkStrength||
this.defaults_.force.linkStrength;this.opts_.force.friction=z.forceFriction||this.defaults_.force.friction;this.opts_.force.linkDistance=z.forceLinkDistance||this.defaults_.force.linkDistance;this.opts_.force.charge=z.forceCharge||this.defaults_.force.charge;this.opts_.force.gravity=z.forceGravity||this.defaults_.force.gravity;this.opts_.force.theta=z.forceTheta||this.defaults_.force.theta;this.opts_.force.coolingAlpha=z.forceCoolingAlpha||this.defaults_.force.coolingAlpha;this.opts_.force.collisionAlpha=
z.forceCollisionAlpha||this.defaults_.force.collisionAlpha;this.opts_.force.collisionRadius=z.collisionRadius||this.defaults_.force.collisionRadius;this.opts_.force.tickPerFrame=z.forceSpeed||this.defaults_.force.tickPerFrame;this.opts_.force.staticLayout=z.forceStatic||this.defaults_.force.staticLayout;this.opts_.brushingStatus=z.brushing||this.defaults_.brushingStatus;this.nodes=G;this.links=C;this.nodeIdTypeConcChar_="-";this.linkKeyConcChar_="_";this.shiftKey=null;this.nodeRadiusScale=d3.scale.sqrt().range(NLGraph.NODE_RADIUS_RANGE);
var ea=d3.svg.line().interpolate(this.opts_.lineCurve).x(function(k){return k[0]}).y(function(k){return k[1]});this.init_=function(){var k=this,m=this.getContainer_();m.html("");this.initZoom_();this.fisheye=d3.fisheye.circular().radius(100);this.multiSelect=d3.svg.brush().x(d3.scale.identity().domain([0,this.opts_.width])).y(d3.scale.identity().domain([0,this.opts_.height])).on("brushstart",function(){k.vertices.each(function(g){g.previouslySelected=k.shiftKey&&g.selected});k.edges.each(function(g){g.previouslySelected=
k.shiftKey&&g.selected})}).on("brush",function(){var g=d3.event.target.extent();k.vertices.select(".shape").classed("selected",function(k){return k.selected=k.previouslySelected^S(g,k.x,k.y)});k.edges.classed("selected",function(k){var m=k.previouslySelected^(S(g,k.srcOuterPoint[0],k.srcOuterPoint[1])&&S(g,k.tgtOuterPoint[0],k.tgtOuterPoint[1])),p="arrow_s"+k.key;d3.select("#arrow_e"+k.key).select("path").classed("selected",m);d3.select("#"+p).select("path").classed("selected",m);return k.selected=
m})}).on("brushend",function(){d3.event.target.clear();d3.select(this).call(d3.event.target)});this.trueZoomLens=function(){d3.event.stopPropagation();k.fisheye.focus(d3.mouse(this));k.vertices.each(function(g){g.fisheye=k.fisheye(g)}).attr("transform",function(g){return"translate("+g.fisheye.x+","+g.fisheye.y+") scale("+g.fisheye.z+")"});k.linkDrawing_()};var g=(this.opts_.width-this.opts_.initialScale*this.opts_.width)/2,p=(this.opts_.height-this.opts_.initialScale*this.opts_.height)/2;this.trueZoom_=
this.zoomL.on("zoom",bind(this,this.refreshZoom_));this.nullZoom_=d3.behavior.zoom().on("zoom",null);m=m.append("svg").attr("viewBox","0 0 "+this.opts_.width+" "+this.opts_.height).attr("class",NLGraph.BASE_CONTAINER_CLASS).attr("preserveAspectRatio","xMinYMin meet");this.parent=m.append("g");this.mouseEvtTargetRect=this.parent.append("rect").attr("width",this.opts_.width).attr("height",this.opts_.height).style("fill","none").style("pointer-events","all");this.opts_.brushingStatus?(m.call(this.nullZoom_),
this.brush_=this.parent.append("g").datum(function(){return{selected:!1,previouslySelected:!1}}).attr("class","brush").call(this.multiSelect)):(m.call(this.trueZoom_),d3.select(".brush").remove());if(this.opts_.zoomLens)this.parent.on("mousemove",this.trueZoomLens);m.on("dblclick.zoom",null);this.root=m;this.opts_.autofit||this.zoomL.translate([g,p]).scale(this.opts_.initialScale||1);d3.select("body").attr("tabindex",1).on("keydown.brush",bind(this,this.keyDown_)).on("keyup.brush",bind(this,this.keyUp_)).each(function(){this.focus()});
this.readData_(this.nodes,this.links);this.initStatus_=!0};this.keyDown_=function(){this.shiftKey=d3.event.shiftKey};this.keyUp_=function(){this.shiftKey=d3.event.shiftKey};this.toggleBrushing=function(){this.opts_.brushingStatus?(this.mulSelMode=!1,this.opts_.brushingStatus=!1,this.root.call(this.trueZoom_),d3.select(".brush").remove()):(this.mulSelMode=this.opts_.brushingStatus=!0,this.root.call(this.nullZoom_),this.brush_=this.parent.append("g").datum(function(){return{selected:!1,previouslySelected:!1}}).attr("class",
"brush").call(this.multiSelect));return this};this.toggleZoomLens=function(){this.opts_.zoomLens?(this.opts_.zoomLens=!1,this.vertices.each(function(k){k.fisheye=!1}),this.parent.on("mousemove",null)):(this.opts_.zoomLens=!0,this.parent.on("mousemove",this.trueZoomLens));return this};this.getMultiSelectedNodes=function(){var k=[];this.mulSelMode&&this.vertices.each(function(m){m.selected&&k.push(m)});return k};this.getMultiSelectedLinks=function(){var k=[];this.mulSelMode&&this.edges.each(function(m){m.selected&&
k.push(m)});return k};this.center_=function(k){k||(this.massCenter||this.computeCenterCoords_(),k=this.massCenter);this.translateTo([this.opts_.width/2,this.opts_.height/2],k);return this};this.center=function(k,m){if(!this.isRendered())return this;var g=this.getNodeByKey(k,m);g?this.center_([g.x,g.y]):this.center_();this.refreshZoom_(!0);return this};this.computeCenterCoords_=function(){var k=0,m=0,g=0;this.vertices.select(".shape").each(function(p){var t=p.shapeSize;k+=p.x*t;m+=p.y*t;g+=t});this.xCenter=
k/g;this.yCenter=m/g;return this.massCenter=[this.xCenter,this.yCenter]};this.initZoom_=function(){var k=d3.scale.linear().domain([0,this.opts_.width]).range([0,this.opts_.width]),m=d3.scale.linear().domain([0,this.opts_.height]).range([0,this.opts_.height]);this.zoomL=d3.behavior.zoom().x(k).y(m);this.opts_.initialScale&&(this.zoomL=this.zoomL.scale(this.opts_.initialScale))};this.readData_=function(k,m){var g=this,p={},t={},u={},w={},F={},z={},M={},C={},G=0;k.forEach(function(k,m){var p;p=k.style.size;
var t=d3.scale.pow().exponent(1).domain([1,100]).range([8,24]);p=Math.PI*Math.pow(t(p)||NLGraph.NORMAL_BASE_NODE_SIZE,2);k.shapeSize=p;k.radius=Math.sqrt(k.shapeSize/2);z.hasOwnProperty(k.id)||(z[k.id]=m);M.hasOwnProperty(k.type)||(M[k.type]=m);k.key=z[k.id]+g.nodeIdTypeConcChar_+M[k.type]});k.forEach(function(g){G=Math.max(G,+g.radius);p[g.key]=p[g.key]||g});m.forEach(function(k,m){var G=k.source,J=k.target,P=z[G.id]+g.nodeIdTypeConcChar_+M[G.type],S=z[J.id]+g.nodeIdTypeConcChar_+M[J.type],wa=p[P],
W=p[S];C.hasOwnProperty(k.etype)||(C[k.etype]=m);k.key=P+g.linkKeyConcChar_+S+g.linkKeyConcChar_+C[k.etype];t[k.key]=t[k.key]||k;F[P+g.linkKeyConcChar_+S]=m;wa&&W&&(G.key in w||(w[P]={}),J.key in u||(u[S]={}),w[P][S]=!0,u[S][P]=!0,k.source=wa,k.target=W)});var J=m.map(function(g){return[g.source.key,g.target.key]}).reduce(function(k,m){var p=m[0]+g.linkKeyConcChar_+m[1],t=m[1]+g.linkKeyConcChar_+m[0],p=k.hasOwnProperty(p)?p:t;k.hasOwnProperty(p)?k[p]+=1:k[p]=1;return k},{}),P={};Object.keys(J).forEach(function(g){P[g]=
J[g]});m.forEach(function(k){var m=k.source.key+g.linkKeyConcChar_+k.target.key,p=k.target.key+g.linkKeyConcChar_+k.source.key,m=P.hasOwnProperty(m)?m:p;k.linkIndex=--P[m];k.totalNoLinks=J[m];m=la(k.totalNoLinks);k.linkPos=m[k.linkIndex]});this.nodes=k;this.links=m;this.incomingNodes=u;this.outgoingNodes=w;this.nodesObj=p;this.linksObj=t;this.nodeIDsMap=z;this.nodeTypesMap=M;this.linkTypesMap=C;this.connectedMap=F;this.multiLinksNumCoord=J;this.nodeRadiusScale.domain(d3.extent(k,function(g){return g.radius}))};
this.addNode=function(k,m,g,p,t){for(var u=!1,w={id:k,type:m,attr:g},F=0;F<this.nodes.length;++F)if(objectEquals(w,this.nodes[F])){u=!0;break}if(u)return this;this.nodes.push({id:k,type:m,attr:g,style:{size:p.size||100,shape:p.shape||"square",fill:p.fill||"#ff5500",stroke:p.stroke||"#ccc",strokeWidth:p.strokeWidth||1,dashed:p.dashed||!0,opacity:p.opacity||1}});for(k=0;k<t.length;++k)m=t[k],this.links.push({source:{id:m.source.id,type:m.source.type},target:{id:m.target.id,type:m.target.type},etype:m.etype,
attr:m.attr,style:{stroke:m.style.stroke||"#ccc",strokeWidth:m.style.strokeWidth||1,dashed:m.style.dashed||!0,opacity:m.style.opacity||1},directed:m.directed||!1});this.readData_(this.nodes,this.links);this.updateGraph_();return this};this.removeNode=function(k,m){var g=this.nodes.map(function(g){return g.key}).indexOf(this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]);if(-1==g)return this;this.nodes.splice(g,1);for(g=0;g<this.links.length;++g){var p=this.links[g];(p.source.id==k&&
p.source.type==m||p.target.id==k&&p.target.type==m)&&this.links.splice(g,1)}this.readData_(this.nodes,this.links);this.updateGraph_();return this};this.addEdge=function(k,m,g,p,t,u,w,F){for(var z=!1,C=0;C<this.links.length;++C)if(this.links[C].source.id==k&&this.links[C].source.type==m&&this.links[C].target.id==g&&this.links[C].target.type==p&&this.links[C].etype==t){z=!0;break}if(z)return this;this.links.push({source:{id:k,type:m},target:{id:g,type:p},etype:t,attr:u,style:{stroke:w.stroke||"#ccc",
strokeWidth:w.strokeWidth||1,dashed:w.dashed||!0,opacity:w.opacity||1},directed:F||!1});this.readData_(this.nodes,this.links);this.updateGraph_();return this};this.removeEdge=function(k,m,g,p,t){k=this.links.map(function(g){return g.key}).indexOf(this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]+this.linkKeyConcChar_+this.nodeIDsMap[g]+this.nodeIdTypeConcChar_+this.nodeTypesMap[p]+this.linkKeyConcChar_+this.linkTypesMap[t]);if(-1==k)return this;this.links.splice(k,1);this.readData_(this.nodes,
this.links);this.updateGraph_();return this};this.fitDiv=function(k){var m=+d3.select(k).style("width").replace("px","");k=+d3.select(k).style("height").replace("px","");if(0!=m&&0!=k){var g=d3.min(this.nodes.map(function(g){return g.x-g.bbox.width/2})),p=d3.min(this.nodes.map(function(g){return g.y-g.bbox.height/2})),t=d3.max(this.nodes.map(function(g){return g.x+g.bbox.width/2})),u=d3.max(this.nodes.map(function(g){return g.y+g.bbox.height/2})),t=t-g,w=u-p,u=.8*Math.min(this.opts_.width/t,this.opts_.height/
w),m=-g*u+(m-t*u)/2;k=-p*u+(k-w*u)/2;this.parent.transition().attr("transform","translate("+[m,k]+") scale("+u+")");this.zoomL.translate([m,k]).scale(u);return this}};this.autoFit=function(){if(0===this.nodes.length)return this;this.computeFitCenterAndScale();this.parent.transition().attr("transform","translate("+this.fitCenter+") scale("+this.fitScale+")");this.zoomL.translate(this.fitCenter).scale(this.fitScale);return this};this.computeFitCenterAndScale=function(){var k=d3.min(this.nodes.map(function(g){return g.x-
g.bbox.width/2})),m=d3.min(this.nodes.map(function(g){return g.y-g.bbox.height/2})),g=d3.max(this.nodes.map(function(g){return g.x+g.bbox.width/2})),p=d3.max(this.nodes.map(function(g){return g.y+g.bbox.height/2})),g=g-k,p=p-m,t=.8*Math.min(this.opts_.width/g,this.opts_.height/p);this.fitCenter=[-k*t+(this.opts_.width-g*t)/2,-m*t+(this.opts_.height-p*t)/2];this.fitScale=t};this.applyLayout=function(k){k.apply(null,[].slice.call(arguments,1));this.vertices.attr("transform",function(k){return"translate("+
k.x+","+k.y+")"});this.linkDrawing_();this.autoFit()};this.render=function(){var k=this;this.init_();var m=d3.layout.force().charge(function(g){return g.charge||k.opts_.force.charge}).linkDistance(this.opts_.force.linkDistance).gravity(this.opts_.force.gravity).friction(this.opts_.force.friction).theta(this.opts_.force.theta).alpha(this.opts_.force.coolingAlpha).size([this.opts_.width,this.opts_.height]);m.nodes(this.nodes).links(this.links);var g=this.parent.append("defs"),p=g.selectAll(".marker_e"),
g=g.selectAll(".marker_s"),t=this.parent.append("g").selectAll(".node"),u=this.parent.append("g"),w=u.selectAll(".link"),u=u.selectAll(".label");this.arrowhead_end=p;this.arrowhead_start=g;this.vertices=t;this.edges=w;this.edgeLabel=u;this.layout=m;this.updateGraph_();return this};this.updateGraph_=function(){var k=this;this.arrowhead_end=this.arrowhead_end.data(this.layout.links(),function(g){return g.key});this.arrowhead_end.enter().append("marker").attr("class","marker_e").attr("id",function(g){return"arrow_e"+
g.key}).attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",-.1).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class",function(g){return g.etype}).style("fill",function(g){return g.style.stroke});this.arrowhead_end.exit().remove();this.arrowhead_start=this.arrowhead_start.data(this.layout.links(),function(g){return g.key});this.arrowhead_start.enter().append("marker").attr("class","marker_s").attr("id",function(g){return"arrow_s"+
g.key}).attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",-.1).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,0L10,-5L10,5").attr("class",function(g){return g.etype}).style("fill",function(g){return g.style.stroke});this.arrowhead_start.exit().remove();this.edges=this.edges.data(this.layout.links(),function(g){return g.key});this.edges.enter().insert("path",".node").attr("class",function(g){return g.etype}).attr("id",function(g){return"link_"+
g.key}).style("stroke",function(g){return g.style.stroke}).style("stroke-width",function(g){return g.style.strokeWidth+"px"}).style("opacity",function(g){return g.style.opacity}).classed("link",!0);this.edges.exit().remove();this.edgeLabel=this.edgeLabel.data(this.layout.links(),function(g){return g.key});this.edgeLabel.enter().append("g").attr("class","label");this.edgeLabel.exit().remove();var m=d3.behavior.drag().origin(function(g){return g}).on("dragstart",function(){d3.event.sourceEvent.stopPropagation();
d3.select(this).classed("dragging",!0)}).on("drag",function(g){g=k.vertices.filter(function(g){return g.selected});g.each(function(g){g.x+=d3.event.dx;g.y+=d3.event.dy});g.attr("transform",function(g){return"translate("+g.x+","+g.y+")"});k.linkDrawing_()}).on("dragend",function(){d3.select(this).classed("dragging",!1)});this.vertices=this.vertices.data(this.nodes,function(g){return g.key});m=this.vertices.enter().append("g").attr("class","node").call(m);this.vertices.on("click",bind(this,this.highLightConnectedEdgesNodes_)).on("mousedown",
function(g){g.selected||(k.shiftKey?d3.select(this).classed("selected",g.selected=!0):k.vertices.classed("selected",function(k){return k.selected=g.id==k.id&&g.type==k.type}))}).on("mouseup",function(g){g.selected&&k.shiftKey&&d3.select(this).classed("selected",g.selected=!1)});m.append("path").attr("id",function(g){return"shape_"+g.key}).attr("d",function(g){return W(g.style.shape,g.shapeSize)}).style("fill",function(g){return g.style.fill}).style("stroke",function(g){return g.style.stroke}).style("stroke-width",
function(g){return g.style.strokeWidth}).style("opacity",function(g){return g.style.opacity}).attr("class",function(g){return g.type}).classed("shape",!0).each(function(g){g.style.dashed&&d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN)});m.append("text").attr("dy","0.4em").attr("y",0).classed("label",!0).text(function(g){return g.attr.label||null}).style("text-anchor","middle").each(function(g){var k;try{k=this.getBBox()}catch(m){k={x:this.clientLeft,y:this.clientTop,width:this.clientWidth,
height:this.clientHeight}}g.bbox=k});m.insert("rect","text").classed("outline",!0).style("fill",function(g){return g.style.hasOwnProperty("label")?g.style.label.fill:"none"}).style("stroke",function(g){return g.style.hasOwnProperty("label")?g.style.label.stroke:"gray"}).attr("x",function(g){return g.bbox.x}).attr("y",function(g){return g.bbox.y}).attr("width",function(g){return g.bbox.width}).attr("height",function(g){return g.bbox.height});this.vertices.exit().transition().remove();this.layout.on("start",
function(){requestAnimationFrame(function p(){for(var m=k.opts_.force.tickPerFrame;0<m;--m)k.layout.tick(),k.layout.alpha()<k.opts_.force.collisionAlpha&&k.handleCollisions_();k.opts_.force.staticLayout&&k.layout.stop();k.vertices.attr("transform",function(k){return"translate("+k.x+","+k.y+")"});k.linkDrawing_();k.computeFitCenterAndScale();0<k.layout.alpha()?requestAnimationFrame(p):k.opts_.autofit&&k.initStatus_&&(k.parent.transition().attr("transform","translate("+k.fitCenter+") scale("+k.fitScale+
")"),k.zoomL.translate(k.fitCenter).scale(k.fitScale),k.initStatus_=!1)})});this.layout.start()};this.linkDrawing_=function(){var k=this;this.edges.each(function(m){var g=m.source.radius,p=m.target.x,t=m.source.x,u=m.target.y,w=m.source.y;m.source.fisheye&&(g*=m.source.fisheye.z,p=m.target.fisheye.x,t=m.source.fisheye.x,u=m.target.fisheye.y,w=m.source.fisheye.y);g+=5;p=Math.atan2(u-w,p-t);t+=Math.cos(p)*g;w+=Math.sin(p)*g;m.srcOuterPoint=[t,w];g=m.target.radius;t=m.target.x;p=m.source.x;w=m.target.y;
u=m.source.y;m.target.fisheye&&(g*=m.target.fisheye.z,t=m.target.fisheye.x,p=m.source.fisheye.x,w=m.target.fisheye.y,u=m.source.fisheye.y);g+=5;p=Math.atan2(w-u,t-p);t-=Math.cos(p)*g;w-=Math.sin(p)*g;m.tgtOuterPoint=[t,w];w=m.source.key+k.linkKeyConcChar_+m.target.key;t=m.target.key+k.linkKeyConcChar_+m.source.key;w=k.multiLinksNumCoord.hasOwnProperty(w)?w:t;t=k.multiLinksNumCoord[w];k.multiLinksNumCoord[w]={num:t.hasOwnProperty("num")?t.num:t,src:m.srcOuterPoint,tgt:m.tgtOuterPoint}}).attr("d",function(m){if(1==
m.totalNoLinks){var g=m.srcOuterPoint[0],p=m.srcOuterPoint[1],t=m.tgtOuterPoint[0],u=m.tgtOuterPoint[1];m.isSrc2TgtAscending=!0;var w=g,z=p;g>t&&(g=t,p=u,t=w,u=z);m.source.x>m.target.x&&(m.isSrc2TgtAscending=!1);w=Math.sqrt((u-p)*(u-p)+(t-g)*(t-g));m.c0=[g+NLGraph.CONTROL_POINT_POS*w,p];m.c1=[t-w*NLGraph.CONTROL_POINT_POS,u];return"M"+g+","+p+"L"+t+","+u}g=k.genControlPoints4MultiLinks_(m);m.c0=g[1];m.c1=g[2];return ea(g)});this.edges.each(function(m){Math.sqrt((m.target.y-m.source.y)*(m.target.y-
m.source.y)+(m.target.x-m.source.x)*(m.target.x-m.source.x))<=k.opts_.lineDispearDistance?d3.select(this).style("display","none"):d3.select(this).style("display",function(g){return g.style.display});m.directed&&(m.isSrc2TgtAscending?(d3.select(this).attr("marker-start",null),d3.select(this).attr("marker-end","url(#arrow_e"+m.key+")")):(d3.select(this).attr("marker-end",null),d3.select(this).attr("marker-start","url(#arrow_s"+m.key+")")));m.style.dashed&&d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN)});
this.edgeLabel.each(function(k){if(0!=d3.select(this).selectAll("text")[0].length){d3.select(this).selectAll("text").remove();var g=d3.select("#link_"+k.key).node().getTotalLength();d3.select(this).call(sa,k.label,g);var p=P(-.2,NLGraph.LABEL_LINE_HEIGHT,d3.select(this).selectAll("text")[0].length);p.sort(function(g,k){return g-k});d3.select(this).selectAll("text").each(function(g,k){d3.select(this).attr("dy",p[k]+"em")})}})};this.genControlPoints4MultiLinks_=function(k){var m=NLGraph.CONTROL_POINT_POS,
g=k.source.key+this.linkKeyConcChar_+k.target.key,p=k.target.key+this.linkKeyConcChar_+k.source.key,g=this.multiLinksNumCoord.hasOwnProperty(g)?g:p,g=this.multiLinksNumCoord[g],t=g.src[0],u=g.src[1],w=g.tgt[0],z=g.tgt[1],w=w-t,z=z-u,p=180*Math.atan2(z,w)/Math.PI,C=Math.sqrt(w*w+z*z),M=this.opts_.lineTensionDistance,w=t+C,z=u,G=[t+C*m,u],m=[w-C*m,z],G=[G[0],G[1]-M*k.linkPos],M=[m[0],m[1]-M*k.linkPos],m=ca(t,u,G[0],G[1],p),M=ca(t,u,M[0],M[1],p),G=180*Math.atan2(m[1]-g.src[1],m[0]-g.src[0])/Math.PI,
G=ca(t,u,t+this.opts_.lineConvergingOffset,u,G),t=ca(t,u,w+this.opts_.lineConvergingOffset,z,p),u=180*Math.atan2(M[1]-g.tgt[1],M[0]-g.tgt[0])/Math.PI,g=ca(g.tgt[0],g.tgt[1],t[0],t[1],u-p);k.source.x<k.target.x?k.isSrc2TgtAscending=!0:k.isSrc2TgtAscending=!1;if(G[0]<g[0])return k.c0=m,k.c1=M,[G,m,M,g];k.c0=M;k.c1=m;return[g,M,m,G]};this.isConnected_=function(k,m){if("undefined"!=typeof k.id&&"undefined"!=typeof k.type&&"undefined"!=typeof m.id&&"undefined"!=typeof m.type){if(k.key==m.key)return!0;
var g=this.connectedMap[m.key+this.linkKeyConcChar_+k.key];return!("undefined"==typeof this.connectedMap[k.key+this.linkKeyConcChar_+m.key]&&"undefined"==typeof g)}return!1};this.isConnected=function(k,m,g,p){return this.isConnected_({id:k,type:m,key:this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]},{id:g,type:p,key:this.nodeIDsMap[g]+this.nodeIdTypeConcChar_+this.nodeTypesMap[p]})};this.hasIncomingConnections=function(k,m){for(var g in this.incomingNodes)if(g==this.nodeIDsMap[k]+
this.nodeIdTypeConcChar_+this.nodeTypesMap[m])return!0;return!1};this.hasOutgoingConnections=function(k,m){for(var g in this.outgoingNodes)if(g==this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m])return!0;return!1};this.hasConnections=function(k,m){for(var g=0;g<this.links.length;++g){var p=this.links[g];if(p.hasOwnProperty("source")&&p.hasOwnProperty("target")&&(p.source.id==k&&p.source.type==m||p.target.id==k&&p.target.type==m))return!0}return!1};this.zoom=function(k){if("undefined"===
typeof k)return this;if(this.isRendered()){var m=this.zoomL,g=[this.opts_.width/2,this.opts_.height/2],p=this.getLocation(g);k=k<this.opts_.zoomScaleExtent[0]?this.opts_.zoomScaleExtent[0]:k>this.opts_.zoomScaleExtent[1]?this.opts_.zoomScaleExtent[1]:k;m.scale(k);this.translateTo(g,p);this.refreshZoom_(!0)}else this.opts_.initialScale=k;return this};this.zoomIn=function(){var k=this.getScale(),k=Math.pow(2,Math.floor(Math.log(k)/Math.LN2)+1),k=Math.min(k,this.opts_.zoomScaleExtent[1]);return this.zoom(k)};
this.zoomOut=function(){var k=this.getScale(),k=Math.pow(2,Math.ceil(Math.log(k)/Math.LN2)-1),k=Math.max(k,this.opts_.zoomScaleExtent[0]);return this.zoom(k)};this.refreshZoom_=function(k){var m=this.zoomL,g=this.getTranslation(),p=this.getScale();k?this.parent.transition().duration(500).attr("transform","translate("+m.translate()+") scale("+m.scale()+")"):this.parent.attr("transform","translate("+g+") scale("+p+")")};this.setNodeLabel=function(k,m,g){for(var p=this.getNodeByKey(k,m),t=[],u=NLGraph.LABEL_LINE_HEIGHT,
w=0;w<g.length;++w)t.push(this.getObjAttrUpDown(p,g[w]));var z=ra(.2,u,g.length);this.vertices.select(".label").each(function(g){if(g.id==k&&g.type==m){d3.select(this).text(null);for(var p=d3.select(this).attr("y"),u=0;u<t.length;++u)d3.select(this).append("tspan").attr("x",0).attr("y",p).attr("dy",z[u]+"em").text(t[u])}var w;try{w=this.getBBox()}catch(C){w={x:this.clientLeft,y:this.clientTop,width:this.clientWidth,height:this.clientHeight}}g.bbox=w});this.vertices.select(".outline").attr("x",function(g){return g.bbox.x}).attr("y",
function(g){return g.bbox.y}).attr("width",function(g){return g.bbox.width}).attr("height",function(g){return g.bbox.height});return this};this.setNodeTypeLabel=function(k,m){var g=ra(.2,NLGraph.LABEL_LINE_HEIGHT,m.length);this.vertices.select(".label").each(function(p){if(p.type==k){for(var t=[],u=0;u<m.length;++u)t.push(m[u]+": "+(null==p.attr[m[u]]?p[m[u]]:p.attr[m[u]]));d3.select(this).text(null);for(var u=d3.select(this).attr("y"),w=0;w<t.length;++w)d3.select(this).append("tspan").attr("x",0).attr("y",
u).attr("dy",g[w]+"em").text(t[w])}p.bbox=this.getBBox()});this.vertices.select(".outline").attr("x",function(g){return g.bbox.x}).attr("y",function(g){return g.bbox.y}).attr("width",function(g){return g.bbox.width}).attr("height",function(g){return g.bbox.height});return this};this.setEdgeLabel=function(k,m,g,p,t,u){for(var w=this.linksObj[this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]+this.linkKeyConcChar_+this.nodeIDsMap[g]+this.nodeIdTypeConcChar_+this.nodeTypesMap[p]+this.linkKeyConcChar_+
this.linkTypesMap[t]],z=[],C=0;C<u.length;++C)z.push(this.getObjAttrUpDown(w,u[C]));this.edgeLabel.each(function(u){if(u.source.id==k&&u.source.type==m&&u.target.id==g&&u.target.type==p&&u.etype==t){d3.select(this).selectAll("text").remove();var w=d3.select("#link_"+u.key).node().getTotalLength();u.label=z;d3.select(this).call(sa,z,w);var C=P(-.2,NLGraph.LABEL_LINE_HEIGHT,d3.select(this).selectAll("text")[0].length);C.sort(function(g,k){return g-k});d3.select(this).selectAll("text").each(function(g,
k){d3.select(this).attr("dy",C[k]+"em")})}});return this};this.setEdgeTypeLabel=function(k,m){var g=this;this.edgeLabel.each(function(p){p.etype==k&&g.setEdgeLabel(p.source.id,p.source.type,p.target.id,p.target.type,k,m)});return g};this.highLightConnectedEdgesNodes_=function(k){if(!d3.event.defaultPrevented){var m=this.getAssociatedLinks(k.id,k.type).map(function(g){return[g.source.id,g.source.type,g.target.id,g.target.type,g.etype]}),g=this.getAssociatedNodes(k.id,k.type).map(function(g){return[g.id,
g.type]});this.highLight([[k.id,k.type]].concat(g),m)}};this.highLight=function(k,m){d3.event&&d3.event.stopPropagation();var g=this,p=k.map(function(k){return g.nodeIDsMap[k[0]]+g.nodeIdTypeConcChar_+g.nodeTypesMap[k[1]]}),t=m.map(function(k){return g.nodeIDsMap[k[0]]+g.nodeIdTypeConcChar_+g.nodeTypesMap[k[1]]+g.linkKeyConcChar_+g.nodeIDsMap[k[2]]+g.nodeIdTypeConcChar_+g.nodeTypesMap[k[3]]+g.linkKeyConcChar_+g.linkTypesMap[k[4]]});this.vertices.classed("unhighlighted",function(g){return g.highlighted=
!~p.indexOf(g.key)});this.edges.classed("unhighlighted",function(g){return g.highlighted=!~t.indexOf(g.key)});this.edgeLabel.classed("unhighlighted",function(g){return g.highlighted=!~t.indexOf(g.key)});this.arrowhead_start.classed("unhighlighted",function(g){return g.highlighted=!~t.indexOf(g.key)});this.arrowhead_end.classed("unhighlighted",function(g){return g.highlighted=!~t.indexOf(g.key)});return this};this.hideNodes=function(k){for(var m=this,g=k.map(function(g){return m.nodeIDsMap[g[0]]+m.nodeIdTypeConcChar_+
m.nodeTypesMap[g[1]]}),p=[],t=0;t<k.length;++t)p=p.concat(this.getAssociatedLinks(k[t][0],k[t][1]));var u=p.map(function(g){return g.key});this.vertices.select(".shape").style("display",function(k){return~g.indexOf(k.key)?k.style.display="none":k.style.display});this.vertices.select(".label").style("display",function(k){return~g.indexOf(k.key)?k.style.display="none":k.style.display});this.vertices.select(".outline").style("display",function(k){return~g.indexOf(k.key)?k.style.display="none":k.style.display});
this.edges.style("display",function(g){return~u.indexOf(g.key)?g.style.display="none":g.style.display});this.edgeLabel.style("display",function(g){return~u.indexOf(g.key)?g.style.display="none":g.style.display});this.arrowhead_start.style("display",function(g){return~u.indexOf(g.key)?g.style.display="none":g.style.display});this.arrowhead_end.style("display",function(g){return~u.indexOf(g.key)?g.style.display="none":g.style.display});return this};this.unHide=function(){this.vertices.select(".shape").style("display",
function(k){return k.style.display=null});this.vertices.select(".label").style("display",function(k){return k.style.display=null});this.vertices.select(".outline").style("display",function(k){return k.style.display=null});this.edges.style("display",function(k){return k.style.display=null});this.edgeLabel.style("display",function(k){return k.style.display=null});this.arrowhead_start.style("display",function(k){return k.style.display=null});this.arrowhead_end.style("display",function(k){return k.style.display=
null});return this};this.unHighlight=function(){if(!this.mulSelMode)return this.vertices.classed("unhighlighted",function(k){return k.highlighted=!1}),this.edges.classed("unhighlighted",function(k){return k.highlighted=!1}),this.edgeLabel.classed("unhighlighted",function(k){return k.highlighted=!1}),this.arrowhead_start.classed("unhighlighted",function(k){return k.highlighted=!1}),this.arrowhead_end.classed("unhighlighted",function(k){return k.highlighted=!1}),this};this.unSelect=function(){this.vertices.classed("selected",
function(k){return k.selected=!1});this.edges.classed("selected",function(k){return k.selected=!1});this.edgeLabel.classed("selected",function(k){return k.selected=!1});this.arrowhead_start.classed("selected",function(k){return k.selected=!1});this.arrowhead_end.classed("selected",function(k){return k.selected=!1});return this};this.setNodeStyle=function(k,m,g){this.vertices.select(".shape").each(function(p){p.id==k&&p.type==m&&(d3.select(this).style("fill",function(k){return k.style.fill=g.fill||
k.style.fill}).style("stroke",function(k){return k.style.stroke=g.stroke||k.style.stroke}).style("stroke-width",function(k){return k.style.strokeWidth=g.strokeWidth||k.style.strokeWidth}).style("opacity",function(k){return k.style.opacity=g.opacity||k.style.opacity}),p.style.dashed=g.dashed||p.style.dashed,p.style.shape=g.shape||p.style.shape,g.dashed?d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN):d3.select(this).style("stroke-dasharray",null),g.shape&&d3.select(this).attr("d",
W(g.shape,g.size?nodeSizeFunc(g.size):p.shapeSize)))});return this};this.setNodeTypeStyle=function(k,m){this.vertices.select(".shape").each(function(g){g.type==k&&(d3.select(this).style("fill",function(g){return g.style.fill=m.fill||g.style.fill}).style("stroke",function(g){return g.style.stroke=m.stroke||g.style.stroke}).style("stroke-width",function(g){return g.style.strokeWidth=m.strokeWidth||g.style.strokeWidth}).style("opacity",function(g){return g.style.opacity=m.opacity||g.style.opacity}),
g.style.dashed=m.dashed||g.style.dashed,g.style.shape=m.shape||g.style.shape,m.dashed?d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN):d3.select(this).style("stroke-dasharray",null),m.shape&&d3.select(this).attr("d",W(m.shape,m.size?nodeSizeFunc(m.size):g.shapeSize)))});return this};this.setEdgeStyle=function(k,m,g,p,t,u){var w=this,z=k+w.nodeIdTypeConcChar_+m+w.linkKeyConcChar_+g+w.nodeIdTypeConcChar_+p+w.linkKeyConcChar_+t;this.edges.each(function(g){g.source.id+w.nodeIdTypeConcChar_+
g.source.type+w.linkKeyConcChar_+g.target.id+w.nodeIdTypeConcChar_+g.target.type+w.linkKeyConcChar_+g.etype==z&&(d3.select(this).style("stroke",function(g){return g.style.stroke=u.stroke||g.style.stroke}).style("stroke-width",function(g){return g.style.strokeWidth=u.strokeWidth||g.style.strokeWidth}).style("opacity",function(g){return g.style.opacity=u.opacity||g.style.opacity}),g.directed=u.directed||g.directed,g.style.dashed=u.dashed||g.style.dashed,u.directed?(d3.select(this).attr("marker-end",
function(g){return"url(#arrow_"+d3.select(this).attr("id")+")"}),d3.select("#arrow_"+d3.select(this).attr("id")+" path").style("fill",u.stroke||g.style.stroke)):d3.select(this).attr("marker-end",null),u.dashed?d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN):d3.select(this).style("stroke-dasharray",null))});return this};this.setEdgeTypeStyle=function(k,m){this.edges.each(function(g){g.etype==k&&(d3.select(this).style("stroke",function(g){return g.style.stroke=m.stroke||g.style.stroke}).style("stroke-width",
function(g){return g.style.strokeWidth=m.strokeWidth||g.style.strokeWidth}).style("opacity",function(g){return g.style.opacity=m.opacity||g.style.opacity}),g.directed=m.directed||g.directed,g.style.dashed=m.dashed||g.style.dashed,m.directed?(d3.select(this).attr("marker-end",function(g){return"url(#arrow_"+d3.select(this).attr("id")+")"}),d3.select("#arrow_"+d3.select(this).attr("id")+" path").style("fill",m.stroke||g.style.stroke)):d3.select(this).attr("marker-end",null),m.dashed?d3.select(this).style("stroke-dasharray",
NLGraph.LINE_DASHED_PATTERN):d3.select(this).style("stroke-dasharray",null))});return this};this.getSnapshot=function(){var k=deepCopyArrayBoundData(this.nodes),m=deepCopyArrayBoundData(this.links),g={zoomScale:this.getScale()};return[k,m,g]};this.restoreSnapshot=function(k){var m=k[2];this.readData_(k[0],k[1]);this.arrowhead_end=this.arrowhead_end.data(this.links,function(g){return g.key});this.arrowhead_start=this.arrowhead_start.data(this.links,function(g){return g.key});this.edges=this.edges.data(this.links,
function(g){return g.key});this.edgeLabel=this.edgeLabel.data(this.links,function(g){return g.key});this.vertices=this.vertices.data(this.nodes,function(g){return g.key});this.vertices.attr("transform",function(g){return"translate("+g.x+","+g.y+")"});this.linkDrawing_();this.zoom(m.zoomScale||1);this.vertices.classed("unhighlighted",function(g){return g.highlighted});this.vertices.select(".shape").style("fill",function(g){return g.style.fill}).style("stroke",function(g){return g.style.stroke}).style("stroke-width",
function(g){return g.style.strokeWidth}).style("opacity",function(g){return g.style.opacity}).classed("selected",function(g){return g.selected}).style("display",function(g){return g.style.display});this.vertices.select(".shape").each(function(g){g.style.dashed?d3.select(this).style("stroke-dasharray",NLGraph.LINE_DASHED_PATTERN):d3.select(this).style("stroke-dasharray",null);d3.select(this).attr("d",W(g.style.shape,g.shapeSize))});this.edges.classed("unhighlighted",function(g){return g.highlighted}).classed("selected",
function(g){return g.selected});this.edgeLabel.classed("unhighlighted",function(g){return g.highlighted}).classed("selected",function(g){return g.selected});this.arrowhead_start.classed("unhighlighted",function(g){return g.highlighted}).classed("selected",function(g){return g.selected});this.arrowhead_end.classed("unhighlighted",function(g){return g.highlighted}).classed("selected",function(g){return g.selected});this.vertices.select(".label").style("display",function(g){return g.style.display=null});
this.vertices.select(".outline").style("display",function(g){return g.style.display=null});this.edges.style("display",function(g){return g.style.display=null});this.edgeLabel.style("display",function(g){return g.style.display=null});this.arrowhead_start.style("display",function(g){return g.style.display=null});this.arrowhead_end.style("display",function(g){return g.style.display=null});return this};this.handleCollisions_=function(){function k(g,k){var p=g.radius+10,t=g.x-p,u=g.x+p,z=g.y-p,C=g.y+p;
return function(p,G,J,P,S){if(p.point&&p.point!==g){var U=g.x-p.point.x,W=g.y-p.point.y,ca=Math.sqrt(U*U+W*W),ea=g.radius+p.point.radius+m.opts_.force.collisionRadius;ca<ea&&(ca=(ca-ea)/ca*k,g.x-=U*=ca,g.y-=W*=ca,p.point.x+=U,p.point.y+=W)}return G>u||P<t||J>C||S<z}}for(var m=this,g=this.nodes,p=d3.geom.quadtree(g),t=0,u=g.length;++t<u;)p.visit(k(g[t],this.opts_.force.collisionAlpha))};this.getAssociatedLinks=function(k,m){var g=[],p;for(p in this.linksObj)if(this.linksObj.hasOwnProperty(p)){var t=
this.linksObj[p];(k==t.source.id&&m==t.source.type||k==t.target.id&&m==t.target.type)&&g.push(t)}return g};this.getAssociatedNodes=function(k,m){function g(g,k){return!!~g.map(function(g){return g.key}).indexOf(k)}var p=[],t;for(t in this.linksObj)if(this.linksObj.hasOwnProperty(t)){var u=this.linksObj[t];k==u.source.id&&m==u.source.type&&(g(p,u.target.key)||p.push(u.target));k==u.target.id&&m==u.target.type&&(g(p,u.source.key)||p.push(u.source))}return p};this.isRendered=function(){return!!this.vertices};
this.getContainer_=function(){return d3.select(this.container_)};this.getCluster=function(k){return this.getObjAttr(k.attr,"cluster")};this.getNodeSize=function(k){return this.getObjAttr(k.style,"size")};this.getNodeByKey=function(k,m){return this.nodesObj[this.nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]]};this.getLinkByKey=function(k,m,g,p,t){return this.linksObj[nodeIDsMap[k]+this.nodeIdTypeConcChar_+this.nodeTypesMap[m]+this.linkKeyConcChar_+this.nodeIDsMap[g]+this.nodeIdTypeConcChar_+
this.nodeTypesMap[p]+this.linkKeyConcChar_+this.linkTypesMap[t]]};this.getNodeShape=function(k){return this.getObjAttr(k.style,"shape")};this.getNodeStyle=function(k){return{fill:this.getObjAttr(k.style,"fill"),stroke:this.getObjAttr(k.style,"stroke"),strokeWidth:this.getObjAttr(k.style,"strokeWidth"),opacity:this.getObjAttr(k.style,"opacity")}};this.getLinkStyle=function(k){return{stroke:this.getObjAttr(k.style,"stroke"),strokeWidth:this.getObjAttr(k.style,"strokeWidth"),opacity:this.getObjAttr(k.style,
"opacity")}};this.getLocation=function(k){var m=this.getTranslation(),g=this.getScale();return[(k[0]-m[0])/g,(k[1]-m[1])/g]};this.getPoint=function(k){var m=this.getTranslation(),g=this.getScale();return[k[0]*g+m[0],k[1]*g+m[1]]};this.getTranslation=function(){return this.zoomL.translate()};this.getScale=function(){return this.zoomL.scale()};this.translateTo=function(k,m){var g=this.getTranslation(),p=this.getPoint(m);g[0]+=k[0]-p[0];g[1]+=k[1]-p[1];this.zoomL.translate(g)};this.getObjAttr=function(k,
m){return k.hasOwnProperty(m)?k[m]:null};this.getObjAttrUpDown=function(k,m){return k.hasOwnProperty(m)?k[m]:k.attr.hasOwnProperty(m)?k.attr[m]:null}};NLGraph.version="0.3.4";NLGraph.BASE_CONTAINER_CLASS="nl_graph";NLGraph.NODE_RADIUS_RANGE=[5,40];NLGraph.NORMAL_BASE_NODE_SIZE=8;NLGraph.LINE_DASHED_PATTERN="5, 5";NLGraph.CONTROL_POINT_POS=.25;NLGraph.LABEL_LINE_HEIGHT=1;
function bind(J,G){var C=[].slice;"string"==typeof G&&(G=J[G]);if("function"!=typeof G)throw Error("bind() requires a function");var z=[].slice.call(arguments,2);return function(){return G.apply(J,z.concat(C.call(arguments)))}}function objectEquals(J,G){for(var C in J)if(J.hasOwnProperty(C)&&(!G.hasOwnProperty(C)||J[C]!=G[C]))return!1;for(C in G)if(G.hasOwnProperty(C)&&(!J.hasOwnProperty(C)||J[C]!=G[C]))return!1;return!0}
function deepCopyArrayBoundData(J){var G;if(null==J||"object"!=typeof J)return J;if(J instanceof Array){G=[];for(var C=0,z=J.length;C<z;++C)G[C]=deepCopyArrayBoundData(J[C]);return G}if(J instanceof Object){G={};for(C in J)J.hasOwnProperty(C)&&(G[C]=deepCopyArrayBoundData(J[C]));return G}};